(()=>{"use strict";var e={653:(e,t,a)=>{var s=a(751),n=a(641),o=a(33);const l={id:"app"},i={key:0,class:"login-container"},r={class:"sidebar"},d={class:"sidebar-top"},c={class:"sidebar-header"},u=["src"],v={class:"sidebar-user"},p={class:"sidebar-nav"},g={class:"sidebar-bottom"},h={class:"main-content"},m={key:2,class:"update-banner"};function w(e,t,a,s,w,k){return(0,n.uX)(),(0,n.CE)("div",l,[s.user?((0,n.uX)(),(0,n.CE)("div",{key:1,class:(0,o.C4)(["main-layout",{"sidebar-collapsed":s.isSidebarCollapsed}])},[(0,n.Lk)("aside",r,[(0,n.Lk)("div",d,[(0,n.Lk)("button",{class:"sidebar-toggle",onClick:t[1]||(t[1]=(...e)=>s.toggleSidebar&&s.toggleSidebar(...e)),title:"Toggle Sidebar"},t[18]||(t[18]=[(0,n.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor"},[(0,n.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,n.Lk)("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"})],-1)])),(0,n.Lk)("div",c,[(0,n.Lk)("img",{src:s.user.photoURL||"https://cdn-icons-png.flaticon.com/512/149/149071.png",class:"sidebar-avatar",alt:"User",referrerpolicy:"no-referrer"},null,8,u),(0,n.Lk)("div",v,(0,o.v_)(s.user.displayName),1)]),(0,n.Lk)("nav",p,[(0,n.Lk)("button",{class:(0,o.C4)(["sidebar-link",{active:"home"===s.currentPage}]),onClick:t[2]||(t[2]=(...e)=>s.goToHome&&s.goToHome(...e)),title:"Home"},t[19]||(t[19]=[(0,n.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor"},[(0,n.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,n.Lk)("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8h5z"})],-1),(0,n.Lk)("span",null,"Home",-1)]),2),(0,n.Lk)("button",{class:(0,o.C4)(["sidebar-link",{active:"leaderboard"===s.currentPage}]),onClick:t[3]||(t[3]=(...e)=>s.goToLeaderboard&&s.goToLeaderboard(...e)),title:"Leaderboard"},t[20]||(t[20]=[(0,n.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor"},[(0,n.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,n.Lk)("path",{d:"M16 11V3H8v6H2v12h20V11h-6zm-6-6h4v14h-4V5zm-6 6h4v8H4v-8zm16 8h-4v-8h4v8z"})],-1),(0,n.Lk)("span",null,"Leaderboard",-1)]),2),(0,n.Lk)("button",{class:(0,o.C4)(["sidebar-link",{active:"review"===s.currentPage}]),onClick:t[4]||(t[4]=(...e)=>s.goToReview&&s.goToReview(...e)),title:"Write a Review"},t[21]||(t[21]=[(0,n.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor"},[(0,n.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,n.Lk)("path",{d:"M12 2C8.14 2 5 5.14 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.86-3.14-7-7-7zm-1.5 9h-2v-2h2v2zm5 0h-2v-2h2v2zm-2.5-4h-2V5h2v2z"})],-1),(0,n.Lk)("span",null,"Write a Review",-1)]),2),(0,n.Lk)("button",{class:(0,o.C4)(["sidebar-link",{active:"restaurants"===s.currentPage}]),onClick:t[5]||(t[5]=(...e)=>s.goToRestaurants&&s.goToRestaurants(...e)),title:"Restaurants"},t[22]||(t[22]=[(0,n.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor"},[(0,n.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,n.Lk)("path",{d:"M16 6v8h3v8h-3v-2h-2v2h-2v-2h-2v2H8v-2H6v2H3v-8h3V6c0-3.31 2.69-6 6-6s6 2.69 6 6zm-2 0c0-2.21-1.79-4-4-4s-4 1.79-4 4v8h8V6zm-5 3h2v2h-2z"})],-1),(0,n.Lk)("span",null,"Restaurants",-1)]),2),(0,n.Lk)("button",{class:(0,o.C4)(["sidebar-link",{active:"recommendations"===s.currentPage}]),onClick:t[6]||(t[6]=(...e)=>s.goToRecommendations&&s.goToRecommendations(...e)),title:"Recommendations"},t[23]||(t[23]=[(0,n.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor"},[(0,n.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,n.Lk)("path",{d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27z"})],-1),(0,n.Lk)("span",null,"Recommendations",-1)]),2),(0,n.Lk)("button",{class:(0,o.C4)(["sidebar-link",{active:"user-search"===s.currentPage}]),onClick:t[7]||(t[7]=(...e)=>s.goToUserSearch&&s.goToUserSearch(...e)),title:"Follow Users"},t[24]||(t[24]=[(0,n.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor"},[(0,n.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,n.Lk)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 5 1.41-1.41L15.5 14zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14zM12 10V7H8v3H5v2h3v3h2v-3h3v-2h-3z"})],-1),(0,n.Lk)("span",null,"Follow Users",-1)]),2),(0,n.Lk)("button",{class:(0,o.C4)(["sidebar-link",{active:"bucket-list"===s.currentPage}]),onClick:t[8]||(t[8]=(...e)=>s.goToBucketList&&s.goToBucketList(...e)),title:"My Bucket List"},t[25]||(t[25]=[(0,n.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor"},[(0,n.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,n.Lk)("path",{d:"M18 7h-2.06c-.33-3.2-2.46-5.8-5.94-5.8S4.39 3.8 4.06 7H2v12h16V7zM6.14 7c.2-1.92 1.6-3.48 3.86-3.8A4.002 4.002 0 0 1 14 7h-2.14c-.2-1.92-1.6-3.48-3.86-3.8zM16 17H4v-8h12v8z"})],-1),(0,n.Lk)("span",null,"My Bucket List",-1)]),2),(0,n.Lk)("button",{class:(0,o.C4)(["sidebar-link",{active:"my-reviews"===s.currentPage}]),onClick:t[9]||(t[9]=(...e)=>s.goToMyReviews&&s.goToMyReviews(...e)),title:"My Reviews"},t[26]||(t[26]=[(0,n.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor"},[(0,n.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,n.Lk)("path",{d:"M3 13h2v-2H3v2zm0 4h2v-2H3v2zm0-8h2V7H3v2zm4 4h14v-2H7v2zm0 4h14v-2H7v2zM7 7v2h14V7H7z"})],-1),(0,n.Lk)("span",null,"My Reviews",-1)]),2),(0,n.Lk)("button",{class:(0,o.C4)(["sidebar-link",{active:"followers"===s.currentPage}]),onClick:t[10]||(t[10]=(...e)=>s.goToFollowers&&s.goToFollowers(...e)),title:"My Followers"},t[27]||(t[27]=[(0,n.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor"},[(0,n.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,n.Lk)("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5s-3 1.34-3 3 1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"})],-1),(0,n.Lk)("span",null,"My Followers",-1)]),2),(0,n.Lk)("button",{class:(0,o.C4)(["sidebar-link",{active:"following"===s.currentPage}]),onClick:t[11]||(t[11]=(...e)=>s.goToFollowing&&s.goToFollowing(...e)),title:"Following"},t[28]||(t[28]=[(0,n.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor"},[(0,n.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,n.Lk)("circle",{cx:"6.18",cy:"17.82",r:"2.18"}),(0,n.Lk)("path",{d:"M4 4.44v2.83c3.9 0 7.07 3.17 7.07 7.07h2.83c0-5.47-4.43-9.9-9.9-9.9zM4 10.1v2.83c2.39 0 4.33 1.94 4.33 4.33h2.83c0-3.98-3.23-7.16-7.16-7.16z"})],-1),(0,n.Lk)("span",null,"Following",-1)]),2)])]),(0,n.Lk)("div",g,[s.isAdmin?((0,n.uX)(),(0,n.CE)("button",{key:0,class:(0,o.C4)(["sidebar-link",{active:"database-stats"===s.currentPage}]),onClick:t[12]||(t[12]=(...e)=>s.goToDatabaseStats&&s.goToDatabaseStats(...e)),title:"Database Stats"},t[29]||(t[29]=[(0,n.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor"},[(0,n.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,n.Lk)("path",{d:"M5 9.2h3V19H5zM10.6 5h2.8v14h-2.8zm5.6 8H19v6h-2.8z"})],-1),(0,n.Lk)("span",null,"Database Stats",-1)]),2)):(0,n.Q3)("",!0),(0,n.Lk)("button",{class:"sidebar-link",onClick:t[13]||(t[13]=(...e)=>s.logout&&s.logout(...e)),title:"Logout"},t[30]||(t[30]=[(0,n.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor"},[(0,n.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,n.Lk)("path",{d:"M17 7l-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5-5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"})],-1),(0,n.Lk)("span",null,"Logout",-1)]))])]),(0,n.Lk)("main",h,[((0,n.uX)(),(0,n.Wv)((0,n.$y)(s.currentComponent),{onReviewed:s.goToHome,onCheckInAt:s.reviewAt,onReviewAt:s.reviewAt,onGoToReview:s.goToReview,"selected-restaurant-id":s.selectedRestaurantForReview},null,40,["onReviewed","onCheckInAt","onReviewAt","onGoToReview","selected-restaurant-id"]))])],2)):((0,n.uX)(),(0,n.CE)("div",i,[t[15]||(t[15]=(0,n.Lk)("img",{src:"/logo.svg",alt:"Porko Logo",class:"tenderloin-img"},null,-1)),t[16]||(t[16]=(0,n.Lk)("h2",null,"Welcome to Porko!",-1)),t[17]||(t[17]=(0,n.Lk)("p",{class:"login-desc"},"Find, review, and share the best breaded pork tenderloin sandwiches!",-1)),(0,n.Lk)("button",{class:"login-btn",onClick:t[0]||(t[0]=(...e)=>s.loginWithGoogle&&s.loginWithGoogle(...e))},"Login with Google")])),s.updateExists?((0,n.uX)(),(0,n.CE)("div",m,[t[31]||(t[31]=(0,n.eW)(" A new version is available. ",-1)),(0,n.Lk)("button",{onClick:t[14]||(t[14]=(...e)=>s.refreshApp&&s.refreshApp(...e))},"Refresh")])):(0,n.Q3)("",!0)])}const k={class:"home-page"},L={key:0,class:"location-prompt-banner"},y={key:1,class:"location-prompt-banner warning"},R={class:"feed"},f={key:0,class:"loading-indicator"},C={key:1},b={key:0,class:"no-posts-message"},M={class:"post-header"},E=["src"],I={class:"post-info"},U={class:"user-line"},z={class:"user-name"},S={key:0,class:"medal"},x={class:"post-date"},N={class:"post-content"},P={class:"post-title-line"},F={class:"restaurant-title-group"},X={class:"restaurant-name"},_=["onClick","title"],A={key:0,class:"distance"},K={class:"review-body"},B={key:0,class:"review-text"},V=["src"],H={key:2,class:"tags-container"},G={ref:"loadMoreTrigger"},T={key:1,class:"loading-indicator"};function D(e,t,a,s,l,i){const r=(0,n.g2)("StarRating"),d=(0,n.g2)("Comments");return(0,n.uX)(),(0,n.CE)("div",k,["prompt"===s.locationPermission?((0,n.uX)(),(0,n.CE)("div",L,[t[1]||(t[1]=(0,n.Lk)("div",{class:"banner-content"},[(0,n.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor"},[(0,n.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,n.Lk)("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.86-3.14-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"})]),(0,n.Lk)("p",null,"Share your location to see posts and restaurants near you!")],-1)),(0,n.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>s.requestLocationAccess&&s.requestLocationAccess(...e)),class:"btn-primary"},"Share Location")])):(0,n.Q3)("",!0),"denied"===s.locationPermission?((0,n.uX)(),(0,n.CE)("div",y,t[2]||(t[2]=[(0,n.Lk)("div",{class:"banner-content"},[(0,n.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor"},[(0,n.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,n.Lk)("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"})]),(0,n.Lk)("p",null,"Location access is denied. To see local content, please enable location services for this site in your browser settings.")],-1)]))):(0,n.Q3)("",!0),(0,n.Lk)("div",R,[s.loading?((0,n.uX)(),(0,n.CE)("div",f,"Loading feed...")):((0,n.uX)(),(0,n.CE)("div",C,[0===s.posts.length?((0,n.uX)(),(0,n.CE)("div",b,t[3]||(t[3]=[(0,n.Lk)("h3",null,"Welcome to Porko!",-1),(0,n.Lk)("p",null,"Follow some users to see their reviews in your feed, or check out the Restaurants page to find new places.",-1)]))):(0,n.Q3)("",!0),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.posts,e=>((0,n.uX)(),(0,n.CE)("div",{key:e.id,class:"post-card"},[(0,n.Lk)("div",M,[(0,n.Lk)("img",{src:e.userPhoto||"https://cdn-icons-png.flaticon.com/512/149/149071.png",alt:"User",class:"user-avatar",referrerpolicy:"no-referrer"},null,8,E),(0,n.Lk)("div",I,[(0,n.Lk)("div",U,[(0,n.Lk)("span",z,(0,o.v_)(e.userName),1),e.medal?((0,n.uX)(),(0,n.CE)("span",S,(0,o.v_)(e.medal),1)):(0,n.Q3)("",!0)]),(0,n.Lk)("span",x,(0,o.v_)(e.createdAt.toDate().toLocaleString()),1)])]),(0,n.Lk)("div",N,[(0,n.Lk)("div",P,[(0,n.Lk)("div",F,[(0,n.Lk)("h4",X,(0,o.v_)(e.restaurantName),1),(0,n.Lk)("button",{onClick:t=>s.toggleBucketList(e),class:(0,o.C4)(["action-btn bucket-list-btn",{"in-bucket-list":s.isInBucketList(e.restaurantId)}]),title:s.isInBucketList(e.restaurantId)?"In Bucket List":"Add to Bucket List"},t[4]||(t[4]=[(0,n.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20px",viewBox:"0 0 24 24",width:"20px",fill:"currentColor"},[(0,n.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,n.Lk)("path",{d:"M18 7h-2.06c-.33-3.2-2.46-5.8-5.94-5.8S4.39 3.8 4.06 7H2v12h16V7zM6.14 7c.2-1.92 1.6-3.48 3.86-3.8A4.002 4.002 0 0 1 14 7h-2.14c-.2-1.92-1.6-3.48-3.86-3.8zM16 17H4v-8h12v8z"})],-1)]),10,_)]),null!==e.distance?((0,n.uX)(),(0,n.CE)("div",A,(0,o.v_)(e.distance.toFixed(1))+" miles away ",1)):(0,n.Q3)("",!0)]),(0,n.Lk)("div",K,[(0,n.bF)(r,{rating:e.rating},null,8,["rating"]),e.text?((0,n.uX)(),(0,n.CE)("p",B,'"'+(0,o.v_)(e.text)+'"',1)):(0,n.Q3)("",!0),e.photoURL?((0,n.uX)(),(0,n.CE)("img",{key:1,src:e.photoURL,alt:"Review photo",class:"review-photo"},null,8,V)):(0,n.Q3)("",!0),e.tags&&e.tags.length>0?((0,n.uX)(),(0,n.CE)("div",H,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.tags,e=>((0,n.uX)(),(0,n.CE)("span",{key:e,class:"tag"},(0,o.v_)(e),1))),128))])):(0,n.Q3)("",!0)]),(0,n.bF)(d,{"post-id":e.id,"post-type":"reviews","post-author-id":e.userId},null,8,["post-id","post-author-id"])])]))),128)),(0,n.Lk)("div",G,null,512),s.loadingMore?((0,n.uX)(),(0,n.CE)("div",T,"Loading more...")):(0,n.Q3)("",!0)]))])])}var J=a(953),W=a(223),Q=a(962),$=a(185),O=a(993);const j={apiKey:"AIzaSyDxzi70xuS1KxemDBF1logZ6zyHxINFfp4",authDomain:"porko-c0f87.firebaseapp.com",projectId:"porko-c0f87",storageBucket:"porko-c0f87.firebasestorage.app",messagingSenderId:"1050714930836",appId:"1:1050714930836:web:5b4c9bdf93e95748a23e81",measurementId:"G-3LCKP815FM"},q=(0,W.Wp)(j),Z=(0,Q.xI)(q),Y=new Q.HF,ee=(0,$.aU)(q),te=((0,O.c7)(q),{class:"comments-section"}),ae={class:"comment-list"},se=["src","alt"],ne={class:"comment-content"},oe={class:"comment-header"},le={class:"comment-user-name"},ie={class:"comment-date"},re={key:0},de={class:"comment-text"},ce={class:"comment-actions"},ue=["onClick"],ve=["onClick"],pe={key:1,class:"edit-comment"},ge={class:"edit-actions"},he={class:"add-comment"},me=["disabled"];function we(e,t,a,l,i,r){return(0,n.uX)(),(0,n.CE)("div",te,[(0,n.Lk)("div",ae,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.comments,e=>((0,n.uX)(),(0,n.CE)("div",{key:e.id,class:"comment"},[(0,n.Lk)("img",{src:e.userPhoto||"https://cdn-icons-png.flaticon.com/512/149/149071.png",alt:e.userName,class:"comment-user-photo",referrerpolicy:"no-referrer"},null,8,se),(0,n.Lk)("div",ne,[(0,n.Lk)("div",oe,[(0,n.Lk)("span",le,(0,o.v_)(e.userName),1),(0,n.Lk)("span",ie,(0,o.v_)(l.formatDate(e.createdAt)),1)]),l.editingCommentId!==e.id?((0,n.uX)(),(0,n.CE)("div",re,[(0,n.Lk)("p",de,(0,o.v_)(e.text),1),(0,n.Lk)("div",ce,[l.canEdit(e)?((0,n.uX)(),(0,n.CE)("button",{key:0,onClick:t=>l.startEditing(e),class:"action-btn"},"Edit",8,ue)):(0,n.Q3)("",!0),l.canDelete(e)?((0,n.uX)(),(0,n.CE)("button",{key:1,onClick:t=>l.deleteComment(e.id),class:"action-btn delete"},"Delete",8,ve)):(0,n.Q3)("",!0)])])):((0,n.uX)(),(0,n.CE)("div",pe,[(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.editingText=e),onKeyup:t[1]||(t[1]=(0,s.jR)((...e)=>l.saveEdit&&l.saveEdit(...e),["enter"])),class:"edit-input"},null,544),[[s.Jo,l.editingText]]),(0,n.Lk)("div",ge,[(0,n.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>l.saveEdit&&l.saveEdit(...e)),class:"btn-primary"},"Save"),(0,n.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>l.cancelEdit&&l.cancelEdit(...e)),class:"btn-secondary"},"Cancel")])]))])]))),128))]),(0,n.Lk)("div",he,[(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>l.newComment=e),placeholder:"Add a comment...",onKeyup:t[5]||(t[5]=(0,s.jR)((...e)=>l.addComment&&l.addComment(...e),["enter"]))},null,544),[[s.Jo,l.newComment]]),(0,n.Lk)("button",{onClick:t[6]||(t[6]=(...e)=>l.addComment&&l.addComment(...e)),disabled:!l.newComment.trim()},"Post",8,me)])])}const ke={name:"Comments",props:{postId:{type:String,required:!0},postType:{type:String,required:!0},postAuthorId:{type:String,required:!0}},setup(e){const t=(0,J.KR)([]),a=(0,J.KR)(""),s=(0,J.KR)(null),o=(0,J.KR)("");let l=()=>{};(0,n.sV)(()=>{const a=(0,$.rJ)(ee,e.postType,e.postId,"comments"),s=(0,$.P)(a,(0,$.My)("createdAt","asc"));l=(0,$.aQ)(s,async e=>{const a=e.docs.map(e=>({id:e.id,...e.data()})),s=[...new Set(a.map(e=>e.userId))];if(s.length>0){const e=new Map;for(let t=0;t<s.length;t+=30){const a=s.slice(t,t+30),n=(0,$.P)((0,$.rJ)(ee,"users"),(0,$._M)((0,$.Fs)(),"in",a)),o=await(0,$.GG)(n);o.forEach(t=>e.set(t.id,t.data()))}t.value=a.map(t=>{const a=e.get(t.userId);return{...t,userName:a?.displayName||t.userName||"Unknown User",userPhoto:a?.photoURL||t.userPhoto||null}})}else t.value=[]})}),(0,n.hi)(()=>{l()});const i=async()=>{if(""===a.value.trim())return;const t=Z.currentUser;if(!t)return;const s=(0,$.O5)(),n=(0,$.rJ)(ee,e.postType,e.postId,"comments"),o=(0,$.H9)(ee,"reviews",e.postId);await Promise.all([(0,$.gS)(n,{userId:t.uid,text:a.value,createdAt:s}),(0,$.mZ)(o,{lastActivityAt:s})]),a.value=""},r=e=>{const t=Z.currentUser;return t&&t.uid===e.userId},d=t=>{const a=Z.currentUser;return a&&(a.uid===t.userId||a.uid===e.postAuthorId)},c=e=>{s.value=e.id,o.value=e.text},u=()=>{s.value=null,o.value=""},v=async()=>{if(""===o.value.trim()||!s.value)return;const t=(0,$.H9)(ee,e.postType,e.postId,"comments",s.value),a=(0,$.H9)(ee,"reviews",e.postId);await Promise.all([(0,$.mZ)(t,{text:o.value}),(0,$.mZ)(a,{lastActivityAt:(0,$.O5)()})]),u()},p=async t=>{if(confirm("Are you sure you want to delete this comment?")){const a=(0,$.H9)(ee,e.postType,e.postId,"comments",t),s=(0,$.H9)(ee,"reviews",e.postId);await Promise.all([(0,$.kd)(a),(0,$.mZ)(s,{lastActivityAt:(0,$.O5)()})])}},g=e=>e&&e.toDate?e.toDate().toLocaleString():"";return{comments:t,newComment:a,addComment:i,canEdit:r,canDelete:d,startEditing:c,cancelEdit:u,saveEdit:v,deleteComment:p,editingCommentId:s,editingText:o,formatDate:g}}};var Le=a(262);const ye=(0,Le.A)(ke,[["render",we],["__scopeId","data-v-18a9cab6"]]),Re=ye,fe={class:"star-rating"},Ce=["d"];function be(e,t,a,s,o,l){return(0,n.uX)(),(0,n.CE)("div",fe,[((0,n.uX)(),(0,n.CE)(n.FK,null,(0,n.pI)(5,e=>(0,n.Lk)("svg",{key:e,height:"16px",width:"16px",viewBox:"0 0 24 24",fill:"currentColor"},[t[0]||(t[0]=(0,n.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"},null,-1)),(0,n.Lk)("path",{d:s.getStarPath(e)},null,8,Ce)])),64))])}const Me={name:"StarRating",props:{rating:{type:Number,required:!0,default:0}},setup(e){const t="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27z",a="M22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27V6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L18.18 21l-1.64-7.03L22 9.24zM12 15.4z",s="M22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.64-7.03L22 9.24zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z",n=n=>e.rating>=n?t:e.rating>=n-.5?a:s;return{getStarPath:n}}},Ee=(0,Le.A)(Me,[["render",be],["__scopeId","data-v-6bd33956"]]),Ie=Ee;function Ue(e,t,a,s){if(null===e||null===t||null===a||null===s)return null;if(e===a&&t===s)return 0;const n=3959,o=(a-e)*Math.PI/180,l=(s-t)*Math.PI/180,i=Math.sin(o/2)*Math.sin(o/2)+Math.cos(e*Math.PI/180)*Math.cos(a*Math.PI/180)*Math.sin(l/2)*Math.sin(l/2),r=2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i));return n*r}const ze={name:"Home",components:{StarRating:Ie,Comments:Re},setup(){const e=(0,J.KR)([]),t=(0,J.KR)(!0),a=(0,J.KR)(null),s=(0,J.KR)(""),o=(0,J.KR)(null),l=(0,J.KR)(!1),i=new Map,r=(0,J.KR)([]),d=10;let c=null;const u=[],v=(0,J.KR)(new Set),p=(0,J.KR)(new Map);(0,n.hi)(()=>{u.forEach(e=>e()),c&&c.disconnect()}),(0,n.sV)(()=>{c=new IntersectionObserver(e=>{e[0].isIntersecting&&h()}),w()}),(0,n.wB)(o,(e,t)=>{t&&c.unobserve(t),e&&c.observe(e)});const g=async()=>{t.value=!0,u.forEach(e=>e()),u.length=0,i.clear();const s=(0,$.P)((0,$.rJ)(ee,"bucketListItems"),(0,$._M)("userId","==",Z.currentUser.uid)),n=(0,$.aQ)(s,e=>{const t=new Set;e.forEach(e=>t.add(e.data().restaurantId)),v.value=t});u.push(n);const o=Z.currentUser;if(!o)return void(t.value=!1);const[l,c,g]=await Promise.all([(0,$.GG)((0,$.P)((0,$.rJ)(ee,"follows"),(0,$._M)("followerId","==",o.uid))),(0,$.GG)((0,$.rJ)(ee,"restaurants")),(0,$.GG)((0,$.rJ)(ee,"users"))]),h=new Map;c.forEach(e=>{h.set(e.id,e.data())});const m=new Map;g.forEach(e=>{m.set(e.id,e.data())});const w=()=>{i.forEach(e=>{const t=p.value.get(e.userId);e.medal=k(t)}),r.value=Array.from(i.values()).sort((e,t)=>{const a=e.lastActivityAt||e.createdAt,s=t.lastActivityAt||t.createdAt;return s.seconds-a.seconds}),e.value=r.value.slice(0,e.value.length||d)},L=(0,$.P)((0,$.rJ)(ee,"users"),(0,$.My)("reviewCount","desc"),(0,$.AB)(3)),y=(0,$.aQ)(L,e=>{const t=new Map;e.forEach((e,a)=>{t.set(e.id,a)}),p.value=t,w()});u.push(y);const R=e=>{e.docChanges().forEach(e=>{if("removed"===e.type)i.delete(e.doc.id);else{const t=e.doc.data(),s=h.get(t.restaurantId),n=m.get(t.userId),o=p.value.get(t.userId),l={...t,id:e.doc.id,restaurantName:s?.name||"Unknown Restaurant",location:s?.location||null,distance:a.value&&s?.location?Ue(a.value.lat,a.value.lng,s.location.lat,s.location.lng):null,userName:n?.displayName||"Unknown User",userPhoto:n?.photoURL||null,medal:k(o)};i.set(l.id,l)}}),w(),t.value=!1},f=l.docs.map(e=>e.data().followingId);if(f.includes(o.uid)||f.push(o.uid),f.length>0)for(let e=0;e<f.length;e+=30){const t=f.slice(e,e+30),a=(0,$.P)((0,$.rJ)(ee,"reviews"),(0,$._M)("userId","in",t),(0,$.My)("lastActivityAt","desc")),s=(0,$.aQ)(a,R,e=>console.error("Feed error (followed):",e));u.push(s)}if(a.value){const e=[];if(c.forEach(t=>{const s=t.data();if(s.location){const n=Ue(a.value.lat,a.value.lng,s.location.lat,s.location.lng);null!==n&&n<=100&&e.push(t.id)}}),e.length>0)for(let t=0;t<e.length;t+=30){const a=e.slice(t,t+30),s=(0,$.P)((0,$.rJ)(ee,"reviews"),(0,$._M)("restaurantId","in",a),(0,$.My)("lastActivityAt","desc")),n=(0,$.aQ)(s,R,e=>console.error("Feed error (nearby):",e));u.push(n)}}0===u.length&&(t.value=!1)},h=()=>{l.value||e.value.length>=r.value.length||(l.value=!0,setTimeout(()=>{const t=e.value.length,a=r.value.slice(t,t+d);e.value.push(...a),l.value=!1},300))},m=()=>{navigator.geolocation.getCurrentPosition(e=>{s.value="granted",a.value={lat:e.coords.latitude,lng:e.coords.longitude},g()},()=>{s.value="denied",g()},{timeout:1e4})},w=async()=>{if(navigator.permissions)try{const e=await navigator.permissions.query({name:"geolocation"});s.value=e.state,e.onchange=()=>{s.value=e.state,"granted"===e.state&&m()},"granted"===e.state?m():g()}catch(e){console.error("Error checking location permission:",e),m()}else m()},k=e=>"number"!==typeof e?null:0===e?"ðŸ¥‡":1===e?"ðŸ¥ˆ":2===e?"ðŸ¥‰":null,L=e=>v.value.has(e),y=async e=>{const t=Z.currentUser;if(t)if(L(e.restaurantId)){const a=(0,$.P)((0,$.rJ)(ee,"bucketListItems"),(0,$._M)("userId","==",t.uid),(0,$._M)("restaurantId","==",e.restaurantId)),s=await(0,$.GG)(a);s.forEach(e=>(0,$.kd)(e.ref))}else await(0,$.gS)((0,$.rJ)(ee,"bucketListItems"),{userId:t.uid,restaurantId:e.restaurantId,createdAt:(0,$.O5)()})};return(0,n.sV)(w),{posts:e,loading:t,locationPermission:s,requestLocationAccess:m,loadMoreTrigger:o,loadingMore:l,isInBucketList:L,toggleBucketList:y}}},Se=(0,Le.A)(ze,[["render",D],["__scopeId","data-v-3a735d45"]]),xe=Se,Ne={class:"restaurants-page"},Pe={class:"search-box"},Fe={class:"add-restaurant-container"},Xe={class:"form-group"},_e={class:"form-group"},Ae={class:"form-group-row"},Ke={class:"form-group"},Be={class:"form-group"},Ve={class:"form-group"},He={class:"form-group"},Ge={key:0,class:"error-message"},Te=["disabled"],De={key:2,class:"loading-indicator"},Je={key:3,class:"restaurant-list-container"},We={key:0,class:"restaurant-list"},Qe={class:"restaurant-details"},$e={class:"restaurant-name"},Oe={class:"restaurant-meta"},je=["title"],qe={class:"rating-text"},Ze={class:"rating-count"},Ye={key:1,class:"distance"},et={class:"restaurant-address"},tt={class:"restaurant-actions"},at=["onClick","title"],st=["onClick"],nt=["onClick"],ot=["href"],lt=["href"],it=["href"],rt=["onClick"],dt={key:1,class:"no-restaurants-message"};function ct(e,t,a,l,i,r){const d=(0,n.g2)("EditRestaurantModal"),c=(0,n.g2)("RestaurantReviewsModal"),u=(0,n.g2)("StarRating");return(0,n.uX)(),(0,n.CE)("div",Ne,[l.isEditModalVisible?((0,n.uX)(),(0,n.Wv)(d,{key:0,restaurant:l.restaurantToEdit,onClose:l.closeEditModal,onSave:l.saveRestaurantChanges},null,8,["restaurant","onClose","onSave"])):(0,n.Q3)("",!0),l.isReviewsModalVisible?((0,n.uX)(),(0,n.Wv)(c,{key:1,restaurant:l.restaurantForReviews,onClose:l.closeReviewsModal},null,8,["restaurant","onClose"])):(0,n.Q3)("",!0),(0,n.Lk)("div",Pe,[(0,n.bo)((0,n.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>l.searchQuery=e),placeholder:"Search by name, address, city, state, or zip...",class:"search-input"},null,512),[[s.Jo,l.searchQuery]])]),(0,n.Lk)("div",Fe,[(0,n.Lk)("button",{onClick:t[1]||(t[1]=e=>l.showAddForm=!l.showAddForm),class:"btn-toggle-add"},(0,o.v_)(l.showAddForm?"Cancel":"Add New Restaurant"),1),l.showAddForm?((0,n.uX)(),(0,n.CE)("form",{key:0,onSubmit:t[8]||(t[8]=(0,s.D$)((...e)=>l.addNewRestaurant&&l.addNewRestaurant(...e),["prevent"])),class:"add-restaurant-form"},[t[15]||(t[15]=(0,n.Lk)("h3",null,"Add a New Restaurant",-1)),(0,n.Lk)("div",Xe,[t[9]||(t[9]=(0,n.Lk)("label",{for:"new-name"},"Name",-1)),(0,n.bo)((0,n.Lk)("input",{id:"new-name",type:"text","onUpdate:modelValue":t[2]||(t[2]=e=>l.newRestaurant.name=e),required:""},null,512),[[s.Jo,l.newRestaurant.name]])]),(0,n.Lk)("div",_e,[t[10]||(t[10]=(0,n.Lk)("label",{for:"new-address"},"Address",-1)),(0,n.bo)((0,n.Lk)("input",{id:"new-address",type:"text","onUpdate:modelValue":t[3]||(t[3]=e=>l.newRestaurant.address=e),required:""},null,512),[[s.Jo,l.newRestaurant.address]])]),(0,n.Lk)("div",Ae,[(0,n.Lk)("div",Ke,[t[11]||(t[11]=(0,n.Lk)("label",{for:"new-city"},"City",-1)),(0,n.bo)((0,n.Lk)("input",{id:"new-city",type:"text","onUpdate:modelValue":t[4]||(t[4]=e=>l.newRestaurant.city=e)},null,512),[[s.Jo,l.newRestaurant.city]])]),(0,n.Lk)("div",Be,[t[12]||(t[12]=(0,n.Lk)("label",{for:"new-state"},"State",-1)),(0,n.bo)((0,n.Lk)("input",{id:"new-state",type:"text","onUpdate:modelValue":t[5]||(t[5]=e=>l.newRestaurant.state=e)},null,512),[[s.Jo,l.newRestaurant.state]])]),(0,n.Lk)("div",Ve,[t[13]||(t[13]=(0,n.Lk)("label",{for:"new-zip"},"Zip",-1)),(0,n.bo)((0,n.Lk)("input",{id:"new-zip",type:"text","onUpdate:modelValue":t[6]||(t[6]=e=>l.newRestaurant.zip=e)},null,512),[[s.Jo,l.newRestaurant.zip]])])]),(0,n.Lk)("div",He,[t[14]||(t[14]=(0,n.Lk)("label",{for:"new-url"},"Website URL",-1)),(0,n.bo)((0,n.Lk)("input",{id:"new-url",type:"url","onUpdate:modelValue":t[7]||(t[7]=e=>l.newRestaurant.url=e),placeholder:"https://example.com"},null,512),[[s.Jo,l.newRestaurant.url]])]),l.addError?((0,n.uX)(),(0,n.CE)("p",Ge,(0,o.v_)(l.addError),1)):(0,n.Q3)("",!0),(0,n.Lk)("button",{type:"submit",disabled:l.isSaving,class:"btn-save"},(0,o.v_)(l.isSaving?"Saving...":"Save Restaurant"),9,Te)],32)):(0,n.Q3)("",!0)]),l.loading?((0,n.uX)(),(0,n.CE)("div",De,"Loading restaurants...")):((0,n.uX)(),(0,n.CE)("div",Je,[l.filteredRestaurants.length>0?((0,n.uX)(),(0,n.CE)("ul",We,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.filteredRestaurants,a=>((0,n.uX)(),(0,n.CE)("li",{key:a.id,class:"restaurant-item"},[(0,n.Lk)("div",Qe,[(0,n.Lk)("span",$e,(0,o.v_)(a.name),1),(0,n.Lk)("div",Oe,[a.averageRating>0?((0,n.uX)(),(0,n.CE)("div",{key:0,class:"rating",title:`${a.averageRating.toFixed(2)} average rating`},[(0,n.bF)(u,{rating:a.averageRating},null,8,["rating"]),(0,n.Lk)("span",qe,(0,o.v_)(a.averageRating.toFixed(1)),1),(0,n.Lk)("span",Ze,"("+(0,o.v_)(a.ratingCount)+")",1)],8,je)):(0,n.Q3)("",!0),null!==a.distance?((0,n.uX)(),(0,n.CE)("span",Ye,(0,o.v_)(a.distance.toFixed(1))+" miles away ",1)):(0,n.Q3)("",!0)]),(0,n.Lk)("span",et,[(0,n.eW)((0,o.v_)(a.address),1),a.city?((0,n.uX)(),(0,n.CE)(n.FK,{key:0},[(0,n.eW)(", "+(0,o.v_)(a.city),1)],64)):(0,n.Q3)("",!0),a.state?((0,n.uX)(),(0,n.CE)(n.FK,{key:1},[(0,n.eW)(", "+(0,o.v_)(a.state),1)],64)):(0,n.Q3)("",!0),a.zip?((0,n.uX)(),(0,n.CE)(n.FK,{key:2},[(0,n.eW)((0,o.v_)(a.zip),1)],64)):(0,n.Q3)("",!0)])]),(0,n.Lk)("div",tt,[(0,n.Lk)("button",{onClick:e=>l.toggleBucketList(a),class:(0,o.C4)(["action-btn",{"in-bucket-list":l.isInBucketList(a.id)}]),title:l.isInBucketList(a.id)?"Remove from Bucket List":"Add to Bucket List"},t[16]||(t[16]=[(0,n.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor"},[(0,n.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,n.Lk)("path",{d:"M18 7h-2.06c-.33-3.2-2.46-5.8-5.94-5.8S4.39 3.8 4.06 7H2v12h16V7zM6.14 7c.2-1.92 1.6-3.48 3.86-3.8A4.002 4.002 0 0 1 14 7h-2.14c-.2-1.92-1.6-3.48-3.86-3.8zM16 17H4v-8h12v8z"})],-1)]),10,at),(0,n.Lk)("button",{onClick:e=>l.openReviewsModal(a),class:"action-btn",title:"View Reviews"},t[17]||(t[17]=[(0,n.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor"},[(0,n.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,n.Lk)("path",{d:"M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H6l-2 2V4h16v12z"})],-1)]),8,st),(0,n.Lk)("button",{onClick:e=>l.openEditModal(a),class:"action-btn",title:"Edit Restaurant"},t[18]||(t[18]=[(0,n.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor"},[(0,n.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,n.Lk)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"})],-1)]),8,nt),(0,n.Lk)("a",{href:l.getDirectionsUrl(a),target:"_blank",rel:"noopener noreferrer",class:"action-btn",title:"Get Directions"},t[19]||(t[19]=[(0,n.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor"},[(0,n.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,n.Lk)("path",{d:"M22.43 10.59l-9.01-9.01c-.75-.75-2.07-.76-2.83 0l-9.01 9.01c-.76.75-.76 2.07 0 2.83l9.01 9.01c.75.75 2.07.75 2.83 0l9.01-9.01c.75-.76.75-2.08 0-2.83zM12 16c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4z"})],-1)]),8,ot),(0,n.Lk)("a",{href:l.getDetailsUrl(a),target:"_blank",rel:"noopener noreferrer",class:"action-btn",title:"View Details on Google"},t[20]||(t[20]=[(0,n.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor"},[(0,n.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,n.Lk)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 5 1.41-1.41L15.5 14zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"})],-1)]),8,lt),a.url?((0,n.uX)(),(0,n.CE)("a",{key:0,href:l.getValidUrl(a.url),target:"_blank",rel:"noopener noreferrer",class:"action-btn",title:"Visit Website"},t[21]||(t[21]=[(0,n.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor"},[(0,n.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,n.Lk)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"})],-1)]),8,it)):(0,n.Q3)("",!0),(0,n.Lk)("button",{class:"check-in-btn",onClick:t=>e.$emit("review-at",a.id)},"Review",8,rt)])]))),128))])):((0,n.uX)(),(0,n.CE)("p",dt,"No restaurants found matching your search."))]))])}const ut={class:"modal-content"},vt={class:"form-group"},pt={class:"form-group"},gt={class:"form-group"},ht={class:"form-group"},mt={class:"form-group"},wt={class:"form-group"},kt={class:"modal-actions"};function Lt(e,t,a,o,l,i){return(0,n.uX)(),(0,n.CE)("div",{class:"modal-overlay",onClick:t[8]||(t[8]=(0,s.D$)(t=>e.$emit("close"),["self"]))},[(0,n.Lk)("div",ut,[t[16]||(t[16]=(0,n.Lk)("h2",null,"Edit Restaurant",-1)),o.editableRestaurant?((0,n.uX)(),(0,n.CE)("form",{key:0,onSubmit:t[7]||(t[7]=(0,s.D$)((...e)=>o.onSave&&o.onSave(...e),["prevent"]))},[(0,n.Lk)("div",vt,[t[9]||(t[9]=(0,n.Lk)("label",{for:"name"},"Name",-1)),(0,n.bo)((0,n.Lk)("input",{id:"name","onUpdate:modelValue":t[0]||(t[0]=e=>o.editableRestaurant.name=e),type:"text",required:""},null,512),[[s.Jo,o.editableRestaurant.name]])]),(0,n.Lk)("div",pt,[t[10]||(t[10]=(0,n.Lk)("label",{for:"address"},"Address",-1)),(0,n.bo)((0,n.Lk)("input",{id:"address","onUpdate:modelValue":t[1]||(t[1]=e=>o.editableRestaurant.address=e),type:"text"},null,512),[[s.Jo,o.editableRestaurant.address]])]),(0,n.Lk)("div",gt,[t[11]||(t[11]=(0,n.Lk)("label",{for:"city"},"City",-1)),(0,n.bo)((0,n.Lk)("input",{id:"city","onUpdate:modelValue":t[2]||(t[2]=e=>o.editableRestaurant.city=e),type:"text"},null,512),[[s.Jo,o.editableRestaurant.city]])]),(0,n.Lk)("div",ht,[t[12]||(t[12]=(0,n.Lk)("label",{for:"state"},"State",-1)),(0,n.bo)((0,n.Lk)("input",{id:"state","onUpdate:modelValue":t[3]||(t[3]=e=>o.editableRestaurant.state=e),type:"text"},null,512),[[s.Jo,o.editableRestaurant.state]])]),(0,n.Lk)("div",mt,[t[13]||(t[13]=(0,n.Lk)("label",{for:"zip"},"Zip Code",-1)),(0,n.bo)((0,n.Lk)("input",{id:"zip","onUpdate:modelValue":t[4]||(t[4]=e=>o.editableRestaurant.zip=e),type:"text"},null,512),[[s.Jo,o.editableRestaurant.zip]])]),(0,n.Lk)("div",wt,[t[14]||(t[14]=(0,n.Lk)("label",{for:"url"},"Website URL",-1)),(0,n.bo)((0,n.Lk)("input",{id:"url","onUpdate:modelValue":t[5]||(t[5]=e=>o.editableRestaurant.url=e),type:"url",placeholder:"https://example.com"},null,512),[[s.Jo,o.editableRestaurant.url]])]),(0,n.Lk)("div",kt,[(0,n.Lk)("button",{type:"button",class:"btn-cancel",onClick:t[6]||(t[6]=t=>e.$emit("close"))},"Cancel"),t[15]||(t[15]=(0,n.Lk)("button",{type:"submit",class:"btn-save"},"Save Changes",-1))])],32)):(0,n.Q3)("",!0)])])}const yt={name:"EditRestaurantModal",props:{restaurant:{type:Object,required:!0}},emits:["close","save"],setup(e,{emit:t}){const a=(0,J.KR)(null);(0,n.wB)(()=>e.restaurant,e=>{e&&(a.value=JSON.parse(JSON.stringify(e)))},{immediate:!0,deep:!0});const s=()=>{t("save",a.value)};return{editableRestaurant:a,onSave:s}}},Rt=(0,Le.A)(yt,[["render",Lt],["__scopeId","data-v-2288406c"]]),ft=Rt,Ct={class:"modal-content"},bt={class:"modal-header"},Mt={class:"modal-body"},Et={key:0,class:"loading-indicator"},It={key:1,class:"no-reviews-message"},Ut={key:2,class:"reviews-list"},zt={class:"review-header"},St=["src"],xt={class:"user-info"},Nt={class:"user-name"},Pt={class:"review-date"},Ft={class:"review-body"},Xt={key:0,class:"review-text"},_t={key:1,class:"review-photo-container"},At=["src"],Kt={key:2,class:"tags-container"};function Bt(e,t,a,l,i,r){const d=(0,n.g2)("StarRating");return(0,n.uX)(),(0,n.CE)("div",{class:"modal-overlay",onClick:t[1]||(t[1]=(0,s.D$)(t=>e.$emit("close"),["self"]))},[(0,n.Lk)("div",Ct,[(0,n.Lk)("div",bt,[(0,n.Lk)("h2",null,"Reviews for "+(0,o.v_)(a.restaurant.name),1),(0,n.Lk)("button",{onClick:t[0]||(t[0]=t=>e.$emit("close")),class:"close-btn"},"Ã—")]),(0,n.Lk)("div",Mt,[l.loading?((0,n.uX)(),(0,n.CE)("div",Et,"Loading reviews...")):0===l.reviews.length?((0,n.uX)(),(0,n.CE)("div",It," No reviews yet for this restaurant. ")):((0,n.uX)(),(0,n.CE)("ul",Ut,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.reviews,e=>((0,n.uX)(),(0,n.CE)("li",{key:e.id,class:"review-item"},[(0,n.Lk)("div",zt,[(0,n.Lk)("img",{src:e.userPhoto||"https://cdn-icons-png.flaticon.com/512/149/149071.png",alt:"User",class:"user-avatar"},null,8,St),(0,n.Lk)("div",xt,[(0,n.Lk)("span",Nt,(0,o.v_)(e.userName),1),(0,n.Lk)("span",Pt,(0,o.v_)(l.formatDate(e.createdAt)),1)])]),(0,n.Lk)("div",Ft,[(0,n.bF)(d,{rating:e.rating},null,8,["rating"]),e.text?((0,n.uX)(),(0,n.CE)("p",Xt,'"'+(0,o.v_)(e.text)+'"',1)):(0,n.Q3)("",!0),e.photoURL?((0,n.uX)(),(0,n.CE)("div",_t,[(0,n.Lk)("img",{src:e.photoURL,alt:"Review photo",class:"review-photo"},null,8,At)])):(0,n.Q3)("",!0),e.tags&&e.tags.length>0?((0,n.uX)(),(0,n.CE)("div",Kt,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.tags,e=>((0,n.uX)(),(0,n.CE)("span",{key:e,class:"tag"},(0,o.v_)(e),1))),128))])):(0,n.Q3)("",!0)])]))),128))]))])])])}const Vt={name:"RestaurantReviewsModal",components:{StarRating:Ie},props:{restaurant:{type:Object,required:!0}},emits:["close"],setup(e){const t=(0,J.KR)([]),a=(0,J.KR)(!0),s=async()=>{if(e.restaurant?.id){console.log(`Fetching reviews for restaurant ID: ${e.restaurant.id}`),a.value=!0,t.value=[];try{const s=(0,$.P)((0,$.rJ)(ee,"reviews"),(0,$._M)("restaurantId","==",e.restaurant.id),(0,$.My)("createdAt","desc")),n=await(0,$.GG)(s);console.log(`Found ${n.size} reviews for restaurant ${e.restaurant.id}.`);const o=n.docs.map(e=>({id:e.id,...e.data()}));if(0===o.length)return t.value=[],void(a.value=!1);const l=[...new Set(o.map(e=>e.userId))],i=new Map,r=[];for(let e=0;e<l.length;e+=30){const t=l.slice(e,e+30);if(t.length>0){const e=(0,$.P)((0,$.rJ)(ee,"users"),(0,$._M)("uid","in",t));r.push((0,$.GG)(e))}}const d=await Promise.all(r);d.forEach(e=>{e.forEach(e=>{const t=e.data();i.set(t.uid,t)})}),t.value=o.map(e=>{const t=i.get(e.userId);return{...e,userName:t?.displayName||"Unknown User",userPhoto:t?.photoURL||null}})}catch(s){console.error("Error fetching reviews for restaurant:",s),console.error("Error fetching reviews:",s)}finally{a.value=!1}}};(0,n.wB)(()=>e.restaurant,e=>{e&&s()},{immediate:!0});const o=e=>e&&e.toDate?e.toDate().toLocaleDateString():"";return{reviews:t,loading:a,formatDate:o}}},Ht=(0,Le.A)(Vt,[["render",Bt],["__scopeId","data-v-9fcc604c"]]),Gt=Ht,Tt={name:"Restaurants",components:{EditRestaurantModal:ft,StarRating:Ie,RestaurantReviewsModal:Gt},emits:["review-at"],setup(){const e=(0,J.KR)([]),t=(0,J.KR)(!0),s=(0,J.KR)(""),o=(0,J.KR)(!1),l=(0,J.KR)(!1),i=(0,J.KR)(null),r=(0,J.KR)(null),d=(0,J.KR)(null),c=(0,J.KR)(new Set),u=(0,J.KR)(!1),v=(0,J.KR)({name:"",address:"",city:"",state:"",zip:"",url:""}),p=(0,J.KR)(""),g=(0,J.KR)(!1);let h=()=>{};const m=async()=>{t.value=!0;try{const[t,a]=await Promise.all([(0,$.GG)((0,$.rJ)(ee,"restaurants")),(0,$.GG)((0,$.rJ)(ee,"reviews"))]),s={};a.forEach(e=>{const t=e.data();t.restaurantId&&"number"===typeof t.rating&&(s[t.restaurantId]||(s[t.restaurantId]={total:0,count:0}),s[t.restaurantId].total+=t.rating,s[t.restaurantId].count++)}),e.value=t.docs.map(e=>{const t={id:e.id,...e.data()},a=s[t.id];return{...t,averageRating:a?a.total/a.count:0,ratingCount:a?a.count:0}})}catch(a){console.error("Error fetching restaurants and ratings:",a)}finally{t.value=!1}};(0,n.sV)(()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(e=>{d.value={lat:e.coords.latitude,lng:e.coords.longitude},m(),w()},e=>{console.error("Error getting location",e),m(),w()}):(console.error("Geolocation is not supported by this browser."),m(),w())}),(0,n.hi)(()=>{h()});const w=()=>{const e=Z.currentUser;if(!e)return;const t=(0,$.P)((0,$.rJ)(ee,"bucketListItems"),(0,$._M)("userId","==",e.uid));h=(0,$.aQ)(t,e=>{const t=new Set;e.forEach(e=>t.add(e.data().restaurantId)),c.value=t})},k=(0,n.EW)(()=>e.value.map(e=>{const t=d.value&&e.location?Ue(d.value.lat,d.value.lng,e.location.lat,e.location.lng):null;return{...e,distance:t}}).sort((e,t)=>null===e.distance?1:null===t.distance?-1:e.distance-t.distance)),L=(0,n.EW)(()=>{if(!s.value.trim())return k.value;const e=s.value.toLowerCase();return k.value.filter(t=>t.name&&t.name.toLowerCase().includes(e)||t.address&&t.address.toLowerCase().includes(e)||t.city&&t.city.toLowerCase().includes(e)||t.state&&t.state.toLowerCase().includes(e)||t.zip&&t.zip.toLowerCase().includes(e))}),y=e=>{const t=encodeURIComponent(`${e.name}, ${e.address}`);return`https://www.google.com/maps/dir/?api=1&destination=${t}`},R=e=>{const t=encodeURIComponent(`${e.name}, ${e.address}`);return`https://www.google.com/search?q=${t}`},f=e=>e?e.startsWith("http://")||e.startsWith("https://")?e:`https://${e}`:"#",C=e=>{i.value=e,o.value=!0},b=()=>{o.value=!1,i.value=null},M=e=>{r.value=e,l.value=!0},E=()=>{l.value=!1,r.value=null},I=async t=>{const s={...t};if(!s||!s.id)return;const n=i.value,o={},l=n.name!==s.name;l&&(o.name=s.name,o.name_lowercase=s.name.trim().toLowerCase());const r=["address","city","state","zip"],c=r.some(e=>n[e]!==s[e]);if(c){o.address=s.address,o.city=s.city,o.state=s.state,o.zip=s.zip,o.address_lowercase=(s.address||"").trim().toLowerCase();const e=[s.address,s.city,s.state,s.zip].filter(Boolean).join(", "),{geocodeAddress:t}=await Promise.resolve().then(a.bind(a,914)),n=await t(e);n?o.location=n:(alert("Could not find a location for the provided address. Please check the address and try again. The restaurant will be saved without a location."),o.location=null)}if(n.url!==s.url&&(o.url=s.url),0===Object.keys(o).length)return void b();const u=(0,$.H9)(ee,"restaurants",s.id);try{await(0,$.mZ)(u,o);const t=e.value.findIndex(e=>e.id===s.id);if(-1!==t){const a={...e.value[t],...o};void 0!==o.location&&(a.distance=d.value&&a.location?Ue(d.value.lat,d.value.lng,a.location.lat,a.location.lng):null),e.value.splice(t,1,a)}b()}catch(v){console.error("Error updating restaurant: ",v),alert("Failed to save changes. Please try again.")}},U=async()=>{if(!v.value.name.trim()||!v.value.address.trim())return void(p.value="Restaurant name and address are required.");g.value=!0,p.value="";const t=v.value.name.trim().toLowerCase(),s=v.value.address.trim().toLowerCase();try{const n=(0,$.P)((0,$.rJ)(ee,"restaurants"),(0,$._M)("name_lowercase","==",t),(0,$._M)("address_lowercase","==",s)),o=await(0,$.GG)(n);if(!o.empty)return p.value="This restaurant already exists.",void(g.value=!1);const l=[v.value.address,v.value.city,v.value.state,v.value.zip].filter(Boolean).join(", "),{geocodeAddress:i}=await Promise.resolve().then(a.bind(a,914)),r=await i(l);if(!r)return p.value="Could not find a location for the provided address. Please check the address and try again.",void(g.value=!1);const c={name:v.value.name.trim(),address:v.value.address.trim(),city:v.value.city.trim(),state:v.value.state.trim(),zip:v.value.zip.trim(),url:v.value.url.trim(),name_lowercase:t,address_lowercase:s,location:r,createdAt:(0,$.O5)()},h=await(0,$.gS)((0,$.rJ)(ee,"restaurants"),c),m={id:h.id,...c,averageRating:0,ratingCount:0,distance:d.value?Ue(d.value.lat,d.value.lng,r.lat,r.lng):null};e.value.push(m),u.value=!1,v.value={name:"",address:"",city:"",state:"",zip:"",url:""}}catch(n){console.error("Error adding new restaurant:",n),p.value="Failed to add restaurant. Please try again."}finally{g.value=!1}},z=e=>c.value.has(e),S=async e=>{const t=Z.currentUser;if(t)if(z(e.id)){const a=(0,$.P)((0,$.rJ)(ee,"bucketListItems"),(0,$._M)("userId","==",t.uid),(0,$._M)("restaurantId","==",e.id)),s=await(0,$.GG)(a);s.forEach(e=>(0,$.kd)(e.ref))}else await(0,$.gS)((0,$.rJ)(ee,"bucketListItems"),{userId:t.uid,restaurantId:e.id,createdAt:(0,$.O5)()})};return{restaurants:e,loading:t,searchQuery:s,filteredRestaurants:L,getDirectionsUrl:y,getDetailsUrl:R,getValidUrl:f,isEditModalVisible:o,restaurantToEdit:i,isReviewsModalVisible:l,restaurantForReviews:r,openEditModal:C,closeEditModal:b,saveRestaurantChanges:I,openReviewsModal:M,closeReviewsModal:E,isInBucketList:z,toggleBucketList:S,showAddForm:u,newRestaurant:v,addNewRestaurant:U,addError:p,isSaving:g}}},Dt=(0,Le.A)(Tt,[["render",ct],["__scopeId","data-v-69303f97"]]),Jt=Dt,Wt={class:"user-search-page"},Qt={class:"search-box"},$t={key:0},Ot={key:1},jt={key:0,class:"no-users-message"},qt={key:0},Zt={key:1},Yt={class:"user-card-content"},ea={class:"user-info"},ta=["src"],aa={class:"user-details"},sa={class:"user-name"},na={key:0,class:"user-distance"},oa={key:0,class:"last-review"},la={class:"review-header"},ia={class:"review-body"},ra={key:0,class:"review-text"},da={key:1,class:"last-review no-review"},ca={class:"user-actions"},ua=["onClick"],va=["onClick"];function pa(e,t,a,l,i,r){const d=(0,n.g2)("UserReviewsModal"),c=(0,n.g2)("StarRating");return(0,n.uX)(),(0,n.CE)(n.FK,null,[l.isReviewsModalVisible?((0,n.uX)(),(0,n.Wv)(d,{key:0,user:l.userForReviews,onClose:l.closeReviewsModal},null,8,["user","onClose"])):(0,n.Q3)("",!0),(0,n.Lk)("div",Wt,[(0,n.Lk)("div",Qt,[(0,n.bo)((0,n.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>l.searchQuery=e),placeholder:"Search for users by name...",class:"search-input"},null,512),[[s.Jo,l.searchQuery]])]),l.loading?((0,n.uX)(),(0,n.CE)("div",$t,"Loading users...")):((0,n.uX)(),(0,n.CE)("div",Ot,[0===l.filteredUsers.length?((0,n.uX)(),(0,n.CE)("div",jt,[l.searchQuery?((0,n.uX)(),(0,n.CE)("span",qt,"No users found matching your search.")):((0,n.uX)(),(0,n.CE)("span",Zt,"No other users found."))])):(0,n.Q3)("",!0),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.filteredUsers,e=>((0,n.uX)(),(0,n.CE)("div",{key:e.uid,class:"user-card"},[(0,n.Lk)("div",Yt,[(0,n.Lk)("div",ea,[(0,n.Lk)("img",{src:e.photoURL||"https://cdn-icons-png.flaticon.com/512/149/149071.png",class:"user-avatar",alt:"User"},null,8,ta),(0,n.Lk)("div",aa,[(0,n.Lk)("span",sa,(0,o.v_)(e.displayName),1),null!==e.distance?((0,n.uX)(),(0,n.CE)("div",na,(0,o.v_)(e.distance.toFixed(1))+" miles away",1)):(0,n.Q3)("",!0)])]),e.lastReview?((0,n.uX)(),(0,n.CE)("div",oa,[(0,n.Lk)("div",la,[t[1]||(t[1]=(0,n.eW)(" Latest review: ",-1)),(0,n.Lk)("strong",null,(0,o.v_)(e.lastReview.restaurantName),1)]),(0,n.Lk)("div",ia,[(0,n.bF)(c,{rating:e.lastReview.rating},null,8,["rating"]),e.lastReview.text?((0,n.uX)(),(0,n.CE)("p",ra,'"'+(0,o.v_)(e.lastReview.text)+'"',1)):(0,n.Q3)("",!0)])])):((0,n.uX)(),(0,n.CE)("div",da," No reviews yet. "))]),(0,n.Lk)("div",ca,[(0,n.Lk)("button",{onClick:t=>l.openReviewsModal(e),class:"action-btn",title:"View Reviews"},t[2]||(t[2]=[(0,n.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor"},[(0,n.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,n.Lk)("path",{d:"M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H6l-2 2V4h16v12z"})],-1)]),8,ua),(0,n.Lk)("button",{onClick:t=>l.toggleFollow(e),class:(0,o.C4)(["follow-btn",{"unfollow-btn":e.isFollowing}])},(0,o.v_)(e.isFollowing?"Unfollow":"Follow"),11,va)])]))),128))]))])],64)}const ga={class:"modal-content"},ha={class:"modal-header"},ma={class:"modal-body"},wa={key:0,class:"loading-indicator"},ka={key:1,class:"no-reviews-message"},La={key:2,class:"reviews-list"},ya={class:"review-header"},Ra={class:"restaurant-name"},fa={class:"review-date"},Ca={class:"review-body"},ba={key:0,class:"review-text"},Ma=["src"],Ea={key:2,class:"tags-container"};function Ia(e,t,a,l,i,r){const d=(0,n.g2)("StarRating");return(0,n.uX)(),(0,n.CE)("div",{class:"modal-overlay",onClick:t[1]||(t[1]=(0,s.D$)(t=>e.$emit("close"),["self"]))},[(0,n.Lk)("div",ga,[(0,n.Lk)("div",ha,[(0,n.Lk)("h2",null,"Reviews by "+(0,o.v_)(a.user.displayName),1),(0,n.Lk)("button",{onClick:t[0]||(t[0]=t=>e.$emit("close")),class:"close-btn"},"Ã—")]),(0,n.Lk)("div",ma,[l.loading?((0,n.uX)(),(0,n.CE)("div",wa,"Loading reviews...")):0===l.reviews.length?((0,n.uX)(),(0,n.CE)("p",ka," This user hasn't posted any reviews yet. ")):((0,n.uX)(),(0,n.CE)("ul",La,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.reviews,e=>((0,n.uX)(),(0,n.CE)("li",{key:e.id,class:"review-item"},[(0,n.Lk)("div",ya,[(0,n.Lk)("span",Ra,(0,o.v_)(e.restaurantName),1),(0,n.Lk)("span",fa,(0,o.v_)(l.formatDate(e.createdAt)),1)]),(0,n.Lk)("div",Ca,[(0,n.bF)(d,{rating:e.rating},null,8,["rating"]),e.text?((0,n.uX)(),(0,n.CE)("p",ba,'"'+(0,o.v_)(e.text)+'"',1)):(0,n.Q3)("",!0),e.photoURL?((0,n.uX)(),(0,n.CE)("img",{key:1,src:e.photoURL,alt:"Review photo",class:"review-photo"},null,8,Ma)):(0,n.Q3)("",!0),e.tags&&e.tags.length>0?((0,n.uX)(),(0,n.CE)("div",Ea,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.tags,e=>((0,n.uX)(),(0,n.CE)("span",{key:e,class:"tag"},(0,o.v_)(e),1))),128))])):(0,n.Q3)("",!0)])]))),128))]))])])])}const Ua={name:"UserReviewsModal",components:{StarRating:Ie},props:{user:{type:Object,required:!0}},emits:["close"],setup(e){const t=(0,J.KR)([]),a=(0,J.KR)(!0),s=async()=>{if(!e.user?.uid)return t.value=[],void(a.value=!1);a.value=!0,t.value=[];try{const a=await(0,$.GG)((0,$.rJ)(ee,"restaurants")),s=new Map;a.forEach(e=>{s.set(e.id,e.data().name)});const n=(0,$.P)((0,$.rJ)(ee,"reviews"),(0,$._M)("userId","==",e.user.uid),(0,$.My)("createdAt","desc")),o=await(0,$.GG)(n);t.value=o.docs.map(e=>{const t=e.data();return{id:e.id,...t,restaurantName:s.get(t.restaurantId)||"Unknown Restaurant"}})}catch(s){console.error("Error fetching user reviews:",s)}finally{a.value=!1}};(0,n.wB)(()=>e.user,e=>{e&&s()},{immediate:!0});const o=e=>e&&e.toDate?e.toDate().toLocaleDateString():"";return{reviews:t,loading:a,formatDate:o}}},za=(0,Le.A)(Ua,[["render",Ia],["__scopeId","data-v-4e60c4e2"]]),Sa=za,xa={name:"UserSearch",components:{StarRating:Ie,UserReviewsModal:Sa},setup(){const e=(0,J.KR)([]),t=(0,J.KR)(!0),a=(0,J.KR)(null),s=(0,J.KR)([]),o=(0,J.KR)(""),l=(0,J.KR)(!1),i=(0,J.KR)(null);let r=()=>{};const d=async()=>{t.value=!0;const n=Z.currentUser;if(!n)return;const o=(0,$.P)((0,$.rJ)(ee,"follows"),(0,$._M)("followerId","==",n.uid));r=(0,$.aQ)(o,t=>{const a=t.docs.map(e=>e.data().followingId);s.value=a,e.value=e.value.map(e=>({...e,isFollowing:a.includes(e.uid)}))});const l=await(0,$.GG)((0,$.rJ)(ee,"restaurants")),i=new Map;l.forEach(e=>{i.set(e.id,e.data())});const d=(0,$.P)((0,$.rJ)(ee,"users"),(0,$._M)("uid","!=",n.uid)),c=await(0,$.GG)(d),u=c.docs.map(e=>({uid:e.id,...e.data()})),v=await Promise.all(u.map(async e=>{const t=(0,$.P)((0,$.rJ)(ee,"reviews"),(0,$._M)("userId","==",e.uid),(0,$.My)("createdAt","desc"),(0,$.AB)(1)),n=await(0,$.GG)(t);let o=null,l=null;if(!n.empty){const e=n.docs[0].data(),t=i.get(e.restaurantId);o={...e,restaurantName:t?.name||"Unknown Restaurant"},a.value&&t?.location&&(l=Ue(a.value.lat,a.value.lng,t.location.lat,t.location.lng))}return{...e,isFollowing:s.value.includes(e.uid),lastReview:o,distance:l}}));e.value=v,t.value=!1};(0,n.sV)(()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(e=>{a.value={lat:e.coords.latitude,lng:e.coords.longitude},d()},e=>{console.error("Error getting location",e),d()}):(console.error("Geolocation is not supported by this browser."),d())}),(0,n.hi)(()=>{r()});const c=(0,n.EW)(()=>{const t=[...e.value].sort((e,t)=>null===e.distance&&null!==t.distance?1:null!==e.distance&&null===t.distance?-1:null===e.distance&&null===t.distance?0:e.distance-t.distance);if(!o.value.trim())return t;const a=o.value.toLowerCase();return t.filter(e=>e.displayName.toLowerCase().includes(a))}),u=async e=>{const t=Z.currentUser;if(!t)return;const a=(0,$.rJ)(ee,"follows");if(e.isFollowing){const s=(0,$.P)(a,(0,$._M)("followerId","==",t.uid),(0,$._M)("followingId","==",e.uid)),n=await(0,$.GG)(s);if(!n.empty){const e=n.docs[0].id;await(0,$.kd)((0,$.H9)(ee,"follows",e))}}else await(0,$.gS)(a,{followerId:t.uid,followingId:e.uid})},v=e=>{i.value=e,l.value=!0},p=()=>{l.value=!1,i.value=null};return{filteredUsers:c,loading:t,toggleFollow:u,searchQuery:o,isReviewsModalVisible:l,userForReviews:i,openReviewsModal:v,closeReviewsModal:p}}},Na=(0,Le.A)(xa,[["render",pa],["__scopeId","data-v-e58e01e0"]]),Pa=Na,Fa={class:"review-page"},Xa={class:"review-card"},_a={class:"form-group"},Aa=["disabled"],Ka=["value"],Ba={key:0,class:"add-restaurant-prompt"},Va={key:0,class:"add-restaurant-form"},Ha={class:"form-group"},Ga={class:"form-group"},Ta={class:"form-group"},Da={class:"form-group"},Ja={class:"form-group"},Wa={class:"form-group"},Qa=["disabled"],$a={key:0,class:"error-message"},Oa={class:"form-group"},ja={key:0,class:"photo-actions"},qa={key:1,class:"photo-preview"},Za=["src"],Ya={key:1,class:"camera-modal"},es={ref:"videoPlayer",class:"camera-video",autoplay:"",playsinline:""},ts={class:"form-group"},as={class:"star-rating-input"},ss=["onMouseover","onClick","title"],ns={height:"28px",width:"28px",viewBox:"0 0 24 24",fill:"currentColor"},os=["d"],ls={class:"form-group"},is={class:"tags-container"},rs=["onClick"],ds={class:"form-group"},cs={class:"new-tag-input"},us=["disabled"],vs={class:"form-group"},ps=["disabled"],gs={key:2,class:"error-message"};function hs(e,t,a,l,i,r){return(0,n.uX)(),(0,n.CE)("div",Fa,[(0,n.Lk)("div",Xa,[(0,n.Lk)("form",{onSubmit:t[20]||(t[20]=(0,s.D$)((...e)=>l.submitReview&&l.submitReview(...e),["prevent"]))},[(0,n.Lk)("div",_a,[t[23]||(t[23]=(0,n.Lk)("label",{for:"restaurant"},"Restaurant",-1)),(0,n.bo)((0,n.Lk)("select",{id:"restaurant","onUpdate:modelValue":t[0]||(t[0]=e=>l.selectedRestaurant=e),disabled:!!a.selectedRestaurantId,required:""},[t[21]||(t[21]=(0,n.Lk)("option",{disabled:"",value:""},"Please select a restaurant",-1)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.restaurants,e=>((0,n.uX)(),(0,n.CE)("option",{key:e.id,value:e.id},(0,o.v_)(e.name),9,Ka))),128))],8,Aa),[[s.u1,l.selectedRestaurant]]),a.selectedRestaurantId?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("div",Ba,[t[22]||(t[22]=(0,n.eW)(" Can't find the restaurant? ",-1)),(0,n.Lk)("button",{type:"button",class:"link-button",onClick:t[1]||(t[1]=e=>l.showAddRestaurantForm=!l.showAddRestaurantForm)},(0,o.v_)(l.showAddRestaurantForm?"Cancel":"Add a new one"),1)]))]),l.showAddRestaurantForm?((0,n.uX)(),(0,n.CE)("div",Va,[t[30]||(t[30]=(0,n.Lk)("h3",{class:"add-restaurant-header"},"Add New Restaurant",-1)),(0,n.Lk)("div",Ha,[t[24]||(t[24]=(0,n.Lk)("label",{for:"new-rest-name"},"Name",-1)),(0,n.bo)((0,n.Lk)("input",{id:"new-rest-name","onUpdate:modelValue":t[2]||(t[2]=e=>l.newRestaurant.name=e),type:"text",required:""},null,512),[[s.Jo,l.newRestaurant.name]])]),(0,n.Lk)("div",Ga,[t[25]||(t[25]=(0,n.Lk)("label",{for:"new-rest-address"},"Address",-1)),(0,n.bo)((0,n.Lk)("input",{id:"new-rest-address","onUpdate:modelValue":t[3]||(t[3]=e=>l.newRestaurant.address=e),type:"text",required:""},null,512),[[s.Jo,l.newRestaurant.address]])]),(0,n.Lk)("div",Ta,[t[26]||(t[26]=(0,n.Lk)("label",{for:"new-rest-city"},"City",-1)),(0,n.bo)((0,n.Lk)("input",{id:"new-rest-city","onUpdate:modelValue":t[4]||(t[4]=e=>l.newRestaurant.city=e),type:"text"},null,512),[[s.Jo,l.newRestaurant.city]])]),(0,n.Lk)("div",Da,[t[27]||(t[27]=(0,n.Lk)("label",{for:"new-rest-state"},"State",-1)),(0,n.bo)((0,n.Lk)("input",{id:"new-rest-state","onUpdate:modelValue":t[5]||(t[5]=e=>l.newRestaurant.state=e),type:"text"},null,512),[[s.Jo,l.newRestaurant.state]])]),(0,n.Lk)("div",Ja,[t[28]||(t[28]=(0,n.Lk)("label",{for:"new-rest-zip"},"Zip Code",-1)),(0,n.bo)((0,n.Lk)("input",{id:"new-rest-zip","onUpdate:modelValue":t[6]||(t[6]=e=>l.newRestaurant.zip=e),type:"text"},null,512),[[s.Jo,l.newRestaurant.zip]])]),(0,n.Lk)("div",Wa,[t[29]||(t[29]=(0,n.Lk)("label",{for:"url"},"Website URL",-1)),(0,n.bo)((0,n.Lk)("input",{id:"url","onUpdate:modelValue":t[7]||(t[7]=e=>l.newRestaurant.url=e),type:"url",placeholder:"https://example.com"},null,512),[[s.Jo,l.newRestaurant.url]])]),(0,n.Lk)("button",{type:"button",class:"btn-save-restaurant",onClick:t[8]||(t[8]=(...e)=>l.saveNewRestaurant&&l.saveNewRestaurant(...e)),disabled:l.isSavingRestaurant},(0,o.v_)(l.isSavingRestaurant?"Saving...":"Save Restaurant"),9,Qa),l.addRestaurantError?((0,n.uX)(),(0,n.CE)("p",$a,(0,o.v_)(l.addRestaurantError),1)):(0,n.Q3)("",!0)])):(0,n.Q3)("",!0),(0,n.Lk)("div",Oa,[t[33]||(t[33]=(0,n.Lk)("label",null,"Photo",-1)),l.photoDataUrl?((0,n.uX)(),(0,n.CE)("div",qa,[(0,n.Lk)("img",{src:l.photoDataUrl,alt:"Review photo preview"},null,8,Za),(0,n.Lk)("button",{type:"button",onClick:t[12]||(t[12]=(...e)=>l.removePhoto&&l.removePhoto(...e)),class:"btn-remove-photo",title:"Remove Photo"},"Ã—")])):((0,n.uX)(),(0,n.CE)("div",ja,[(0,n.Lk)("button",{type:"button",onClick:t[9]||(t[9]=(...e)=>l.openCamera&&l.openCamera(...e)),class:"btn-secondary"},t[31]||(t[31]=[(0,n.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor"},[(0,n.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,n.Lk)("circle",{cx:"12",cy:"12",r:"3.2"}),(0,n.Lk)("path",{d:"M9 2L7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2H9zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z"})],-1),(0,n.eW)(" Take a Picture ",-1)])),(0,n.Lk)("button",{type:"button",onClick:t[10]||(t[10]=(...e)=>l.triggerFileUpload&&l.triggerFileUpload(...e)),class:"btn-secondary"},t[32]||(t[32]=[(0,n.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor"},[(0,n.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,n.Lk)("path",{d:"M9 16h6v-6h4l-7-7-7 7h4v6zm3-10.17L14.17 8H13v6h-2V8H9.83L12 5.83zM5 18h14v2H5v-2z"})],-1),(0,n.eW)(" Upload Photo ",-1)])),(0,n.Lk)("input",{type:"file",ref:"fileInput",onChange:t[11]||(t[11]=(...e)=>l.handleFileUpload&&l.handleFileUpload(...e)),accept:"image/*",style:{display:"none"}},null,544)]))]),l.isCameraOpen?((0,n.uX)(),(0,n.CE)("div",Ya,[(0,n.Lk)("video",es,null,512),(0,n.Lk)("button",{type:"button",onClick:t[13]||(t[13]=(...e)=>l.capturePhoto&&l.capturePhoto(...e)),class:"btn-capture"},"Capture"),(0,n.Lk)("button",{type:"button",onClick:t[14]||(t[14]=(...e)=>l.closeCamera&&l.closeCamera(...e)),class:"btn-cancel-camera"},"Cancel")])):(0,n.Q3)("",!0),(0,n.Lk)("div",ts,[t[35]||(t[35]=(0,n.Lk)("label",null,"Rating",-1)),(0,n.Lk)("div",as,[((0,n.uX)(),(0,n.CE)(n.FK,null,(0,n.pI)(5,e=>(0,n.Lk)("span",{key:e,class:"star",onMouseover:t=>l.hoverRating=e,onMouseleave:t[15]||(t[15]=e=>l.hoverRating=0),onClick:t=>l.rating=e,title:`${e} star${e>1?"s":""}`},[((0,n.uX)(),(0,n.CE)("svg",ns,[t[34]||(t[34]=(0,n.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"},null,-1)),(0,n.Lk)("path",{d:l.getStarPath(e)},null,8,os)]))],40,ss)),64))])]),(0,n.Lk)("div",ls,[t[36]||(t[36]=(0,n.Lk)("label",null,"Tags",-1)),(0,n.Lk)("div",is,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.tags,e=>((0,n.uX)(),(0,n.CE)("button",{key:e.id,type:"button",class:(0,o.C4)(["tag-btn",{selected:l.selectedTags.includes(e.name)}]),onClick:t=>l.toggleTag(e.name)},(0,o.v_)(e.name),11,rs))),128))])]),(0,n.Lk)("div",ds,[t[37]||(t[37]=(0,n.Lk)("label",{for:"new-tag"},"Add a new tag",-1)),(0,n.Lk)("div",cs,[(0,n.bo)((0,n.Lk)("input",{id:"new-tag","onUpdate:modelValue":t[16]||(t[16]=e=>l.newTag=e),onKeydown:t[17]||(t[17]=(0,s.jR)((0,s.D$)((...e)=>l.addNewTag&&l.addNewTag(...e),["prevent"]),["enter"])),placeholder:"e.g., crispy, peppery, huge"},null,544),[[s.Jo,l.newTag,void 0,{trim:!0}]]),(0,n.Lk)("button",{type:"button",onClick:t[18]||(t[18]=(...e)=>l.addNewTag&&l.addNewTag(...e)),disabled:!l.newTag.trim()},"Add Tag",8,us)])]),(0,n.Lk)("div",vs,[t[38]||(t[38]=(0,n.Lk)("label",{for:"comment"},"Comment",-1)),(0,n.bo)((0,n.Lk)("textarea",{id:"comment","onUpdate:modelValue":t[19]||(t[19]=e=>l.comment=e),rows:"4",placeholder:"How was the tenderloin?"},null,512),[[s.Jo,l.comment]])]),(0,n.Lk)("button",{type:"submit",disabled:l.submitting||!l.selectedRestaurant||!l.rating},(0,o.v_)(l.submitting?"Submitting...":"Submit Review"),9,ps),l.errorMessage?((0,n.uX)(),(0,n.CE)("p",gs,(0,o.v_)(l.errorMessage),1)):(0,n.Q3)("",!0)],32)])])}var ms=a(914);const ws={name:"Review",props:{selectedRestaurantId:{type:String,default:null}},emits:["reviewed"],setup(e,{emit:t}){const a=(0,J.KR)([]),s=(0,J.KR)(e.selectedRestaurantId||null),o=(0,J.KR)(null),l=(0,J.KR)(0),i=(0,J.KR)(""),r=(0,J.KR)(!1),d=(0,J.KR)(""),c=(0,J.KR)([]),u=(0,J.KR)([]),v=(0,J.KR)(""),p=(0,J.KR)(!1),g=(0,J.KR)({name:"",address:"",city:"",state:"",zip:"",url:""}),h=(0,J.KR)(!1),m=(0,J.KR)(""),w=(0,J.KR)(!1),k=(0,J.KR)(null),L=(0,J.KR)(null),y=(0,J.KR)(null),R=(0,J.KR)(null),f=(0,J.KR)(null),C="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27z",b="M22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.64-7.03L22 9.24zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z",M=async()=>{const e=(0,$.P)((0,$.rJ)(ee,"tags"),(0,$.My)("name")),t=await(0,$.GG)(e);c.value=t.docs.map(e=>({id:e.id,...e.data()}))},E=()=>new Promise(t=>{navigator.geolocation&&!e.selectedRestaurantId?navigator.geolocation.getCurrentPosition(e=>{f.value={lat:e.coords.latitude,lng:e.coords.longitude},t()},()=>t(),{timeout:5e3}):t()}),I=()=>{if(!f.value||0===a.value.length)return;let e=null,t=1/0;a.value.forEach(a=>{if(a.location){const s=Ue(f.value.lat,f.value.lng,a.location.lat,a.location.lng);null!==s&&s<t&&(t=s,e=a)}}),e&&(s.value=e.id)},U=async()=>{if(e.selectedRestaurantId){const t=(0,$.H9)(ee,"restaurants",e.selectedRestaurantId),s=await(0,$.x7)(t);s.exists()&&(a.value=[{id:s.id,...s.data()}])}else{const e=(0,$.P)((0,$.rJ)(ee,"restaurants"),(0,$.My)("name")),t=await(0,$.GG)(e);a.value=t.docs.map(e=>({id:e.id,...e.data()})),await E(),I()}};(0,n.sV)(async()=>{await Promise.all([M(),U()])});const z=e=>{const t=l.value||o.value;return t>=e?C:b},S=e=>{const t=u.value.indexOf(e);t>-1?u.value.splice(t,1):u.value.push(e)},x=async()=>{const e=v.value.toLowerCase();if(e&&!c.value.some(t=>t.name===e))try{const t=await(0,$.gS)((0,$.rJ)(ee,"tags"),{name:e,createdAt:(0,$.O5)()}),a={id:t.id,name:e};c.value.push(a),c.value.sort((e,t)=>e.name.localeCompare(t.name)),u.value.push(e),v.value=""}catch(t){d.value="Failed to add new tag.",console.error("Error adding new tag: ",t)}else v.value=""},N=async()=>{const e=g.value.name.trim(),t=g.value.address.trim();if(e&&t){h.value=!0,m.value="";try{const n=(0,$.P)((0,$.rJ)(ee,"restaurants"),(0,$._M)("name","==",e),(0,$._M)("address","==",t)),o=await(0,$.GG)(n);if(!o.empty)return m.value="This restaurant already exists in the database.",void(h.value=!1);const l=[g.value.address,g.value.city,g.value.state,g.value.zip].filter(Boolean).join(", "),i=await(0,ms.geocodeAddress)(l);if(!i)return m.value="Could not find a location for the provided address. Please check the address and try again.",void(h.value=!1);const r={...g.value,name:e,address:t,location:i,createdAt:(0,$.O5)()},d=await(0,$.gS)((0,$.rJ)(ee,"restaurants"),r),c={id:d.id,...r};a.value.push(c),a.value.sort((e,t)=>e.name.localeCompare(t.name)),s.value=d.id,p.value=!1,g.value={name:"",address:"",city:"",state:"",zip:"",url:""}}catch(n){console.error("Error saving new restaurant:",n),m.value="Failed to save restaurant. Please try again."}finally{h.value=!1}}else m.value="Restaurant name and address are required."},P=async()=>{w.value=!0,await(0,n.dY)();try{y.value=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}}),L.value&&(L.value.srcObject=y.value)}catch(e){console.error("Error accessing camera: ",e),d.value="Could not access the camera. Please check permissions.",w.value=!1}},F=()=>{y.value&&y.value.getTracks().forEach(e=>e.stop()),w.value=!1},X=()=>{const e=document.createElement("canvas"),t=L.value,a=1280,s=1280;let n=t.videoWidth,o=t.videoHeight;n>o?n>a&&(o*=a/n,n=a):o>s&&(n*=s/o,o=s),e.width=n,e.height=o;const l=e.getContext("2d");l.drawImage(t,0,0,n,o),k.value=e.toDataURL("image/jpeg",.8),F()},_=()=>{k.value=null},A=()=>{R.value.click()},K=e=>{const t=e.target.files[0];if(t){const e=new FileReader;e.onload=e=>{k.value=e.target.result},e.readAsDataURL(t)}},B=async()=>{const e=Z.currentUser;if(e&&s.value&&o.value){r.value=!0,d.value="";try{let a=null;if(k.value){const t=(0,O.c7)(),s=`reviews/${e.uid}/${Date.now()}.jpg`,n=(0,O.KR)(t,s),o=await(0,O.ls)(n,k.value,"data_url");a=await(0,O.qk)(o.ref)}const n=(0,$.O5)();await(0,$.gS)((0,$.rJ)(ee,"reviews"),{userId:e.uid,restaurantId:s.value,photoURL:a,rating:o.value,text:i.value,tags:u.value,createdAt:n,lastActivityAt:n});const l=(0,$.P)((0,$.rJ)(ee,"bucketListItems"),(0,$._M)("userId","==",e.uid),(0,$._M)("restaurantId","==",s.value)),r=await(0,$.GG)(l);if(!r.empty){const e=r.docs[0];await(0,$.mZ)(e.ref,{completedAt:n})}t("reviewed")}catch(a){console.error("Error submitting check-in: ",a),d.value="Failed to submit check-in. Please try again."}finally{r.value=!1}}else d.value="Please select a restaurant and provide a rating."};return{restaurants:a,selectedRestaurant:s,rating:o,hoverRating:l,comment:i,submitting:r,errorMessage:d,getStarPath:z,submitReview:B,tags:c,selectedTags:u,newTag:v,toggleTag:S,addNewTag:x,showAddRestaurantForm:p,newRestaurant:g,isSavingRestaurant:h,addRestaurantError:m,saveNewRestaurant:N,isCameraOpen:w,photoDataUrl:k,videoPlayer:L,openCamera:P,closeCamera:F,capturePhoto:X,removePhoto:_,fileInput:R,triggerFileUpload:A,handleFileUpload:K}}},ks=(0,Le.A)(ws,[["render",hs],["__scopeId","data-v-19cfa51c"]]),Ls=ks,ys={class:"recommendations-page"},Rs={key:0,class:"loading-indicator"},fs={key:1},Cs={key:0,class:"no-restaurants-message"},bs={key:1,class:"restaurant-list"},Ms={class:"restaurant-details"},Es={class:"restaurant-name"},Is={class:"restaurant-meta"},Us=["title"],zs={class:"rating-text"},Ss={class:"rating-count"},xs={key:1,class:"distance"},Ns={class:"restaurant-address"},Ps={class:"restaurant-actions"},Fs=["onClick","title"],Xs=["href"],_s=["href"],As=["onClick"];function Ks(e,t,a,s,l,i){const r=(0,n.g2)("StarRating");return(0,n.uX)(),(0,n.CE)("div",ys,[t[3]||(t[3]=(0,n.Lk)("div",{class:"page-header"},[(0,n.Lk)("h2",null,"Top 10 Recommendations"),(0,n.Lk)("p",null,"Based on reviews in the last 6 months within 100 miles of your location.")],-1)),s.loading?((0,n.uX)(),(0,n.CE)("div",Rs,"Loading recommendations...")):((0,n.uX)(),(0,n.CE)("div",fs,[0===s.restaurants.length?((0,n.uX)(),(0,n.CE)("p",Cs," No recommendations found. ")):((0,n.uX)(),(0,n.CE)("ul",bs,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.restaurants,a=>((0,n.uX)(),(0,n.CE)("li",{key:a.id,class:"restaurant-item"},[(0,n.Lk)("div",Ms,[(0,n.Lk)("span",Es,(0,o.v_)(a.name),1),(0,n.Lk)("div",Is,[a.averageRating>0?((0,n.uX)(),(0,n.CE)("div",{key:0,class:"rating",title:`${a.averageRating.toFixed(2)} average rating`},[(0,n.bF)(r,{rating:a.averageRating},null,8,["rating"]),(0,n.Lk)("span",zs,(0,o.v_)(a.averageRating.toFixed(1)),1),(0,n.Lk)("span",Ss,"("+(0,o.v_)(a.reviewCount)+" recent reviews)",1)],8,Us)):(0,n.Q3)("",!0),null!==a.distance?((0,n.uX)(),(0,n.CE)("span",xs,(0,o.v_)(a.distance.toFixed(1))+" miles away",1)):(0,n.Q3)("",!0)]),(0,n.Lk)("span",Ns,(0,o.v_)(a.address)+", "+(0,o.v_)(a.city)+", "+(0,o.v_)(a.state)+" "+(0,o.v_)(a.zip),1)]),(0,n.Lk)("div",Ps,[(0,n.Lk)("button",{onClick:e=>s.toggleBucketList(a),class:(0,o.C4)(["action-btn",{"in-bucket-list":s.isInBucketList(a.id)}]),title:s.isInBucketList(a.id)?"Remove from Bucket List":"Add to Bucket List"},t[0]||(t[0]=[(0,n.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor"},[(0,n.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,n.Lk)("path",{d:"M18 7h-2.06c-.33-3.2-2.46-5.8-5.94-5.8S4.39 3.8 4.06 7H2v12h16V7zM6.14 7c.2-1.92 1.6-3.48 3.86-3.8A4.002 4.002 0 0 1 14 7h-2.14c-.2-1.92-1.6-3.48-3.86-3.8zM16 17H4v-8h12v8z"})],-1)]),10,Fs),(0,n.Lk)("a",{href:s.getDirectionsUrl(a),target:"_blank",rel:"noopener noreferrer",class:"action-btn",title:"Get Directions"},t[1]||(t[1]=[(0,n.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor"},[(0,n.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,n.Lk)("path",{d:"M22.43 10.59l-9.01-9.01c-.75-.75-2.07-.76-2.83 0l-9.01 9.01c-.76.75-.76 2.07 0 2.83l9.01 9.01c.75.75 2.07.75 2.83 0l9.01-9.01c.75-.76.75-2.08 0-2.83zM12 16c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4z"})],-1)]),8,Xs),(0,n.Lk)("a",{href:s.getDetailsUrl(a),target:"_blank",rel:"noopener noreferrer",class:"action-btn",title:"View Details on Google"},t[2]||(t[2]=[(0,n.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor"},[(0,n.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,n.Lk)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 5 1.41-1.41L15.5 14zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"})],-1)]),8,_s),(0,n.Lk)("button",{class:"check-in-btn",onClick:t=>e.$emit("review-at",a.id)},"Review",8,As)])]))),128))]))]))])}const Bs={name:"Recommendations",components:{StarRating:Ie},emits:["review-at"],setup(){const e=(0,J.KR)([]),t=(0,J.KR)(!0),a=(0,J.KR)(null),s=(0,J.KR)(new Set);let o=()=>{};const l=async()=>{if(!a.value)return console.error("User location not available."),t.value=!1,void(e.value=[]);try{const t=await(0,$.GG)((0,$.rJ)(ee,"restaurants")),s=t.docs.map(e=>({id:e.id,...e.data()})),n=s.filter(e=>{if(!e.location||"number"!==typeof e.location.lat||"number"!==typeof e.location.lng)return!1;const t=Ue(a.value.lat,a.value.lng,e.location.lat,e.location.lng);return e.distance=t,null!==t&&t<=100}),o=new Date;o.setMonth(o.getMonth()-6);const l=$.Dc.fromDate(o),i=(0,$.P)((0,$.rJ)(ee,"reviews"),(0,$._M)("createdAt",">=",l)),r=await(0,$.GG)(i),d=r.docs.map(e=>e.data()),c=n.map(e=>{const t=d.filter(t=>t.restaurantId===e.id&&"number"===typeof t.rating);let a=0,s=0;if(t.length>0){const e=t.reduce((e,t)=>e+t.rating,0);a=e/t.length,s=t.length}return{...e,averageRating:a,reviewCount:s}}).filter(e=>e.reviewCount>0);c.sort((e,t)=>t.averageRating-e.averageRating),e.value=c.slice(0,10)}catch(s){console.error("Error fetching recommendations:",s)}finally{t.value=!1}};(0,n.sV)(()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(e=>{a.value={lat:e.coords.latitude,lng:e.coords.longitude},l(),d()},e=>{console.error("Geolocation failed. Using default location.",e),a.value={lat:41.5,lng:-90.5},l(),d()}):(console.error("Geolocation is not supported by this browser."),a.value={lat:41.5,lng:-90.5},l(),d())}),(0,n.hi)(()=>{o()});const i=e=>{const t=encodeURIComponent(`${e.name}, ${e.address}`);return`https://www.google.com/maps/dir/?api=1&destination=${t}`},r=e=>{const t=encodeURIComponent(`${e.name}, ${e.address}`);return`https://www.google.com/search?q=${t}`},d=()=>{const e=Z.currentUser;if(!e)return;const t=(0,$.P)((0,$.rJ)(ee,"bucketListItems"),(0,$._M)("userId","==",e.uid));o=(0,$.aQ)(t,e=>{const t=new Set;e.forEach(e=>t.add(e.data().restaurantId)),s.value=t})},c=e=>s.value.has(e),u=async e=>{const t=Z.currentUser;if(t)if(c(e.id)){const a=(0,$.P)((0,$.rJ)(ee,"bucketListItems"),(0,$._M)("userId","==",t.uid),(0,$._M)("restaurantId","==",e.id)),s=await(0,$.GG)(a);s.forEach(e=>(0,$.kd)(e.ref))}else await(0,$.gS)((0,$.rJ)(ee,"bucketListItems"),{userId:t.uid,restaurantId:e.id,createdAt:(0,$.O5)()})};return{restaurants:e,loading:t,getDirectionsUrl:i,getDetailsUrl:r,isInBucketList:c,toggleBucketList:u}}},Vs=(0,Le.A)(Bs,[["render",Ks],["__scopeId","data-v-7a582d05"]]),Hs=Vs,Gs={class:"stats-page"},Ts={class:"stats-container"},Ds={key:0},Js={key:1,class:"stats-grid"},Ws={class:"stat-card"},Qs={class:"stat-card"},$s={class:"stat-card"},Os={class:"stat-card"},js={key:2},qs={key:3,class:"log-container"};function Zs(e,t,a,s,l,i){return(0,n.uX)(),(0,n.CE)("div",Gs,[t[5]||(t[5]=(0,n.Lk)("h2",null,"Database Stats",-1)),(0,n.Lk)("div",Ts,[s.statsLoading?((0,n.uX)(),(0,n.CE)("div",Ds,"Loading stats...")):s.stats?((0,n.uX)(),(0,n.CE)("ul",Js,[(0,n.Lk)("li",Ws,[t[0]||(t[0]=(0,n.Lk)("strong",null,"Restaurants",-1)),(0,n.Lk)("span",null,(0,o.v_)(s.stats.restaurants),1)]),(0,n.Lk)("li",Qs,[t[1]||(t[1]=(0,n.Lk)("strong",null,"Users",-1)),(0,n.Lk)("span",null,(0,o.v_)(s.stats.users),1)]),(0,n.Lk)("li",$s,[t[2]||(t[2]=(0,n.Lk)("strong",null,"Reviews",-1)),(0,n.Lk)("span",null,(0,o.v_)(s.stats.reviews),1)]),(0,n.Lk)("li",Os,[t[3]||(t[3]=(0,n.Lk)("strong",null,"Follows",-1)),(0,n.Lk)("span",null,(0,o.v_)(s.stats.follows),1)])])):((0,n.uX)(),(0,n.CE)("div",js,"Could not load stats.")),s.log.length>0?((0,n.uX)(),(0,n.CE)("div",qs,[t[4]||(t[4]=(0,n.Lk)("h3",null,"Log:",-1)),(0,n.Lk)("pre",null,(0,o.v_)(s.log.join("\n")),1)])):(0,n.Q3)("",!0)])])}const Ys={name:"DatabaseStats",setup(){const e=(0,J.KR)(null),t=(0,J.KR)(!0),a=(0,J.KR)([]),s=async()=>{t.value=!0;try{const t=["restaurants","users","reviews","follows"],a={},s=t.map(async e=>{const t=(0,$.rJ)(ee,e),s=await(0,$.d_)(t);a[e]=s.data().count});await Promise.all(s),e.value=a}catch(s){a.value.push("Error fetching collection stats: "+s.message),console.error("Error fetching stats:",s)}finally{t.value=!1}};return(0,n.sV)(s),{stats:e,statsLoading:t,log:a}}},en=(0,Le.A)(Ys,[["render",Zs],["__scopeId","data-v-7fa04ecf"]]),tn=en,an={class:"my-reviews-page"},sn={key:1,class:"loading-indicator"},nn={key:2,class:"no-reviews-message"},on={key:3,class:"reviews-list"},ln={class:"card-header"},rn={class:"restaurant-name"},dn={class:"review-date"},cn={key:0,class:"photo-container"},un=["src"],vn={class:"card-body"},pn={class:"rating-display"},gn={key:0,class:"comment-text"},hn={key:1,class:"tags-container"},mn={class:"card-actions"},wn=["onClick"],kn=["onClick"];function Ln(e,t,a,s,l,i){const r=(0,n.g2)("EditReviewModal"),d=(0,n.g2)("StarRating");return(0,n.uX)(),(0,n.CE)("div",an,[s.isEditModalVisible?((0,n.uX)(),(0,n.Wv)(r,{key:0,review:s.reviewToEdit,onClose:s.closeEditModal,onSave:s.handleSaveReview},null,8,["review","onClose","onSave"])):(0,n.Q3)("",!0),s.loading?((0,n.uX)(),(0,n.CE)("div",sn,"Loading your reviews...")):0===s.populatedReviews.length?((0,n.uX)(),(0,n.CE)("div",nn,[t[1]||(t[1]=(0,n.Lk)("p",null,"You haven't posted any reviews yet.",-1)),(0,n.Lk)("button",{onClick:t[0]||(t[0]=t=>e.$emit("go-to-review"))},"Post your first review!")])):((0,n.uX)(),(0,n.CE)("div",on,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.populatedReviews,e=>((0,n.uX)(),(0,n.CE)("div",{key:e.id,class:"review-card"},[(0,n.Lk)("div",ln,[(0,n.Lk)("span",rn,(0,o.v_)(e.restaurantName),1),(0,n.Lk)("span",dn,(0,o.v_)(s.formatDate(e.createdAt)),1)]),e.photoURL?((0,n.uX)(),(0,n.CE)("div",cn,[(0,n.Lk)("img",{src:e.photoURL,alt:"Review photo",class:"check-in-photo"},null,8,un)])):(0,n.Q3)("",!0),(0,n.Lk)("div",vn,[(0,n.Lk)("div",pn,[(0,n.bF)(d,{rating:e.rating},null,8,["rating"])]),e.comment?((0,n.uX)(),(0,n.CE)("p",gn,'"'+(0,o.v_)(e.comment)+'"',1)):(0,n.Q3)("",!0),e.tags&&e.tags.length>0?((0,n.uX)(),(0,n.CE)("div",hn,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.tags,e=>((0,n.uX)(),(0,n.CE)("span",{key:e,class:"tag"},(0,o.v_)(e),1))),128))])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",mn,[(0,n.Lk)("button",{onClick:t=>s.openEditModal(e),class:"action-btn edit-btn"},"Edit",8,wn),(0,n.Lk)("button",{onClick:t=>s.handleDeleteReview(e),class:"action-btn delete-btn"},"Delete",8,kn)])]))),128))]))])}const yn={key:0,class:"modal-content"},Rn={class:"form-group"},fn={class:"star-rating-input"},Cn=["onMouseover","onClick","title"],bn={height:"28px",width:"28px",viewBox:"0 0 24 24",fill:"currentColor"},Mn=["d"],En={class:"form-group"},In={key:0,class:"photo-preview"},Un=["src"],zn={key:1,class:"photo-actions"},Sn={key:0,class:"camera-modal"},xn={ref:"videoPlayer",class:"camera-video",autoplay:"",playsinline:""},Nn={class:"form-group"},Pn={class:"form-group"},Fn={class:"tags-container"},Xn=["onClick"],_n={class:"modal-actions"};function An(e,t,a,l,i,r){return(0,n.uX)(),(0,n.CE)("div",{class:"modal-overlay",onClick:t[10]||(t[10]=(0,s.D$)(t=>e.$emit("close"),["self"]))},[l.editableReview?((0,n.uX)(),(0,n.CE)("div",yn,[t[19]||(t[19]=(0,n.Lk)("h2",null,"Edit Review",-1)),(0,n.Lk)("form",{onSubmit:t[9]||(t[9]=(0,s.D$)((...e)=>l.onSave&&l.onSave(...e),["prevent"]))},[(0,n.Lk)("div",Rn,[t[12]||(t[12]=(0,n.Lk)("label",null,"Rating",-1)),(0,n.Lk)("div",fn,[((0,n.uX)(),(0,n.CE)(n.FK,null,(0,n.pI)(5,e=>(0,n.Lk)("span",{key:e,class:"star",onMouseover:t=>l.hoverRating=e,onMouseleave:t[0]||(t[0]=e=>l.hoverRating=0),onClick:t=>l.editableReview.rating=e,title:`${e} star${e>1?"s":""}`},[((0,n.uX)(),(0,n.CE)("svg",bn,[t[11]||(t[11]=(0,n.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"},null,-1)),(0,n.Lk)("path",{d:l.getStarPath(e)},null,8,Mn)]))],40,Cn)),64))])]),(0,n.Lk)("div",En,[t[15]||(t[15]=(0,n.Lk)("label",null,"Photo",-1)),l.photoDataUrl||l.editableReview.photoURL?((0,n.uX)(),(0,n.CE)("div",In,[(0,n.Lk)("img",{src:l.photoDataUrl||l.editableReview.photoURL,alt:"Review photo preview"},null,8,Un),(0,n.Lk)("button",{type:"button",onClick:t[1]||(t[1]=(...e)=>l.removePhoto&&l.removePhoto(...e)),class:"btn-remove-photo",title:"Remove Photo"},"Ã—")])):((0,n.uX)(),(0,n.CE)("div",zn,[(0,n.Lk)("button",{type:"button",onClick:t[2]||(t[2]=(...e)=>l.openCamera&&l.openCamera(...e)),class:"btn-secondary"},t[13]||(t[13]=[(0,n.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor"},[(0,n.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,n.Lk)("circle",{cx:"12",cy:"12",r:"3.2"}),(0,n.Lk)("path",{d:"M9 2L7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2H9zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z"})],-1),(0,n.eW)(" Take a Picture ",-1)])),(0,n.Lk)("button",{type:"button",onClick:t[3]||(t[3]=(...e)=>l.triggerFileUpload&&l.triggerFileUpload(...e)),class:"btn-secondary"},t[14]||(t[14]=[(0,n.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor"},[(0,n.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,n.Lk)("path",{d:"M9 16h6v-6h4l-7-7-7 7h4v6zm3-10.17L14.17 8H13v6h-2V8H9.83L12 5.83zM5 18h14v2H5v-2z"})],-1),(0,n.eW)(" Upload Photo ",-1)])),(0,n.Lk)("input",{type:"file",ref:"fileInput",onChange:t[4]||(t[4]=(...e)=>l.handleFileUpload&&l.handleFileUpload(...e)),accept:"image/*",style:{display:"none"}},null,544)]))]),l.isCameraOpen?((0,n.uX)(),(0,n.CE)("div",Sn,[(0,n.Lk)("video",xn,null,512),(0,n.Lk)("button",{type:"button",onClick:t[5]||(t[5]=(...e)=>l.capturePhoto&&l.capturePhoto(...e)),class:"btn-capture"},"Capture"),(0,n.Lk)("button",{type:"button",onClick:t[6]||(t[6]=(...e)=>l.closeCamera&&l.closeCamera(...e)),class:"btn-cancel-camera"},"Cancel")])):(0,n.Q3)("",!0),(0,n.Lk)("div",Nn,[t[16]||(t[16]=(0,n.Lk)("label",{for:"comment"},"Comment",-1)),(0,n.bo)((0,n.Lk)("textarea",{id:"comment","onUpdate:modelValue":t[7]||(t[7]=e=>l.editableReview.comment=e),rows:"4"},null,512),[[s.Jo,l.editableReview.comment]])]),(0,n.Lk)("div",Pn,[t[17]||(t[17]=(0,n.Lk)("label",null,"Tags",-1)),(0,n.Lk)("div",Fn,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.allTags,e=>((0,n.uX)(),(0,n.CE)("button",{key:e.id,type:"button",class:(0,o.C4)(["tag-btn",{selected:l.editableReview.tags.includes(e.name)}]),onClick:t=>l.toggleTag(e.name)},(0,o.v_)(e.name),11,Xn))),128))])]),(0,n.Lk)("div",_n,[(0,n.Lk)("button",{type:"button",class:"btn-cancel",onClick:t[8]||(t[8]=t=>e.$emit("close"))},"Cancel"),t[18]||(t[18]=(0,n.Lk)("button",{type:"submit",class:"btn-save"},"Save Changes",-1))])],32)])):(0,n.Q3)("",!0)])}const Kn={name:"EditReviewModal",props:{review:{type:Object,required:!0}},emits:["close","save"],setup(e,{emit:t}){const a=(0,J.KR)(null),s=(0,J.KR)(0),o=(0,J.KR)([]),l=(0,J.KR)(!1),i=(0,J.KR)(null),r=(0,J.KR)(!1),d=(0,J.KR)(null),c=(0,J.KR)(null),u=(0,J.KR)(null),v="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27z",p="M22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.64-7.03L22 9.24zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z";(0,n.wB)(()=>e.review,e=>{e&&(a.value=JSON.parse(JSON.stringify(e)),a.value.tags||(a.value.tags=[]),i.value=null,r.value=!1)},{immediate:!0,deep:!0}),(0,n.sV)(async()=>{const e=(0,$.P)((0,$.rJ)(ee,"tags"),(0,$.My)("name")),t=await(0,$.GG)(e);o.value=t.docs.map(e=>({id:e.id,...e.data()}))});const g=e=>{const t=s.value||(a.value?a.value.rating:0);return t>=e?v:p},h=e=>{if(!a.value)return;const t=a.value.tags,s=t.indexOf(e);s>-1?t.splice(s,1):t.push(e)},m=()=>{t("save",{reviewData:a.value,newPhotoDataUrl:i.value,photoRemoved:r.value})},w=async()=>{l.value=!0,await(0,n.dY)();try{c.value=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}}),d.value&&(d.value.srcObject=c.value)}catch(e){console.error("Error accessing camera: ",e),l.value=!1}},k=()=>{c.value&&c.value.getTracks().forEach(e=>e.stop()),l.value=!1},L=()=>{const e=document.createElement("canvas"),t=d.value,a=1280,s=1280;let n=t.videoWidth,o=t.videoHeight;n>o?n>a&&(o*=a/n,n=a):o>s&&(n*=s/o,o=s),e.width=n,e.height=o;const l=e.getContext("2d");l.drawImage(t,0,0,n,o),i.value=e.toDataURL("image/jpeg",.8),r.value=!1,k()},y=()=>{i.value=null,a.value&&(a.value.photoURL=null),r.value=!0},R=()=>{u.value.click()},f=e=>{const t=e.target.files[0];if(t){const e=new FileReader;e.onload=e=>{i.value=e.target.result,r.value=!1},e.readAsDataURL(t)}};return{editableReview:a,hoverRating:s,allTags:o,getStarPath:g,toggleTag:h,onSave:m,isCameraOpen:l,photoDataUrl:i,videoPlayer:d,openCamera:w,closeCamera:k,capturePhoto:L,removePhoto:y,fileInput:u,triggerFileUpload:R,handleFileUpload:f}}},Bn=(0,Le.A)(Kn,[["render",An],["__scopeId","data-v-6a28d33e"]]),Vn=Bn,Hn={name:"MyReviews",components:{StarRating:Ie,EditReviewModal:Vn},emits:["go-to-review"],setup(){const e=(0,J.KR)(!0),t=(0,J.KR)([]),a=(0,J.KR)(new Map),s=(0,J.KR)(!1),o=(0,J.KR)(null),l=async()=>{e.value=!0;const s=Z.currentUser;if(s)try{const[e,n]=await Promise.all([(0,$.GG)((0,$.P)((0,$.rJ)(ee,"reviews"),(0,$._M)("userId","==",s.uid),(0,$.My)("createdAt","desc"))),(0,$.GG)((0,$.rJ)(ee,"restaurants"))]);n.forEach(e=>{a.value.set(e.id,e.data())}),t.value=e.docs.map(e=>({id:e.id,...e.data()}))}catch(n){console.error("Error fetching reviews:",n)}finally{e.value=!1}else e.value=!1};(0,n.sV)(l);const i=(0,n.EW)(()=>t.value.map(e=>({...e,comment:e.text,restaurantName:a.value.get(e.restaurantId)?.name||"Unknown Restaurant"}))),r=e=>e&&e.toDate?e.toDate().toLocaleDateString():"",d=e=>{o.value=e,s.value=!0},c=()=>{s.value=!1,o.value=null},u=async e=>{if(window.confirm("Are you sure you want to delete this review? This action cannot be undone."))try{if(e.photoURL){const t=(0,O.c7)(),a=(0,O.KR)(t,e.photoURL);await(0,O.XR)(a).catch(e=>console.error("Error deleting old photo:",e))}const a=(0,$.H9)(ee,"reviews",e.id);await(0,$.kd)(a),t.value=t.value.filter(t=>t.id!==e.id)}catch(a){console.error("Error deleting review:",a),alert("Failed to delete review. Please try again.")}},v=async e=>{const{reviewData:a,newPhotoDataUrl:s,photoRemoved:n}=e,o=t.value.find(e=>e.id===a.id);try{let e=o.photoURL;const l=(0,O.c7)();if((s||n)&&o.photoURL){const e=(0,O.KR)(l,o.photoURL);await(0,O.XR)(e).catch(e=>console.warn("Could not delete old photo:",e))}if(s){const t=Z.currentUser,a=`reviews/${t.uid}/${Date.now()}.jpg`,n=(0,O.KR)(l,a),o=await(0,O.ls)(n,s,"data_url");e=await(0,O.qk)(o.ref)}else n&&(e=null);const i=(0,$.H9)(ee,"reviews",a.id);await(0,$.mZ)(i,{rating:a.rating,text:a.comment,tags:a.tags,photoURL:e});const r=t.value.findIndex(e=>e.id===a.id);-1!==r&&(t.value[r]={...t.value[r],...a,photoURL:e}),c()}catch(l){console.error("Error updating review:",l),alert("Failed to update review. Please try again.")}};return{loading:e,populatedReviews:i,formatDate:r,isEditModalVisible:s,reviewToEdit:o,openEditModal:d,closeEditModal:c,handleDeleteReview:u,handleSaveReview:v}}},Gn=(0,Le.A)(Hn,[["render",Ln],["__scopeId","data-v-a39a1f60"]]),Tn=Gn,Dn={class:"leaderboard-page"},Jn={key:0,class:"loading-indicator"},Wn={key:1,class:"no-users-message"},Qn={key:2,class:"leaderboard-list"},$n={class:"rank-container"},On={class:"rank"},jn={key:0,class:"medal"},qn=["src"],Zn={class:"user-info"},Yn={class:"user-name"},eo={class:"review-count"};function to(e,t,a,s,l,i){return(0,n.uX)(),(0,n.CE)("div",Dn,[t[1]||(t[1]=(0,n.Lk)("div",{class:"page-header"},[(0,n.Lk)("h2",null,"Leaderboard"),(0,n.Lk)("p",null,"Top 10 reviewers")],-1)),s.loading?((0,n.uX)(),(0,n.CE)("div",Jn,"Loading leaderboard...")):0===s.users.length?((0,n.uX)(),(0,n.CE)("div",Wn,t[0]||(t[0]=[(0,n.Lk)("p",null,"No users to display on the leaderboard yet.",-1)]))):((0,n.uX)(),(0,n.CE)("ol",Qn,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.users,(e,t)=>((0,n.uX)(),(0,n.CE)("li",{key:e.uid,class:(0,o.C4)(["leaderboard-item",s.getRankClass(t)])},[(0,n.Lk)("div",$n,[(0,n.Lk)("span",On,(0,o.v_)(t+1),1),s.getMedal(t)?((0,n.uX)(),(0,n.CE)("span",jn,(0,o.v_)(s.getMedal(t)),1)):(0,n.Q3)("",!0)]),(0,n.Lk)("img",{src:e.photoURL||"https://cdn-icons-png.flaticon.com/512/149/149071.png",alt:"User",class:"user-avatar",referrerpolicy:"no-referrer"},null,8,qn),(0,n.Lk)("div",Zn,[(0,n.Lk)("span",Yn,(0,o.v_)(e.displayName),1),(0,n.Lk)("span",eo,(0,o.v_)(e.reviewCount||0)+" reviews",1)])],2))),128))]))])}const ao={name:"Leaderboard",setup(){const e=(0,J.KR)(!0),t=(0,J.KR)([]);let a=()=>{};(0,n.sV)(()=>{try{const s=(0,$.P)((0,$.rJ)(ee,"users"),(0,$.My)("reviewCount","desc"),(0,$.AB)(10));a=(0,$.aQ)(s,a=>{t.value=a.docs.map(e=>e.data()),e.value=!1},t=>{console.error("Error fetching leaderboard:",t),e.value=!1})}catch(s){console.error("Error setting up leaderboard listener:",s),e.value=!1}}),(0,n.hi)(()=>{a()});const s=e=>0===e?"ðŸ¥‡":1===e?"ðŸ¥ˆ":2===e?"ðŸ¥‰":e>=3&&e<10?"ðŸ…":null,o=e=>0===e?"rank-gold":1===e?"rank-silver":2===e?"rank-bronze":e>=3&&e<10?"rank-regular":"";return{loading:e,users:t,getMedal:s,getRankClass:o}}},so=(0,Le.A)(ao,[["render",to],["__scopeId","data-v-3b1a9780"]]),no=so,oo={class:"followers-page"},lo={key:0,class:"loading-indicator"},io={key:1},ro={key:0,class:"no-followers-message"},co={class:"user-card-content"},uo={class:"user-info"},vo=["src"],po={class:"user-name"},go={key:0,class:"last-review"},ho={class:"review-header"},mo={class:"review-body"},wo={key:0,class:"review-text"},ko={key:1,class:"last-review no-review"},Lo={class:"user-actions"},yo=["onClick"];function Ro(e,t,a,s,l,i){const r=(0,n.g2)("UserReviewsModal"),d=(0,n.g2)("StarRating");return(0,n.uX)(),(0,n.CE)(n.FK,null,[s.isReviewsModalVisible?((0,n.uX)(),(0,n.Wv)(r,{key:0,user:s.userForReviews,onClose:s.closeReviewsModal},null,8,["user","onClose"])):(0,n.Q3)("",!0),(0,n.Lk)("div",oo,[s.loading?((0,n.uX)(),(0,n.CE)("div",lo,"Loading followers...")):((0,n.uX)(),(0,n.CE)("div",io,[0===s.followers.length?((0,n.uX)(),(0,n.CE)("div",ro,t[0]||(t[0]=[(0,n.Lk)("span",null,"No one is following you yet.",-1)]))):(0,n.Q3)("",!0),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.followers,e=>((0,n.uX)(),(0,n.CE)("div",{key:e.uid,class:"user-card"},[(0,n.Lk)("div",co,[(0,n.Lk)("div",uo,[(0,n.Lk)("img",{src:e.photoURL||"https://cdn-icons-png.flaticon.com/512/149/149071.png",class:"user-avatar",alt:"User",referrerpolicy:"no-referrer"},null,8,vo),(0,n.Lk)("div",null,[(0,n.Lk)("span",po,(0,o.v_)(e.displayName),1)])]),e.lastReview?((0,n.uX)(),(0,n.CE)("div",go,[(0,n.Lk)("div",ho,[t[1]||(t[1]=(0,n.eW)(" Latest review: ",-1)),(0,n.Lk)("strong",null,(0,o.v_)(e.lastReview.restaurantName),1)]),(0,n.Lk)("div",mo,[(0,n.bF)(d,{rating:e.lastReview.rating},null,8,["rating"]),e.lastReview.text?((0,n.uX)(),(0,n.CE)("p",wo,'"'+(0,o.v_)(e.lastReview.text)+'"',1)):(0,n.Q3)("",!0)])])):((0,n.uX)(),(0,n.CE)("div",ko," No reviews yet. "))]),(0,n.Lk)("div",Lo,[(0,n.Lk)("button",{onClick:t=>s.openReviewsModal(e),class:"action-btn",title:"View Reviews"},t[2]||(t[2]=[(0,n.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor"},[(0,n.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,n.Lk)("path",{d:"M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H6l-2 2V4h16v12z"})],-1)]),8,yo)])]))),128))]))])],64)}const fo={name:"Followers",components:{UserReviewsModal:Sa,StarRating:Ie},setup(){const e=(0,J.KR)([]),t=(0,J.KR)(!0),a=(0,J.KR)(!1),s=(0,J.KR)(null),o=async()=>{t.value=!0;const a=Z.currentUser;if(!a)return void(t.value=!1);const s=(0,$.P)((0,$.rJ)(ee,"follows"),(0,$._M)("followingId","==",a.uid)),n=await(0,$.GG)(s),o=n.docs.map(e=>e.data().followerId);if(0===o.length)return e.value=[],void(t.value=!1);const l=await(0,$.GG)((0,$.rJ)(ee,"restaurants")),i=new Map;l.forEach(e=>{i.set(e.id,e.data().name)});const r=[];for(let e=0;e<o.length;e+=30){const t=o.slice(e,e+30);if(t.length>0){const e=(0,$.P)((0,$.rJ)(ee,"users"),(0,$._M)("uid","in",t)),a=await(0,$.GG)(e);a.forEach(e=>{r.push({uid:e.id,...e.data()})})}}const d=await Promise.all(r.map(async e=>{const t=(0,$.P)((0,$.rJ)(ee,"reviews"),(0,$._M)("userId","==",e.uid),(0,$.My)("createdAt","desc"),(0,$.AB)(1)),a=await(0,$.GG)(t);let s=null;if(!a.empty){const e=a.docs[0].data();s={...e,restaurantName:i.get(e.restaurantId)||"Unknown Restaurant"}}return{...e,lastReview:s}}));e.value=d,t.value=!1};(0,n.sV)(o);const l=e=>{s.value=e,a.value=!0},i=()=>{a.value=!1,s.value=null};return{followers:e,loading:t,isReviewsModalVisible:a,userForReviews:s,openReviewsModal:l,closeReviewsModal:i}}},Co=(0,Le.A)(fo,[["render",Ro],["__scopeId","data-v-37e2860a"]]),bo=Co,Mo={class:"bucket-list-page"},Eo={class:"page-header"},Io={class:"view-toggle"},Uo={key:0,class:"loading-indicator"},zo={key:1,class:"no-items-message"},So={key:0},xo={key:1},No={key:2,class:"restaurant-list"},Po={class:"restaurant-details"},Fo={class:"restaurant-name"},Xo={class:"restaurant-meta"},_o=["title"],Ao={class:"rating-text"},Ko={class:"rating-count"},Bo={key:1,class:"distance"},Vo={class:"restaurant-address"},Ho={class:"restaurant-actions"},Go=["onClick"],To=["onClick"];function Do(e,t,a,s,l,i){const r=(0,n.g2)("StarRating");return(0,n.uX)(),(0,n.CE)("div",Mo,[(0,n.Lk)("div",Eo,[(0,n.Lk)("div",Io,[(0,n.Lk)("button",{onClick:t[0]||(t[0]=e=>s.showCompleted=!1),class:(0,o.C4)({active:!s.showCompleted})},"To Try",2),(0,n.Lk)("button",{onClick:t[1]||(t[1]=e=>s.showCompleted=!0),class:(0,o.C4)({active:s.showCompleted})},"Completed",2)])]),s.loading?((0,n.uX)(),(0,n.CE)("div",Uo,"Loading your bucket list...")):0===s.filteredItems.length?((0,n.uX)(),(0,n.CE)("div",zo,[s.showCompleted?((0,n.uX)(),(0,n.CE)("p",xo,"You haven't completed any bucket list items yet.")):((0,n.uX)(),(0,n.CE)("p",So,"Your bucket list is empty. Add some restaurants to try!"))])):((0,n.uX)(),(0,n.CE)("div",No,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.filteredItems,t=>((0,n.uX)(),(0,n.CE)("div",{key:t.id,class:"restaurant-item"},[(0,n.Lk)("div",Po,[(0,n.Lk)("span",Fo,(0,o.v_)(t.restaurant.name),1),(0,n.Lk)("div",Xo,[t.restaurant.averageRating>0?((0,n.uX)(),(0,n.CE)("div",{key:0,class:"rating",title:`${t.restaurant.averageRating.toFixed(2)} average rating`},[(0,n.bF)(r,{rating:t.restaurant.averageRating},null,8,["rating"]),(0,n.Lk)("span",Ao,(0,o.v_)(t.restaurant.averageRating.toFixed(1)),1),(0,n.Lk)("span",Ko,"("+(0,o.v_)(t.restaurant.ratingCount)+")",1)],8,_o)):(0,n.Q3)("",!0),null!==t.restaurant.distance?((0,n.uX)(),(0,n.CE)("span",Bo,(0,o.v_)(t.restaurant.distance.toFixed(1))+" miles away ",1)):(0,n.Q3)("",!0)]),(0,n.Lk)("span",Vo,[(0,n.eW)((0,o.v_)(t.restaurant.address),1),t.restaurant.city?((0,n.uX)(),(0,n.CE)(n.FK,{key:0},[(0,n.eW)(", "+(0,o.v_)(t.restaurant.city),1)],64)):(0,n.Q3)("",!0),t.restaurant.state?((0,n.uX)(),(0,n.CE)(n.FK,{key:1},[(0,n.eW)(", "+(0,o.v_)(t.restaurant.state),1)],64)):(0,n.Q3)("",!0),t.restaurant.zip?((0,n.uX)(),(0,n.CE)(n.FK,{key:2},[(0,n.eW)((0,o.v_)(t.restaurant.zip),1)],64)):(0,n.Q3)("",!0)])]),(0,n.Lk)("div",Ho,[(0,n.Lk)("button",{onClick:e=>s.removeFromBucketList(t.id),class:"action-btn delete-btn"},"Remove",8,Go),(0,n.Lk)("button",{class:"check-in-btn",onClick:a=>e.$emit("review-at",t.restaurantId)},"Review",8,To)])]))),128))]))])}const Jo={name:"BucketList",components:{StarRating:Ie},emits:["review-at"],setup(){const e=(0,J.KR)([]),t=(0,J.KR)(!0),a=(0,J.KR)(!1),s=(0,J.KR)(null);let o=()=>{};const l=()=>{const a=Z.currentUser;if(!a)return void(t.value=!1);const n=(0,$.P)((0,$.rJ)(ee,"bucketListItems"),(0,$._M)("userId","==",a.uid));o=(0,$.aQ)(n,async a=>{t.value=!0;const n=a.docs.map(e=>({id:e.id,...e.data()}));if(0===n.length)return e.value=[],void(t.value=!1);const o=[...new Set(n.map(e=>e.restaurantId))],l=new Map;if(o.length>0){for(let e=0;e<o.length;e+=30){const t=o.slice(e,e+30),a=(0,$.P)((0,$.rJ)(ee,"restaurants"),(0,$._M)((0,$.Fs)(),"in",t)),s=await(0,$.GG)(a);s.forEach(e=>l.set(e.id,{id:e.id,...e.data()}))}const t=(0,$.P)((0,$.rJ)(ee,"reviews"),(0,$._M)("restaurantId","in",o)),a=await(0,$.GG)(t),i={};a.forEach(e=>{const t=e.data();t.restaurantId&&"number"===typeof t.rating&&(i[t.restaurantId]||(i[t.restaurantId]={total:0,count:0}),i[t.restaurantId].total+=t.rating,i[t.restaurantId].count++)}),e.value=n.map(e=>{const t=l.get(e.restaurantId);if(!t)return null;const a=i[t.id];return t.averageRating=a?a.total/a.count:0,t.ratingCount=a?a.count:0,t.distance=s.value&&t.location?Ue(s.value.lat,s.value.lng,t.location.lat,t.location.lng):null,{...e,restaurant:t}}).filter(Boolean)}else e.value=[];t.value=!1})};(0,n.sV)(()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(e=>{s.value={lat:e.coords.latitude,lng:e.coords.longitude},l()},e=>{console.error("Error getting location for bucket list",e),l()}):l()}),(0,n.hi)(()=>{o()});const i=(0,n.EW)(()=>{const t=e.value.filter(e=>a.value?!!e.completedAt:!e.completedAt);return t.sort((e,t)=>null===e.restaurant.distance?1:null===t.restaurant.distance?-1:e.restaurant.distance-t.restaurant.distance)}),r=async e=>{confirm("Are you sure you want to remove this from your bucket list?")&&await(0,$.kd)((0,$.H9)(ee,"bucketListItems",e))},d=e=>{const t=encodeURIComponent(`${e.name}, ${e.address}`);return`https://www.google.com/maps/dir/?api=1&destination=${t}`},c=e=>{const t=encodeURIComponent(`${e.name}, ${e.address}`);return`https://www.google.com/search?q=${t}`};return{loading:t,showCompleted:a,filteredItems:i,removeFromBucketList:r,getDirectionsUrl:d,getDetailsUrl:c}}},Wo=(0,Le.A)(Jo,[["render",Do],["__scopeId","data-v-0d9a2091"]]),Qo=Wo,$o={class:"following-page"},Oo={key:0,class:"loading-indicator"},jo={key:1},qo={key:0,class:"no-users-message"},Zo={class:"user-card-content"},Yo={class:"user-info"},el=["src"],tl={class:"user-details"},al={class:"user-name"},sl={key:0,class:"last-review"},nl={class:"review-header"},ol={class:"review-body"},ll={key:0,class:"review-text"},il={key:1,class:"last-review no-review"},rl={class:"user-actions"},dl=["onClick"],cl=["onClick"];function ul(e,t,a,s,l,i){const r=(0,n.g2)("UserReviewsModal"),d=(0,n.g2)("StarRating");return(0,n.uX)(),(0,n.CE)(n.FK,null,[s.isReviewsModalVisible?((0,n.uX)(),(0,n.Wv)(r,{key:0,user:s.userForReviews,onClose:s.closeReviewsModal},null,8,["user","onClose"])):(0,n.Q3)("",!0),(0,n.Lk)("div",$o,[s.loading?((0,n.uX)(),(0,n.CE)("div",Oo,"Loading users you follow...")):((0,n.uX)(),(0,n.CE)("div",jo,[0===s.following.length?((0,n.uX)(),(0,n.CE)("div",qo,t[0]||(t[0]=[(0,n.Lk)("span",null,"You are not following anyone yet.",-1)]))):(0,n.Q3)("",!0),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.following,e=>((0,n.uX)(),(0,n.CE)("div",{key:e.uid,class:"user-card"},[(0,n.Lk)("div",Zo,[(0,n.Lk)("div",Yo,[(0,n.Lk)("img",{src:e.photoURL||"https://cdn-icons-png.flaticon.com/512/149/149071.png",class:"user-avatar",alt:"User",referrerpolicy:"no-referrer"},null,8,el),(0,n.Lk)("div",tl,[(0,n.Lk)("span",al,(0,o.v_)(e.displayName),1)])]),e.lastReview?((0,n.uX)(),(0,n.CE)("div",sl,[(0,n.Lk)("div",nl,[t[1]||(t[1]=(0,n.eW)(" Latest review: ",-1)),(0,n.Lk)("strong",null,(0,o.v_)(e.lastReview.restaurantName),1)]),(0,n.Lk)("div",ol,[(0,n.bF)(d,{rating:e.lastReview.rating},null,8,["rating"]),e.lastReview.text?((0,n.uX)(),(0,n.CE)("p",ll,'"'+(0,o.v_)(e.lastReview.text)+'"',1)):(0,n.Q3)("",!0)])])):((0,n.uX)(),(0,n.CE)("div",il," No reviews yet. "))]),(0,n.Lk)("div",rl,[(0,n.Lk)("button",{onClick:t=>s.openReviewsModal(e),class:"action-btn",title:"View Reviews"},t[2]||(t[2]=[(0,n.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor"},[(0,n.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,n.Lk)("path",{d:"M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H6l-2 2V4h16v12z"})],-1)]),8,dl),(0,n.Lk)("button",{onClick:t=>s.unfollowUser(e),class:"unfollow-btn"},"Unfollow",8,cl)])]))),128))]))])],64)}const vl={name:"Following",components:{StarRating:Ie,UserReviewsModal:Sa},setup(){const e=(0,J.KR)([]),t=(0,J.KR)(!0),a=(0,J.KR)(!1),s=(0,J.KR)(null);let o=()=>{};const l=async()=>{t.value=!0;const a=Z.currentUser;if(!a)return void(t.value=!1);const s=(0,$.P)((0,$.rJ)(ee,"follows"),(0,$._M)("followerId","==",a.uid));o=(0,$.aQ)(s,async a=>{const s=a.docs.map(e=>e.data().followingId);if(0===s.length)return e.value=[],void(t.value=!1);const n=await(0,$.GG)((0,$.rJ)(ee,"restaurants")),o=new Map;n.forEach(e=>{o.set(e.id,e.data().name)});const l=[];for(let e=0;e<s.length;e+=30){const t=s.slice(e,e+30);if(t.length>0){const e=(0,$.P)((0,$.rJ)(ee,"users"),(0,$._M)("uid","in",t)),a=await(0,$.GG)(e);a.forEach(e=>{l.push({uid:e.id,...e.data()})})}}const i=await Promise.all(l.map(async e=>{const t=(0,$.P)((0,$.rJ)(ee,"reviews"),(0,$._M)("userId","==",e.uid),(0,$.My)("createdAt","desc"),(0,$.AB)(1)),a=await(0,$.GG)(t);let s=null;if(!a.empty){const e=a.docs[0].data();s={...e,restaurantName:o.get(e.restaurantId)||"Unknown Restaurant"}}return{...e,lastReview:s}}));e.value=i,t.value=!1})};(0,n.sV)(l),(0,n.hi)(()=>o());const i=async e=>{const t=Z.currentUser;if(t&&window.confirm(`Are you sure you want to unfollow ${e.displayName}?`))try{const a=(0,$.P)((0,$.rJ)(ee,"follows"),(0,$._M)("followerId","==",t.uid),(0,$._M)("followingId","==",e.uid)),s=await(0,$.GG)(a);if(!s.empty){const e=s.docs[0].id;await(0,$.kd)((0,$.H9)(ee,"follows",e))}}catch(a){console.error("Error unfollowing user:",a),alert("Failed to unfollow user. Please try again.")}},r=e=>{s.value=e,a.value=!0},d=()=>{a.value=!1,s.value=null};return{following:e,loading:t,unfollowUser:i,isReviewsModalVisible:a,userForReviews:s,openReviewsModal:r,closeReviewsModal:d}}},pl=(0,Le.A)(vl,[["render",ul],["__scopeId","data-v-1cf2c834"]]),gl=pl;async function hl(){const e=[{name:"The Chocolate Moose",address:"101 N Main St",city:"Farmland",state:"IN",zip:"47340",url:"",location:{lat:40.1878913,lng:-85.1279397},description:"",photoURL:""},{name:"Smitty's Bar & Grill",address:"125 Mall St",city:"Leonore",state:"IL",zip:"61332",url:"",location:{lat:41.1887214,lng:-88.9804186},description:"",photoURL:""},{name:"The Wooden Spoon Diner",address:"5120 S Dale Mabry Hwy",city:"Tampa",state:"FL",zip:"33611",url:"",location:{lat:27.9255773,lng:-82.2708432},description:"",photoURL:""},{name:"Mutts On 13th",address:"1517 13th St",city:"St Cloud",state:"FL",zip:"34769",url:"",location:{lat:28.2457148,lng:-81.2865585},description:"",photoURL:""},{name:"The Cup Diner",address:"1418 13th St",city:"St Cloud",state:"FL",zip:"34769",url:"",location:{lat:28.2456404,lng:-81.2851104},description:"",photoURL:""},{name:"Edinburgh Diner",address:"221 E Main Cross St",city:"Edinburgh",state:"IN",zip:"46124",url:"",location:{lat:39.3514394,lng:-85.9715215},description:"",photoURL:""},{name:"Moon Glo Bar & Grill",address:"1204 E Main St",city:"Westville",state:"IL",zip:"61883",url:"",location:{lat:40.1041169,lng:-87.5640457},description:"",photoURL:""},{name:"One Eyed Jack's",address:"108 N Monticello St",city:"Winamac",state:"IN",zip:"46996",url:"",location:{lat:41.0517368,lng:-86.6043211},description:"",photoURL:""},{name:"ACME by Full Circle",address:"1105 E State Blvd",city:"Fort Wayne",state:"IN",zip:"46805",url:"",location:{lat:41.096893,lng:-85.1248578},description:"",photoURL:""},{name:"Bufordâ€™s",address:"201 E North St",city:"Cisco",state:"IL",zip:"61830",url:"",location:{lat:39.9665963,lng:-88.3455253},description:"",photoURL:""},{name:"The Dirty Bird - Sycamore",address:"160 W Lincoln Hwy",city:"Sycamore",state:"IL",zip:"60178",url:"",location:{lat:41.9878971,lng:-88.6858541},description:"",photoURL:""},{name:"Bernadotte Cafe & bar",address:"2390 IL-95",city:"Ipava",state:"IL",zip:"61441",url:"",location:{lat:40.4021405,lng:-90.3215325},description:"",photoURL:""},{name:"Diesel Tap House",address:"2669 Buford Hwy NE",city:"Buford",state:"GA",zip:"30518",url:"",location:{lat:34.1237945,lng:-83.9849624},description:"",photoURL:""},{name:"Chubbies Pub And Grub",address:"1201 S Huntington St",city:"Syracuse",state:"IN",zip:"46567",url:"",location:{lat:41.407773,lng:-85.7464621},description:"",photoURL:""},{name:"Rustic Cafe",address:"101 W 2nd St",city:"Delphos",state:"OH",zip:"45833",url:"",location:{lat:40.8435363,lng:-84.339261},description:"",photoURL:""},{name:"Sheridan's Walton Tap Inc",address:"101 Main St",city:"Walton",state:"IL",zip:"61376",url:"",location:{lat:41.7153329,lng:-89.4387486},description:"",photoURL:""},{name:"The Tin Plate, Fine Food & Spirits",address:"211 S Anderson St",city:"Elwood",state:"IN",zip:"46036",url:"",location:{lat:40.2675543,lng:-85.8312155},description:"",photoURL:""},{name:"Nick's Kitchen",address:"506 N Jefferson St",city:"Huntington",state:"IN",zip:"46750",url:"",location:{lat:40.8827217,lng:-85.4959158},description:"",photoURL:""},{name:"Route No. 73 Brew & Chew",address:"111 S Main St",city:"Pearl City",state:"IL",zip:"61062",url:"",location:{lat:42.2652713,lng:-89.8258878},description:"",photoURL:""},{name:"St Philipâ€™s Inn",address:"11200 Upper Mt Vernon Rd",city:"Evansville",state:"IN",zip:"47712",url:"",location:{lat:37.9930135,lng:-87.7137676},description:"",photoURL:""},{name:"Miller's Tavern",address:"230 E Main St",city:"North Vernon",state:"IN",zip:"47265",url:"",location:{lat:39.0053468,lng:-85.6248876},description:"",photoURL:""},{name:"Pudgee's Eatery and Market",address:"105 S Main St",city:"Wildwood",state:"FL",zip:"34785",url:"",location:{lat:28.7728958,lng:-82.2946701},description:"",photoURL:""},{name:"Dooley O'Toole's",address:"160 E Carmel Dr",city:"Carmel",state:"IN",zip:"46032",url:"",location:{lat:39.9618023,lng:-86.1241367},description:"",photoURL:""},{name:"Mac's Diner",address:"109 W Main St",city:"Litchfield",state:"IL",zip:"62056",url:"",location:{lat:39.2554588,lng:-89.3470077},description:"",photoURL:""},{name:"Motor Inn Travel Plaza",address:"1800 E Lincoln Hwy",city:"Wapakoneta",state:"OH",zip:"45895",url:"",location:{lat:40.6522766,lng:-84.5810121},description:"",photoURL:""},{name:"Pilgrim Family Restaurant",address:"1505 W Main Cross St",city:"Findlay",state:"OH",zip:"45840",url:"",location:{lat:41.0418201,lng:-83.6752141},description:"",photoURL:""},{name:"Benny's Off the Water",address:"11331 E Daugherty Ln",city:"Milltown",state:"IN",zip:"47145",url:"",location:{lat:38.3792719,lng:-86.6433131},description:"",photoURL:""},{name:"Steve's Place",address:"2110 Cleveland Ave",city:"Fort Myers",state:"FL",zip:"33901",url:"",location:{lat:26.6902724,lng:-81.862471},description:"",photoURL:""},{name:"Storie's Restaurant",address:"109 E Main St",city:"Greensburg",state:"IN",zip:"47240",url:"",location:{lat:39.3364564,lng:-85.4837691},description:"",photoURL:""},{name:"Klooz Brewz, Brewery & Public House",address:"125 N Main St",city:"Lebanon",state:"IN",zip:"46052",url:"",location:{lat:40.048319,lng:-86.4677371},description:"",photoURL:""},{name:"Brothers Family Restaurant",address:"2400 16th St",city:"Moline",state:"IL",zip:"61265",url:"",location:{lat:41.5790331,lng:-90.35113},description:"",photoURL:""},{name:"The Grill",address:"101 W Main St",city:"Greenfield",state:"IN",zip:"46140",url:"",location:{lat:39.8902869,lng:-85.9301673},description:"",photoURL:""},{name:"Westwoods Lodge Pub & Grill",address:"2406 W Jefferson St",city:"Springfield",state:"IL",zip:"62702",url:"",location:{lat:39.8129372,lng:-89.6964892},description:"",photoURL:""},{name:"The 318 Restaurant",address:"318 N Main St",city:"Farmer City",state:"IL",zip:"61842",url:"",location:{lat:41.1212189,lng:-88.8320081},description:"",photoURL:""},{name:"Park Restaurant",address:"20 S Park Ave",city:"New Castle",state:"IN",zip:"47362",url:"",location:{lat:39.9165274,lng:-85.384495},description:"",photoURL:""},{name:"Crossroads Family Restaurant",address:"7230 US-52",city:"West Harrison",state:"IN",zip:"47060",url:"",location:{lat:39.07,lng:-85.2605556},description:"",photoURL:""},{name:"John's Famous Stew",address:"1146 Kentucky Ave",city:"Indianapolis",state:"IN",zip:"46221",url:"",location:{lat:39.7526208,lng:-86.177867},description:"",photoURL:""},{name:"Uncle Vait's Pizza",address:"101 N Main St",city:"Forrest",state:"IL",zip:"61741",url:"",location:{lat:40.6416779,lng:-88.7911391},description:"",photoURL:""},{name:"Palomino Club",address:"489 IL-48",city:"Taylorville",state:"IL",zip:"62568",url:"",location:{lat:39.5601053,lng:-89.2977649},description:"",photoURL:""},{name:"Oaken Barrel Brewing Company",address:"50 N Airport Pkwy",city:"Greenwood",state:"IN",zip:"46143",url:"",location:{lat:39.6156667,lng:-86.0906583},description:"",photoURL:""},{name:"Lee'z Place Bar & Grill",address:"120 W Main St",city:"Sheridan",state:"IL",zip:"60551",url:"",location:{lat:41.6306918,lng:-88.6536323},description:"",photoURL:""},{name:"Warsaw Brewery LLC",address:"100 N Main St",city:"Warsaw",state:"IL",zip:"62379",url:"",location:{lat:40.3661155,lng:-91.4303207},description:"",photoURL:""},{name:"POUR HOUSE BAR & GRILL",address:"101 E Main St",city:"Lowell",state:"IN",zip:"46356",url:"",location:{lat:41.1448683,lng:-87.2751526},description:"",photoURL:""},{name:"Spoonies Bar & Grill",address:"101 N Main St",city:"London Mills",state:"IL",zip:"61544",url:"",location:{lat:40.7125342,lng:-90.2665742},description:"",photoURL:""},{name:"Ashers Bar & Grill",address:"101 N Main St",city:"East Peoria",state:"IL",zip:"61611",url:"",location:{lat:40.5697057,lng:-89.6472241},description:"",photoURL:""},{name:"B&K Root Beer",address:"501 N Jefferson St",city:"Huntington",state:"IN",zip:"46750",url:"",location:{lat:40.8718,lng:-85.4848},description:"",photoURL:""},{name:"Chubby's Restaurant",address:"4470 E Parkway",city:"Gatlinburg",state:"TN",zip:"37738",url:"",location:{lat:35.8640001,lng:-83.5173536},description:"",photoURL:""},{name:"Hwy 441 Diner",address:"101 US-441",city:"Tavares",state:"FL",zip:"32778",url:"",location:{lat:28.8177313,lng:-81.7258853},description:"",photoURL:""},{name:"Spanky's Food & Spirits",address:"101 E Main St",city:"Mattoon",state:"IL",zip:"61938",url:"",location:{lat:39.4744133,lng:-88.3790938},description:"",photoURL:""},{name:"Woody's Diner",address:"101 N Main St",city:"Ada",state:"OH",zip:"45810",url:"",location:{lat:40.469305,lng:-83.864927},description:"",photoURL:""},{name:"The Pavillion",address:"101 N Main St",city:"Carrollton",state:"IL",zip:"62016",url:"",location:{lat:39.2969779,lng:-90.6085052},description:"",photoURL:""},{name:"Beamer's Drive In",address:"101 N Michigan St",city:"Plymouth",state:"IN",zip:"46563",url:"",location:{lat:41.2455957,lng:-86.2488534},description:"",photoURL:""},{name:"Bonge's Tavern",address:"9830 W 280 N",city:"Perkinsville",state:"IN",zip:"46011",url:"",location:{lat:40.1439002,lng:-85.8592702},description:"",photoURL:""},{name:"Millie's Chill & Grill",address:"101 N Main St",city:"Le Roy",state:"IL",zip:"61752",url:"",location:{lat:40.3468917,lng:-88.7631083},description:"",photoURL:""},{name:"Pub 15",address:"101 E Main St",city:"Bedford",state:"IN",zip:"47421",url:"",location:{lat:38.8623495,lng:-86.483406},description:"",photoURL:""},{name:"Ale Emporium",address:"8617 E 116th St",city:"Fishers",state:"IN",zip:"46038",url:"",location:{lat:39.6357849,lng:-86.0847304},description:"",photoURL:""},{name:"Vinny's Drive Bar",address:"5515 W 10th St",city:"Indianapolis",state:"IN",zip:"46224",url:"",location:{lat:39.7760762,lng:-86.2499069},description:"",photoURL:""},{name:"Edon Dairy Treat",address:"101 W Indiana St",city:"Edon",state:"OH",zip:"43518",url:"",location:{lat:41.5556052,lng:-84.769398},description:"",photoURL:""},{name:"The Warehouse",address:"101 N Main St",city:"Glasford",state:"IL",zip:"61533",url:"",location:{lat:40.692562,lng:-89.79551},description:"",photoURL:""},{name:"TS18",address:"101 N Main St",city:"Alexis",state:"IL",zip:"61412",url:"",location:{lat:40.9348577,lng:-90.9564871},description:"",photoURL:""},{name:"101 Beer Kitchen",address:"9708 District N Dr",city:"Fishers",state:"IN",zip:"46037",url:"",location:{lat:39.9630004,lng:-86.1272315},description:"",photoURL:""},{name:"Upland Carmel Tap House",address:"820 E 116th St",city:"Carmel",state:"IN",zip:"46032",url:"",location:{lat:39.956704,lng:-86.142971},description:"",photoURL:""},{name:"Charcoal House Tavern",address:"101 N Main St",city:"Jerseyville",state:"IL",zip:"62052",url:"",location:{lat:39.1159484,lng:-90.3378871},description:"",photoURL:""},{name:"Old Richmond Inn",address:"138 S 5th St",city:"Richmond",state:"IN",zip:"47374",url:"",location:{lat:39.8262198,lng:-84.8957573},description:"",photoURL:""},{name:"The End Zone Sports Bar & Grill",address:"2408 N 4th St",city:"Lafayette",state:"IN",zip:"47904",url:"",location:{lat:40.3676036,lng:-86.8675601},description:"",photoURL:""},{name:"Clinch River Brewing",address:"2045 Norris Fwy",city:"Norris",state:"TN",zip:"37828",url:"",location:{lat:36.2156441,lng:-84.0761352},description:"",photoURL:""},{name:"Kilroy's Bar & Grill",address:"201 S Meridian St",city:"Indianapolis",state:"IN",zip:"46225",url:"",location:{lat:39.7640751,lng:-86.1580203},description:"",photoURL:""},{name:"Cozy Corner Restaurant",address:"101 N Main St",city:"Farmer City",state:"IL",zip:"61842",url:"",location:{lat:41.1212478,lng:-88.8263441},description:"",photoURL:""},{name:"Pejza's Lydick Patio",address:"26444 US-20",city:"South Bend",state:"IN",zip:"46628",url:"",location:{lat:41.6936159,lng:-86.3791797},description:"",photoURL:""},{name:"Green Street Pub and Eatery",address:"911 N Green St",city:"Brownsburg",state:"IN",zip:"46112",url:"",location:{lat:39.8551354,lng:-86.3905701},description:"",photoURL:""},{name:"Coal Miner's Cafe",address:"101 N Main St",city:"Ladd",state:"IL",zip:"61329",url:"",location:{lat:41.2648639,lng:-89.2500956},description:"",photoURL:""},{name:"Taxman Fortville",address:"29 S Main St",city:"Fortville",state:"IN",zip:"46040",url:"",location:{lat:39.9335792,lng:-85.849132},description:"",photoURL:""},{name:"Ziggie's Pub and Eatery",address:"101 E Main St",city:"Columbus",state:"IN",zip:"47201",url:"",location:{lat:39.2294262,lng:-85.8989943},description:"",photoURL:""},{name:"Brickyard Bar & Grill",address:"101 N Main St",city:"Abingdon",state:"IL",zip:"61410",url:"",location:{lat:40.9474013,lng:-90.3101405},description:"",photoURL:""},{name:"The Breezeway Restaurant & Bar",address:"112 E 1st St",city:"Sanford",state:"FL",zip:"32771",url:"",location:{lat:28.8120179,lng:-81.2674339},description:"",photoURL:""},{name:"Midway Bar and Grill",address:"101 N Main St",city:"Morrisonville",state:"IL",zip:"62546",url:"",location:{lat:39.351435,lng:-89.5368671},description:"",photoURL:""},{name:"Grindstone Charley's",address:"101 N Main St",city:"Kokomo",state:"IN",zip:"46901",url:"",location:{lat:40.4413687,lng:-86.1264795},description:"",photoURL:""},{name:"rudy's restaurant",address:"101 N Main St",city:"Macomb",state:"IL",zip:"61455",url:"",location:{lat:40.2299838,lng:-90.9507491},description:"",photoURL:""},{name:"Amazing Joe's Grill",address:"909 N Wheeling Ave",city:"Muncie",state:"IN",zip:"47303",url:"",location:{lat:40.2014959,lng:-85.3928802},description:"",photoURL:""},{name:"Get It-N-Go",address:"101 N Main St",city:"Vincennes",state:"IN",zip:"47591",url:"",location:{lat:38.667684,lng:-87.5228811},description:"",photoURL:""},{name:"Route 66 Motorheads Bar and Grill",address:"600 Toronto Rd",city:"Springfield",state:"IL",zip:"62711",url:"",location:{lat:39.7129834,lng:-89.6474113},description:"",photoURL:""},{name:"C.R. Heroes",address:"10570 E 96th St",city:"Fishers",state:"IN",zip:"46037",url:"",location:{lat:39.9281489,lng:-85.9828434},description:"",photoURL:""},{name:"Plump's Last Shot",address:"6416 Cornell Ave",city:"Indianapolis",state:"IN",zip:"46220",url:"",location:{lat:39.8731604,lng:-86.1427212},description:"",photoURL:""},{name:"Sunoco Gas Station",address:"101 N Main St",city:"Crawfordsville",state:"IN",zip:"47933",url:"",location:{lat:40.0740639,lng:-86.9064353},description:"",photoURL:""},{name:"Hy-Vee Grocery Store",address:"1403 N Veterans Pkwy",city:"Bloomington",state:"IL",zip:"61704",url:"",location:{lat:40.4975074,lng:-88.9498779},description:"",photoURL:""},{name:"5th Ave. Grill and Bar",address:"7811 E 38th St",city:"Indianapolis",state:"IN",zip:"46226",url:"",location:{lat:39.7214534,lng:-86.0870901},description:"",photoURL:""},{name:"Fire & Ale",address:"2521 N Dirksen Pkwy",city:"Springfield",state:"IL",zip:"62702",url:"",location:{lat:39.8989313,lng:-89.602574},description:"",photoURL:""},{name:"Brickhouse Grill & Pub",address:"2 W Old State Capitol Plaza",city:"Springfield",state:"IL",zip:"62701",url:"",location:{lat:39.7704966,lng:-89.7134519},description:"",photoURL:""},{name:"Union Station Cafe",address:"101 N Main St",city:"Linton",state:"IN",zip:"47441",url:"",location:{lat:39.0688256,lng:-87.2598312},description:"",photoURL:""},{name:"Wolfies Grill - Noblesville",address:"137 W Jackson St",city:"Noblesville",state:"IN",zip:"46060",url:"",location:{lat:40.09337,lng:-86.033878},description:"",photoURL:""},{name:"Frost Bite",address:"5530 W 10th St",city:"Indianapolis",state:"IN",zip:"46224",url:"",location:{lat:39.761425,lng:-86.3992234},description:"",photoURL:""},{name:"Artists Colony Inn & Restaurant",address:"105 S Van Buren St",city:"Nashville",state:"IN",zip:"47448",url:"",location:{lat:39.2059036,lng:-86.2465464},description:"",photoURL:""},{name:"Erika's Place",address:"102 S Union St",city:"Westfield",state:"IN",zip:"46074",url:"",location:{lat:40.0468522,lng:-86.01525},description:"",photoURL:""},{name:"Burnt Bridge Tavern",address:"101 N Main St",city:"Conover",state:"WI",zip:"54519",url:"",location:{lat:46.0409008,lng:-89.3332199},description:"",photoURL:""},{name:"Brew Brothers",address:"101 N Main St",city:"Shelbyville",state:"IN",zip:"46176",url:"",location:{lat:39.5892831,lng:-85.8249454},description:"",photoURL:""},{name:"Schneider's Pub",address:"101 N Main St",city:"Indianapolis",state:"IN",zip:"46227",url:"",location:{lat:39.6507001,lng:-86.1570132},description:"",photoURL:""},{name:"Barn Bites Food Truck",address:"101 N Main St",city:"Columbia",state:"SC",zip:"29201",url:"",location:{lat:34.0188277,lng:-81.0416959},description:"",photoURL:""},{name:"The BillBoard Bistro",address:"101 N Main St",city:"Peoria",state:"IL",zip:"61602",url:"",location:{lat:40.6478199,lng:-89.6501383},description:"",photoURL:""},{name:"Star 34 Cafe",address:"101 N Main St",city:"Earlville",state:"IL",zip:"60518",url:"",location:{lat:41.6437872,lng:-88.626736},description:"",photoURL:""},{name:"Dutchman's Diner",address:"101 N Main St",city:"Odon",state:"IN",zip:"47562",url:"",location:{lat:38.785942,lng:-86.9973526},description:"",photoURL:""},{name:"Lilly's Super subs",address:"101 N Main St",city:"Leesburg",state:"FL",zip:"34748",url:"",location:{lat:28.8206323,lng:-81.7737903},description:"",photoURL:""},{name:"Rusty's Raw Bar & Grill - Estero",address:"20041 S Tamiami Trail",city:"Estero",state:"FL",zip:"33928",url:"",location:{lat:26.4482963,lng:-81.8163087},description:"",photoURL:""},{name:"Milkeyâ€™s Place",address:"101 N Main St",city:"Pittsfield",state:"IL",zip:"62363",url:"",location:{lat:39.6946024,lng:-91.0411068},description:"",photoURL:""},{name:"Tried & True Alehouse",address:"2800 S State Rd 135",city:"Greenwood",state:"IN",zip:"46143",url:"",location:{lat:39.5768141,lng:-86.16056},description:"",photoURL:""},{name:"Jonesy's Junction",address:"101 N Main St",city:"North Manchester",state:"IN",zip:"46962",url:"",location:{lat:41.0377576,lng:-86.0183211},description:"",photoURL:""},{name:"Golden Basket Breakfast Club",address:"101 N Main St",city:"Downers Grove",state:"IL",zip:"60515",url:"",location:{lat:41.7971662,lng:-87.9752232},description:"",photoURL:""},{name:"Blue's Cafe",address:"101 N Main St",city:"Watseka",state:"IL",zip:"60970",url:"",location:{lat:41.1184544,lng:-87.8814518},description:"",photoURL:""},{name:"Crossroads 46 Diner",address:"4600 W State Road 46",city:"Spencer",state:"IN",zip:"47460",url:"",location:{lat:39.2872021,lng:-86.7696225},description:"",photoURL:""},{name:"Restaurant Edelweiss",address:"611 Manatee Ave E",city:"Bradenton",state:"FL",zip:"34208",url:"",location:{lat:27.4955656,lng:-82.5570352},description:"",photoURL:""},{name:"Kirby Foods Deli Counter",address:"101 N Main St",city:"Washington",state:"IL",zip:"61571",url:"",location:{lat:40.7899109,lng:-89.3699824},description:"",photoURL:""},{name:"Black Dog Pub",address:"4910 N Clinton St",city:"Fort Wayne",state:"IN",zip:"46825",url:"",location:{lat:41.059358,lng:-85.221755},description:"",photoURL:""},{name:"Hall's Tavern at Coventry",address:"5745 Coventry Ln",city:"Fort Wayne",state:"IN",zip:"46804",url:"",location:{lat:41.0336769,lng:-85.256286},description:"",photoURL:""},{name:"Opie's Bar & Grill",address:"101 N Main St",city:"Galesburg",state:"IL",zip:"61401",url:"",location:{lat:40.9491977,lng:-90.3714336},description:"",photoURL:""},{name:"Seasons Gastropub",address:"101 N Main St",city:"Morton",state:"IL",zip:"61550",url:"",location:{lat:40.6100171,lng:-89.462774},description:"",photoURL:""},{name:"Missy's Corner Cafe",address:"101 N Main St",city:"Pekin",state:"IL",zip:"61554",url:"",location:{lat:40.5586245,lng:-89.6156359},description:"",photoURL:""},{name:"Sunshine CafÃ©",address:"101 N Main St",city:"Seymour",state:"IN",zip:"47274",url:"",location:{lat:38.958975,lng:-85.84018},description:"",photoURL:""},{name:"Aristocrat Pub & Oxford Room",address:"5212 N College Ave",city:"Indianapolis",state:"IN",zip:"46220",url:"",location:{lat:39.8472823,lng:-86.1460157},description:"",photoURL:""},{name:"Barbecue and Bourbon",address:"1414 N Main St",city:"Speedway",state:"IN",zip:"46224",url:"",location:{lat:39.7855103,lng:-86.2413919},description:"",photoURL:""},{name:"Charlie Parker's Diner",address:"700 W North St",city:"Springfield",state:"IL",zip:"62704",url:"",location:{lat:39.7660325,lng:-89.6635417},description:"",photoURL:""}];for(const t of e)await(0,$.gS)((0,$.rJ)(ee,"restaurants"),t);alert("Sample data seeded!")}const ml={name:"App",components:{Home:xe,Restaurants:Jt,BucketList:Qo,UserSearch:Pa,Review:Ls,Recommendations:Hs,DatabaseStats:tn,MyReviews:Tn,Leaderboard:no,Followers:bo,Following:gl},setup(){const e=(0,J.KR)(null),t=(0,J.KR)("home"),a=(0,J.KR)(null),s=(0,J.KR)(window.innerWidth<768),o=(0,J.KR)(!1),l=(0,J.KR)(null);let i=!1;const r=()=>{o.value=!1,l.value&&l.value.waiting&&l.value.waiting.postMessage({type:"SKIP_WAITING"})},d=e=>{l.value=e.detail,o.value=!0};document.addEventListener("swUpdated",d,{once:!0}),navigator.serviceWorker.addEventListener("controllerchange",()=>{i||(i=!0,window.location.reload())});const c=(0,n.EW)(()=>e.value&&"kennected.com@gmail.com"===e.value.email),u={home:"Home",restaurants:"Restaurants","bucket-list":"BucketList","user-search":"UserSearch",review:"Review","my-reviews":"MyReviews",recommendations:"Recommendations",leaderboard:"Leaderboard",cleanup:"Cleanup","database-stats":"DatabaseStats",followers:"Followers",following:"Following"},v=(0,n.EW)(()=>u[t.value]||"Home"),p=()=>{s.value=!s.value};window.addEventListener("resize",()=>{s.value=window.innerWidth<768}),(0,Q.hg)(Z,async t=>{if(e.value=t,t){const e=(0,$.H9)(ee,"users",t.uid),a=await(0,$.x7)(e);a.exists()||await(0,$.BN)(e,{uid:t.uid,displayName:t.displayName,email:t.email,photoURL:t.photoURL,createdAt:new Date,reviewCount:0})}});const g=async()=>{try{await(0,Q.df)(Z,Y)}catch(e){alert("Login failed: "+e.message)}},h=async()=>{await(0,Q.CI)(Z)},m=()=>{t.value="home"},w=()=>{t.value="restaurants"},k=()=>{t.value="user-search"},L=()=>{t.value="review"},y=()=>{t.value="my-reviews"},R=()=>{t.value="recommendations"},f=()=>{t.value="leaderboard"},C=()=>{t.value="database-stats"},b=()=>{t.value="followers"},M=()=>{t.value="following"},E=()=>{t.value="bucket-list"},I=e=>{a.value=e,t.value="review"};return{user:e,loginWithGoogle:g,logout:h,seedSampleData:hl,currentPage:t,goToHome:m,goToRestaurants:w,goToUserSearch:k,goToReview:L,goToMyReviews:y,goToRecommendations:R,goToLeaderboard:f,goToDatabaseStats:C,goToFollowers:b,goToFollowing:M,goToBucketList:E,reviewAt:I,selectedRestaurantForReview:a,isSidebarCollapsed:s,toggleSidebar:p,isAdmin:c,currentComponent:v,updateExists:o,refreshApp:r}}},wl=(0,Le.A)(ml,[["render",w]]),kl=wl;var Ll=a(723);(0,Ll.k)("/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh."),document.dispatchEvent(new CustomEvent("swUpdated",{detail:registration}))},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}}),(0,s.Ef)(kl).mount("#app")},914:(e,t,a)=>{a.d(t,{geocodeAddress:()=>n});const s="kennected.com@gmail.com";async function n(e){if(!e||!e.trim())return console.error("Geocoding error: Address is empty."),null;const t=`https://nominatim.openstreetmap.org/search?q=${encodeURIComponent(e)}&format=json&limit=1&email=${s}`;try{const e=await fetch(t),a=await e.json();if(a&&a.length>0){const{lat:e,lon:t}=a[0];return{lat:parseFloat(e),lng:parseFloat(t)}}return null}catch(a){return console.error("Error during geocoding fetch:",a),null}}}},t={};function a(s){var n=t[s];if(void 0!==n)return n.exports;var o=t[s]={exports:{}};return e[s](o,o.exports,a),o.exports}a.m=e,(()=>{var e=[];a.O=(t,s,n,o)=>{if(!s){var l=1/0;for(c=0;c<e.length;c++){for(var[s,n,o]=e[c],i=!0,r=0;r<s.length;r++)(!1&o||l>=o)&&Object.keys(a.O).every(e=>a.O[e](s[r]))?s.splice(r--,1):(i=!1,o<l&&(l=o));if(i){e.splice(c--,1);var d=n();void 0!==d&&(t=d)}}return t}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[s,n,o]}})(),(()=>{a.d=(e,t)=>{for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}})(),(()=>{a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})(),(()=>{var e={524:0};a.O.j=t=>0===e[t];var t=(t,s)=>{var n,o,[l,i,r]=s,d=0;if(l.some(t=>0!==e[t])){for(n in i)a.o(i,n)&&(a.m[n]=i[n]);if(r)var c=r(a)}for(t&&t(s);d<l.length;d++)o=l[d],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(c)},s=self["webpackChunkmy_vue_app"]=self["webpackChunkmy_vue_app"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})();var s=a.O(void 0,[504],()=>a(653));s=a.O(s)})();
//# sourceMappingURL=app.e0303849.js.map