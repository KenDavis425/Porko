(()=>{"use strict";var e={80:(e,t,a)=>{var s=a(751),n=a(641),o=a(33);const l={id:"app"},i={key:0,class:"login-container"},r={class:"sidebar"},c={class:"sidebar-top"},d={class:"sidebar-header"},u=["src"],v={class:"sidebar-user"},p={class:"sidebar-nav"},g={class:"sidebar-bottom"},h={class:"main-content"};function m(e,t,a,s,m,w){return(0,n.uX)(),(0,n.CE)("div",l,[s.user?((0,n.uX)(),(0,n.CE)("div",{key:1,class:(0,o.C4)(["main-layout",{"sidebar-collapsed":s.isSidebarCollapsed}])},[(0,n.Lk)("aside",r,[(0,n.Lk)("div",c,[(0,n.Lk)("button",{class:"sidebar-toggle",onClick:t[1]||(t[1]=(...e)=>s.toggleSidebar&&s.toggleSidebar(...e)),title:"Toggle Sidebar"},t[17]||(t[17]=[(0,n.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor"},[(0,n.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,n.Lk)("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"})],-1)])),(0,n.Lk)("div",d,[(0,n.Lk)("img",{src:s.user.photoURL||"https://cdn-icons-png.flaticon.com/512/149/149071.png",class:"sidebar-avatar",alt:"User",referrerpolicy:"no-referrer"},null,8,u),(0,n.Lk)("div",v,(0,o.v_)(s.user.displayName),1)]),(0,n.Lk)("nav",p,[(0,n.Lk)("button",{class:(0,o.C4)(["sidebar-link",{active:"home"===s.currentPage}]),onClick:t[2]||(t[2]=(...e)=>s.goToHome&&s.goToHome(...e)),title:"Home"},t[18]||(t[18]=[(0,n.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor"},[(0,n.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,n.Lk)("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8h5z"})],-1),(0,n.Lk)("span",null,"Home",-1)]),2),(0,n.Lk)("button",{class:(0,o.C4)(["sidebar-link",{active:"review"===s.currentPage}]),onClick:t[3]||(t[3]=(...e)=>s.goToReview&&s.goToReview(...e)),title:"Write a Review"},t[19]||(t[19]=[(0,n.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor"},[(0,n.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,n.Lk)("path",{d:"M12 2C8.14 2 5 5.14 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.86-3.14-7-7-7zm-1.5 9h-2v-2h2v2zm5 0h-2v-2h2v2zm-2.5-4h-2V5h2v2z"})],-1),(0,n.Lk)("span",null,"Write a Review",-1)]),2),(0,n.Lk)("button",{class:(0,o.C4)(["sidebar-link",{active:"my-reviews"===s.currentPage}]),onClick:t[4]||(t[4]=(...e)=>s.goToMyReviews&&s.goToMyReviews(...e)),title:"My Reviews"},t[20]||(t[20]=[(0,n.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor"},[(0,n.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,n.Lk)("path",{d:"M3 13h2v-2H3v2zm0 4h2v-2H3v2zm0-8h2V7H3v2zm4 4h14v-2H7v2zm0 4h14v-2H7v2zM7 7v2h14V7H7z"})],-1),(0,n.Lk)("span",null,"My Reviews",-1)]),2),(0,n.Lk)("button",{class:(0,o.C4)(["sidebar-link",{active:"restaurants"===s.currentPage}]),onClick:t[5]||(t[5]=(...e)=>s.goToRestaurants&&s.goToRestaurants(...e)),title:"Restaurants"},t[21]||(t[21]=[(0,n.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor"},[(0,n.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,n.Lk)("path",{d:"M16 6v8h3v8h-3v-2h-2v2h-2v-2h-2v2H8v-2H6v2H3v-8h3V6c0-3.31 2.69-6 6-6s6 2.69 6 6zm-2 0c0-2.21-1.79-4-4-4s-4 1.79-4 4v8h8V6zm-5 3h2v2h-2z"})],-1),(0,n.Lk)("span",null,"Restaurants",-1)]),2),(0,n.Lk)("button",{class:(0,o.C4)(["sidebar-link",{active:"bucket-list"===s.currentPage}]),onClick:t[6]||(t[6]=(...e)=>s.goToBucketList&&s.goToBucketList(...e)),title:"Bucket List"},t[22]||(t[22]=[(0,n.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor"},[(0,n.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,n.Lk)("path",{d:"M18 7h-2.06c-.33-3.2-2.46-5.8-5.94-5.8S4.39 3.8 4.06 7H2v12h16V7zM6.14 7c.2-1.92 1.6-3.48 3.86-3.8A4.002 4.002 0 0 1 14 7h-2.14c-.2-1.92-1.6-3.48-3.86-3.8zM16 17H4v-8h12v8z"})],-1),(0,n.Lk)("span",null,"Bucket List",-1)]),2),(0,n.Lk)("button",{class:(0,o.C4)(["sidebar-link",{active:"recommendations"===s.currentPage}]),onClick:t[7]||(t[7]=(...e)=>s.goToRecommendations&&s.goToRecommendations(...e)),title:"Recommendations"},t[23]||(t[23]=[(0,n.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor"},[(0,n.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,n.Lk)("path",{d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27z"})],-1),(0,n.Lk)("span",null,"Recommendations",-1)]),2),(0,n.Lk)("button",{class:(0,o.C4)(["sidebar-link",{active:"leaderboard"===s.currentPage}]),onClick:t[8]||(t[8]=(...e)=>s.goToLeaderboard&&s.goToLeaderboard(...e)),title:"Leaderboard"},t[24]||(t[24]=[(0,n.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor"},[(0,n.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,n.Lk)("path",{d:"M16 11V3H8v6H2v12h20V11h-6zm-6-6h4v14h-4V5zm-6 6h4v8H4v-8zm16 8h-4v-8h4v8z"})],-1),(0,n.Lk)("span",null,"Leaderboard",-1)]),2),(0,n.Lk)("button",{class:(0,o.C4)(["sidebar-link",{active:"user-search"===s.currentPage}]),onClick:t[9]||(t[9]=(...e)=>s.goToUserSearch&&s.goToUserSearch(...e)),title:"Follow Users"},t[25]||(t[25]=[(0,n.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor"},[(0,n.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,n.Lk)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 5 1.41-1.41L15.5 14zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14zM12 10V7H8v3H5v2h3v3h2v-3h3v-2h-3z"})],-1),(0,n.Lk)("span",null,"Follow Users",-1)]),2),(0,n.Lk)("button",{class:(0,o.C4)(["sidebar-link",{active:"followers"===s.currentPage}]),onClick:t[10]||(t[10]=(...e)=>s.goToFollowers&&s.goToFollowers(...e)),title:"Followers"},t[26]||(t[26]=[(0,n.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor"},[(0,n.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,n.Lk)("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5s-3 1.34-3 3 1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"})],-1),(0,n.Lk)("span",null,"Followers",-1)]),2),(0,n.Lk)("button",{class:(0,o.C4)(["sidebar-link",{active:"following"===s.currentPage}]),onClick:t[11]||(t[11]=(...e)=>s.goToFollowing&&s.goToFollowing(...e)),title:"Following"},t[27]||(t[27]=[(0,n.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor"},[(0,n.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,n.Lk)("circle",{cx:"6.18",cy:"17.82",r:"2.18"}),(0,n.Lk)("path",{d:"M4 4.44v2.83c3.9 0 7.07 3.17 7.07 7.07h2.83c0-5.47-4.43-9.9-9.9-9.9zM4 10.1v2.83c2.39 0 4.33 1.94 4.33 4.33h2.83c0-3.98-3.23-7.16-7.16-7.16z"})],-1),(0,n.Lk)("span",null,"Following",-1)]),2)])]),(0,n.Lk)("div",g,[s.isAdmin?((0,n.uX)(),(0,n.CE)("button",{key:0,class:(0,o.C4)(["sidebar-link",{active:"database-stats"===s.currentPage}]),onClick:t[12]||(t[12]=(...e)=>s.goToDatabaseStats&&s.goToDatabaseStats(...e)),title:"Database Stats"},t[28]||(t[28]=[(0,n.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor"},[(0,n.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,n.Lk)("path",{d:"M5 9.2h3V19H5zM10.6 5h2.8v14h-2.8zm5.6 8H19v6h-2.8z"})],-1),(0,n.Lk)("span",null,"Database Stats",-1)]),2)):(0,n.Q3)("",!0),(0,n.Lk)("button",{class:"sidebar-link",onClick:t[13]||(t[13]=(...e)=>s.logout&&s.logout(...e)),title:"Logout"},t[29]||(t[29]=[(0,n.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor"},[(0,n.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,n.Lk)("path",{d:"M17 7l-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5-5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"})],-1),(0,n.Lk)("span",null,"Logout",-1)]))])]),(0,n.Lk)("main",h,[((0,n.uX)(),(0,n.Wv)((0,n.$y)(s.currentComponent),{onReviewed:s.goToHome,onCheckInAt:s.reviewAt,onReviewAt:s.reviewAt,onGoToReview:s.goToReview,"selected-restaurant-id":s.selectedRestaurantForReview},null,40,["onReviewed","onCheckInAt","onReviewAt","onGoToReview","selected-restaurant-id"]))])],2)):((0,n.uX)(),(0,n.CE)("div",i,[t[14]||(t[14]=(0,n.Lk)("img",{src:"/logo.svg",alt:"Porko Logo",class:"tenderloin-img"},null,-1)),t[15]||(t[15]=(0,n.Lk)("h2",null,"Welcome to Porko!",-1)),t[16]||(t[16]=(0,n.Lk)("p",{class:"login-desc"},"Find, review, and share the best breaded pork tenderloin sandwiches!",-1)),(0,n.Lk)("button",{class:"login-btn",onClick:t[0]||(t[0]=(...e)=>s.loginWithGoogle&&s.loginWithGoogle(...e))},"Login with Google")]))])}const w={class:"home-page"},L={key:0,class:"location-prompt-banner"},k={key:1,class:"location-prompt-banner warning"},y={class:"feed"},R={key:0,class:"loading-indicator"},f={key:1},C={key:0,class:"no-posts-message"},b={class:"post-header"},M=["src"],I={class:"post-info"},E={class:"user-line"},U={class:"user-name"},z={key:0,class:"medal"},S={class:"post-date"},x={class:"post-content"},N={class:"post-title-line"},P={class:"restaurant-title-group"},X={class:"restaurant-name"},F=["onClick","title"],_={key:0,class:"distance"},B={class:"review-body"},K={key:0,class:"review-text"},G=["src"],A={key:2,class:"tags-container"},H={ref:"loadMoreTrigger"},T={key:1,class:"loading-indicator"};function V(e,t,a,s,l,i){const r=(0,n.g2)("StarRating"),c=(0,n.g2)("Comments");return(0,n.uX)(),(0,n.CE)("div",w,["prompt"===s.locationPermission?((0,n.uX)(),(0,n.CE)("div",L,[t[1]||(t[1]=(0,n.Lk)("div",{class:"banner-content"},[(0,n.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor"},[(0,n.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,n.Lk)("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.86-3.14-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"})]),(0,n.Lk)("p",null,"Share your location to see posts and restaurants near you!")],-1)),(0,n.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>s.requestLocationAccess&&s.requestLocationAccess(...e)),class:"btn-primary"},"Share Location")])):(0,n.Q3)("",!0),"denied"===s.locationPermission?((0,n.uX)(),(0,n.CE)("div",k,t[2]||(t[2]=[(0,n.Lk)("div",{class:"banner-content"},[(0,n.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor"},[(0,n.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,n.Lk)("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"})]),(0,n.Lk)("p",null,"Location access is denied. To see local content, please enable location services for this site in your browser settings.")],-1)]))):(0,n.Q3)("",!0),(0,n.Lk)("div",y,[s.loading?((0,n.uX)(),(0,n.CE)("div",R,"Loading feed...")):((0,n.uX)(),(0,n.CE)("div",f,[0===s.posts.length?((0,n.uX)(),(0,n.CE)("div",C,t[3]||(t[3]=[(0,n.Lk)("h3",null,"Welcome to Porko!",-1),(0,n.Lk)("p",null,"Follow some users to see their reviews in your feed, or check out the Restaurants page to find new places.",-1)]))):(0,n.Q3)("",!0),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.posts,e=>((0,n.uX)(),(0,n.CE)("div",{key:e.id,class:"post-card"},[(0,n.Lk)("div",b,[(0,n.Lk)("img",{src:e.userPhoto||"https://cdn-icons-png.flaticon.com/512/149/149071.png",alt:"User",class:"user-avatar",referrerpolicy:"no-referrer"},null,8,M),(0,n.Lk)("div",I,[(0,n.Lk)("div",E,[(0,n.Lk)("span",U,(0,o.v_)(e.userName),1),e.medal?((0,n.uX)(),(0,n.CE)("span",z,(0,o.v_)(e.medal),1)):(0,n.Q3)("",!0)]),(0,n.Lk)("span",S,(0,o.v_)(e.createdAt.toDate().toLocaleString()),1)])]),(0,n.Lk)("div",x,[(0,n.Lk)("div",N,[(0,n.Lk)("div",P,[(0,n.Lk)("h4",X,(0,o.v_)(e.restaurantName),1),(0,n.Lk)("button",{onClick:t=>s.toggleBucketList(e),class:(0,o.C4)(["action-btn bucket-list-btn",{"in-bucket-list":s.isInBucketList(e.restaurantId)}]),title:s.isInBucketList(e.restaurantId)?"In Bucket List":"Add to Bucket List"},t[4]||(t[4]=[(0,n.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20px",viewBox:"0 0 24 24",width:"20px",fill:"currentColor"},[(0,n.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,n.Lk)("path",{d:"M18 7h-2.06c-.33-3.2-2.46-5.8-5.94-5.8S4.39 3.8 4.06 7H2v12h16V7zM6.14 7c.2-1.92 1.6-3.48 3.86-3.8A4.002 4.002 0 0 1 14 7h-2.14c-.2-1.92-1.6-3.48-3.86-3.8zM16 17H4v-8h12v8z"})],-1)]),10,F)]),null!==e.distance?((0,n.uX)(),(0,n.CE)("div",_,(0,o.v_)(e.distance.toFixed(1))+" miles away ",1)):(0,n.Q3)("",!0)]),(0,n.Lk)("div",B,[(0,n.bF)(r,{rating:e.rating},null,8,["rating"]),e.text?((0,n.uX)(),(0,n.CE)("p",K,'"'+(0,o.v_)(e.text)+'"',1)):(0,n.Q3)("",!0),e.photoURL?((0,n.uX)(),(0,n.CE)("img",{key:1,src:e.photoURL,alt:"Review photo",class:"review-photo"},null,8,G)):(0,n.Q3)("",!0),e.tags&&e.tags.length>0?((0,n.uX)(),(0,n.CE)("div",A,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.tags,e=>((0,n.uX)(),(0,n.CE)("span",{key:e,class:"tag"},(0,o.v_)(e),1))),128))])):(0,n.Q3)("",!0)]),(0,n.bF)(c,{"post-id":e.id,"post-type":"reviews","post-author-id":e.userId},null,8,["post-id","post-author-id"])])]))),128)),(0,n.Lk)("div",H,null,512),s.loadingMore?((0,n.uX)(),(0,n.CE)("div",T,"Loading more...")):(0,n.Q3)("",!0)]))])])}var D=a(953),J=a(223),W=a(962),Q=a(185),$=a(993);const O={apiKey:"AIzaSyDxzi70xuS1KxemDBF1logZ6zyHxINFfp4",authDomain:"porko-c0f87.firebaseapp.com",projectId:"porko-c0f87",storageBucket:"porko-c0f87.firebasestorage.app",messagingSenderId:"1050714930836",appId:"1:1050714930836:web:5b4c9bdf93e95748a23e81",measurementId:"G-3LCKP815FM"},q=(0,J.Wp)(O),j=(0,W.xI)(q),Z=new W.HF,Y=(0,Q.aU)(q),ee=((0,$.c7)(q),{class:"comments-section"}),te={class:"comment-list"},ae=["src","alt"],se={class:"comment-content"},ne={class:"comment-header"},oe={class:"comment-user-name"},le={class:"comment-date"},ie={key:0},re={class:"comment-text"},ce={class:"comment-actions"},de=["onClick"],ue=["onClick"],ve={key:1,class:"edit-comment"},pe={class:"edit-actions"},ge={class:"add-comment"},he=["disabled"];function me(e,t,a,l,i,r){return(0,n.uX)(),(0,n.CE)("div",ee,[(0,n.Lk)("div",te,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.comments,e=>((0,n.uX)(),(0,n.CE)("div",{key:e.id,class:"comment"},[(0,n.Lk)("img",{src:e.userPhoto||"https://cdn-icons-png.flaticon.com/512/149/149071.png",alt:e.userName,class:"comment-user-photo",referrerpolicy:"no-referrer"},null,8,ae),(0,n.Lk)("div",se,[(0,n.Lk)("div",ne,[(0,n.Lk)("span",oe,(0,o.v_)(e.userName),1),(0,n.Lk)("span",le,(0,o.v_)(l.formatDate(e.createdAt)),1)]),l.editingCommentId!==e.id?((0,n.uX)(),(0,n.CE)("div",ie,[(0,n.Lk)("p",re,(0,o.v_)(e.text),1),(0,n.Lk)("div",ce,[l.canEdit(e)?((0,n.uX)(),(0,n.CE)("button",{key:0,onClick:t=>l.startEditing(e),class:"action-btn"},"Edit",8,de)):(0,n.Q3)("",!0),l.canDelete(e)?((0,n.uX)(),(0,n.CE)("button",{key:1,onClick:t=>l.deleteComment(e.id),class:"action-btn delete"},"Delete",8,ue)):(0,n.Q3)("",!0)])])):((0,n.uX)(),(0,n.CE)("div",ve,[(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.editingText=e),onKeyup:t[1]||(t[1]=(0,s.jR)((...e)=>l.saveEdit&&l.saveEdit(...e),["enter"])),class:"edit-input"},null,544),[[s.Jo,l.editingText]]),(0,n.Lk)("div",pe,[(0,n.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>l.saveEdit&&l.saveEdit(...e)),class:"btn-primary"},"Save"),(0,n.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>l.cancelEdit&&l.cancelEdit(...e)),class:"btn-secondary"},"Cancel")])]))])]))),128))]),(0,n.Lk)("div",ge,[(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>l.newComment=e),placeholder:"Add a comment...",onKeyup:t[5]||(t[5]=(0,s.jR)((...e)=>l.addComment&&l.addComment(...e),["enter"]))},null,544),[[s.Jo,l.newComment]]),(0,n.Lk)("button",{onClick:t[6]||(t[6]=(...e)=>l.addComment&&l.addComment(...e)),disabled:!l.newComment.trim()},"Post",8,he)])])}const we={name:"Comments",props:{postId:{type:String,required:!0},postType:{type:String,required:!0},postAuthorId:{type:String,required:!0}},setup(e){const t=(0,D.KR)([]),a=(0,D.KR)(""),s=(0,D.KR)(null),o=(0,D.KR)("");let l=()=>{};(0,n.sV)(()=>{const a=(0,Q.rJ)(Y,e.postType,e.postId,"comments"),s=(0,Q.P)(a,(0,Q.My)("createdAt","asc"));l=(0,Q.aQ)(s,async e=>{const a=e.docs.map(e=>({id:e.id,...e.data()})),s=[...new Set(a.map(e=>e.userId))];if(s.length>0){const e=new Map;for(let t=0;t<s.length;t+=30){const a=s.slice(t,t+30),n=(0,Q.P)((0,Q.rJ)(Y,"users"),(0,Q._M)((0,Q.Fs)(),"in",a)),o=await(0,Q.GG)(n);o.forEach(t=>e.set(t.id,t.data()))}t.value=a.map(t=>{const a=e.get(t.userId);return{...t,userName:a?.displayName||t.userName||"Unknown User",userPhoto:a?.photoURL||t.userPhoto||null}})}else t.value=[]})}),(0,n.hi)(()=>{l()});const i=async()=>{if(""===a.value.trim())return;const t=j.currentUser;if(!t)return;const s=(0,Q.O5)(),n=(0,Q.rJ)(Y,e.postType,e.postId,"comments"),o=(0,Q.H9)(Y,"reviews",e.postId);await Promise.all([(0,Q.gS)(n,{userId:t.uid,text:a.value,createdAt:s}),(0,Q.mZ)(o,{lastActivityAt:s})]),a.value=""},r=e=>{const t=j.currentUser;return t&&t.uid===e.userId},c=t=>{const a=j.currentUser;return a&&(a.uid===t.userId||a.uid===e.postAuthorId)},d=e=>{s.value=e.id,o.value=e.text},u=()=>{s.value=null,o.value=""},v=async()=>{if(""===o.value.trim()||!s.value)return;const t=(0,Q.H9)(Y,e.postType,e.postId,"comments",s.value),a=(0,Q.H9)(Y,"reviews",e.postId);await Promise.all([(0,Q.mZ)(t,{text:o.value}),(0,Q.mZ)(a,{lastActivityAt:(0,Q.O5)()})]),u()},p=async t=>{if(confirm("Are you sure you want to delete this comment?")){const a=(0,Q.H9)(Y,e.postType,e.postId,"comments",t),s=(0,Q.H9)(Y,"reviews",e.postId);await Promise.all([(0,Q.kd)(a),(0,Q.mZ)(s,{lastActivityAt:(0,Q.O5)()})])}},g=e=>e&&e.toDate?e.toDate().toLocaleString():"";return{comments:t,newComment:a,addComment:i,canEdit:r,canDelete:c,startEditing:d,cancelEdit:u,saveEdit:v,deleteComment:p,editingCommentId:s,editingText:o,formatDate:g}}};var Le=a(262);const ke=(0,Le.A)(we,[["render",me],["__scopeId","data-v-18a9cab6"]]),ye=ke,Re={class:"star-rating"},fe=["d"];function Ce(e,t,a,s,o,l){return(0,n.uX)(),(0,n.CE)("div",Re,[((0,n.uX)(),(0,n.CE)(n.FK,null,(0,n.pI)(5,e=>(0,n.Lk)("svg",{key:e,height:"16px",width:"16px",viewBox:"0 0 24 24",fill:"currentColor"},[t[0]||(t[0]=(0,n.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"},null,-1)),(0,n.Lk)("path",{d:s.getStarPath(e)},null,8,fe)])),64))])}const be={name:"StarRating",props:{rating:{type:Number,required:!0,default:0}},setup(e){const t="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27z",a="M22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27V6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L18.18 21l-1.64-7.03L22 9.24zM12 15.4z",s="M22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.64-7.03L22 9.24zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z",n=n=>e.rating>=n?t:e.rating>=n-.5?a:s;return{getStarPath:n}}},Me=(0,Le.A)(be,[["render",Ce],["__scopeId","data-v-6bd33956"]]),Ie=Me;function Ee(e,t,a,s){if(null===e||null===t||null===a||null===s)return null;if(e===a&&t===s)return 0;const n=3959,o=(a-e)*Math.PI/180,l=(s-t)*Math.PI/180,i=Math.sin(o/2)*Math.sin(o/2)+Math.cos(e*Math.PI/180)*Math.cos(a*Math.PI/180)*Math.sin(l/2)*Math.sin(l/2),r=2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i));return n*r}const Ue={name:"Home",components:{StarRating:Ie,Comments:ye},setup(){const e=(0,D.KR)([]),t=(0,D.KR)(!0),a=(0,D.KR)(null),s=(0,D.KR)(""),o=(0,D.KR)(null),l=(0,D.KR)(!1),i=new Map,r=(0,D.KR)([]),c=10;let d=null;const u=[],v=(0,D.KR)(new Set);(0,n.hi)(()=>{u.forEach(e=>e()),d&&d.disconnect()}),(0,n.sV)(()=>{d=new IntersectionObserver(e=>{e[0].isIntersecting&&g()}),m()}),(0,n.wB)(o,(e,t)=>{t&&d.unobserve(t),e&&d.observe(e)});const p=async()=>{t.value=!0,u.forEach(e=>e()),u.length=0,i.clear();const s=(0,Q.P)((0,Q.rJ)(Y,"bucketListItems"),(0,Q._M)("userId","==",j.currentUser.uid)),n=(0,Q.aQ)(s,e=>{const t=new Set;e.forEach(e=>t.add(e.data().restaurantId)),v.value=t});u.push(n);const o=j.currentUser;if(!o)return void(t.value=!1);const[l,d,p,g]=await Promise.all([(0,Q.GG)((0,Q.P)((0,Q.rJ)(Y,"follows"),(0,Q._M)("followerId","==",o.uid))),(0,Q.GG)((0,Q.rJ)(Y,"restaurants")),(0,Q.GG)((0,Q.rJ)(Y,"users")),(0,Q.GG)((0,Q.P)((0,Q.rJ)(Y,"users"),(0,Q.My)("reviewCount","desc"),(0,Q.AB)(3)))]),h=new Map;d.forEach(e=>{h.set(e.id,e.data())});const m=new Map;p.forEach(e=>{m.set(e.id,e.data())});const L=new Map;g.forEach((e,t)=>{L.set(e.id,t)});const k=()=>{r.value=Array.from(i.values()).sort((e,t)=>{const a=e.lastActivityAt||e.createdAt,s=t.lastActivityAt||t.createdAt;return s.seconds-a.seconds}),e.value=r.value.slice(0,e.value.length||c)},y=e=>{e.docChanges().forEach(e=>{if("removed"===e.type)i.delete(e.doc.id);else{const t=e.doc.data(),s=h.get(t.restaurantId),n=m.get(t.userId),o=L.get(t.userId),l={...t,id:e.doc.id,restaurantName:s?.name||"Unknown Restaurant",location:s?.location||null,distance:a.value&&s?.location?Ee(a.value.lat,a.value.lng,s.location.lat,s.location.lng):null,userName:n?.displayName||"Unknown User",userPhoto:n?.photoURL||null,medal:w(o)};i.set(l.id,l)}}),k(),t.value=!1},R=l.docs.map(e=>e.data().followingId);if(R.includes(o.uid)||R.push(o.uid),R.length>0)for(let e=0;e<R.length;e+=30){const t=R.slice(e,e+30),a=(0,Q.P)((0,Q.rJ)(Y,"reviews"),(0,Q._M)("userId","in",t),(0,Q.My)("lastActivityAt","desc")),s=(0,Q.aQ)(a,y,e=>console.error("Feed error (followed):",e));u.push(s)}if(a.value){const e=[];if(d.forEach(t=>{const s=t.data();if(s.location){const n=Ee(a.value.lat,a.value.lng,s.location.lat,s.location.lng);null!==n&&n<=100&&e.push(t.id)}}),e.length>0)for(let t=0;t<e.length;t+=30){const a=e.slice(t,t+30),s=(0,Q.P)((0,Q.rJ)(Y,"reviews"),(0,Q._M)("restaurantId","in",a),(0,Q.My)("lastActivityAt","desc")),n=(0,Q.aQ)(s,y,e=>console.error("Feed error (nearby):",e));u.push(n)}}0===u.length&&(t.value=!1)},g=()=>{l.value||e.value.length>=r.value.length||(l.value=!0,setTimeout(()=>{const t=e.value.length,a=r.value.slice(t,t+c);e.value.push(...a),l.value=!1},300))},h=()=>{navigator.geolocation.getCurrentPosition(e=>{s.value="granted",a.value={lat:e.coords.latitude,lng:e.coords.longitude},p()},()=>{s.value="denied",p()},{timeout:1e4})},m=async()=>{if(navigator.permissions)try{const e=await navigator.permissions.query({name:"geolocation"});s.value=e.state,e.onchange=()=>{s.value=e.state,"granted"===e.state&&h()},"granted"===e.state?h():p()}catch(e){console.error("Error checking location permission:",e),h()}else h()},w=e=>"number"!==typeof e?null:0===e?"ðŸ¥‡":1===e?"ðŸ¥ˆ":2===e?"ðŸ¥‰":null,L=e=>v.value.has(e),k=async e=>{const t=j.currentUser;if(t)if(L(e.restaurantId)){const a=(0,Q.P)((0,Q.rJ)(Y,"bucketListItems"),(0,Q._M)("userId","==",t.uid),(0,Q._M)("restaurantId","==",e.restaurantId)),s=await(0,Q.GG)(a);s.forEach(e=>(0,Q.kd)(e.ref))}else await(0,Q.gS)((0,Q.rJ)(Y,"bucketListItems"),{userId:t.uid,restaurantId:e.restaurantId,createdAt:(0,Q.O5)()})};return(0,n.sV)(m),{posts:e,loading:t,locationPermission:s,requestLocationAccess:h,loadMoreTrigger:o,loadingMore:l,isInBucketList:L,toggleBucketList:k}}},ze=(0,Le.A)(Ue,[["render",V],["__scopeId","data-v-43d4fa0d"]]),Se=ze,xe={class:"restaurants-page"},Ne={class:"search-box"},Pe={key:2,class:"loading-indicator"},Xe={key:3,class:"restaurant-list-container"},Fe={key:0,class:"restaurant-list"},_e={class:"restaurant-details"},Be={class:"restaurant-name"},Ke={class:"restaurant-meta"},Ge=["title"],Ae={class:"rating-text"},He={class:"rating-count"},Te={key:1,class:"distance"},Ve={class:"restaurant-address"},De={class:"restaurant-actions"},Je=["onClick","title"],We=["onClick"],Qe=["onClick"],$e=["href"],Oe=["href"],qe=["onClick"],je={key:1,class:"no-restaurants-message"};function Ze(e,t,a,l,i,r){const c=(0,n.g2)("EditRestaurantModal"),d=(0,n.g2)("RestaurantReviewsModal"),u=(0,n.g2)("StarRating");return(0,n.uX)(),(0,n.CE)("div",xe,[l.isEditModalVisible?((0,n.uX)(),(0,n.Wv)(c,{key:0,restaurant:l.restaurantToEdit,onClose:l.closeEditModal,onSave:l.saveRestaurantChanges},null,8,["restaurant","onClose","onSave"])):(0,n.Q3)("",!0),l.isReviewsModalVisible?((0,n.uX)(),(0,n.Wv)(d,{key:1,restaurant:l.restaurantForReviews,onClose:l.closeReviewsModal},null,8,["restaurant","onClose"])):(0,n.Q3)("",!0),(0,n.Lk)("div",Ne,[(0,n.bo)((0,n.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>l.searchQuery=e),placeholder:"Search by name, address, city, state, or zip...",class:"search-input"},null,512),[[s.Jo,l.searchQuery]])]),l.loading?((0,n.uX)(),(0,n.CE)("div",Pe,"Loading restaurants...")):((0,n.uX)(),(0,n.CE)("div",Xe,[l.filteredRestaurants.length>0?((0,n.uX)(),(0,n.CE)("ul",Fe,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.filteredRestaurants,a=>((0,n.uX)(),(0,n.CE)("li",{key:a.id,class:"restaurant-item"},[(0,n.Lk)("div",_e,[(0,n.Lk)("span",Be,(0,o.v_)(a.name),1),(0,n.Lk)("div",Ke,[a.averageRating>0?((0,n.uX)(),(0,n.CE)("div",{key:0,class:"rating",title:`${a.averageRating.toFixed(2)} average rating`},[(0,n.bF)(u,{rating:a.averageRating},null,8,["rating"]),(0,n.Lk)("span",Ae,(0,o.v_)(a.averageRating.toFixed(1)),1),(0,n.Lk)("span",He,"("+(0,o.v_)(a.ratingCount)+")",1)],8,Ge)):(0,n.Q3)("",!0),null!==a.distance?((0,n.uX)(),(0,n.CE)("span",Te,(0,o.v_)(a.distance.toFixed(1))+" miles away ",1)):(0,n.Q3)("",!0)]),(0,n.Lk)("span",Ve,[(0,n.eW)((0,o.v_)(a.address),1),a.city?((0,n.uX)(),(0,n.CE)(n.FK,{key:0},[(0,n.eW)(", "+(0,o.v_)(a.city),1)],64)):(0,n.Q3)("",!0),a.state?((0,n.uX)(),(0,n.CE)(n.FK,{key:1},[(0,n.eW)(", "+(0,o.v_)(a.state),1)],64)):(0,n.Q3)("",!0),a.zip?((0,n.uX)(),(0,n.CE)(n.FK,{key:2},[(0,n.eW)((0,o.v_)(a.zip),1)],64)):(0,n.Q3)("",!0)])]),(0,n.Lk)("div",De,[(0,n.Lk)("button",{onClick:e=>l.toggleBucketList(a),class:(0,o.C4)(["action-btn",{"in-bucket-list":l.isInBucketList(a.id)}]),title:l.isInBucketList(a.id)?"Remove from Bucket List":"Add to Bucket List"},t[1]||(t[1]=[(0,n.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor"},[(0,n.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,n.Lk)("path",{d:"M18 7h-2.06c-.33-3.2-2.46-5.8-5.94-5.8S4.39 3.8 4.06 7H2v12h16V7zM6.14 7c.2-1.92 1.6-3.48 3.86-3.8A4.002 4.002 0 0 1 14 7h-2.14c-.2-1.92-1.6-3.48-3.86-3.8zM16 17H4v-8h12v8z"})],-1)]),10,Je),(0,n.Lk)("button",{onClick:e=>l.openReviewsModal(a),class:"action-btn",title:"View Reviews"},t[2]||(t[2]=[(0,n.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor"},[(0,n.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,n.Lk)("path",{d:"M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H6l-2 2V4h16v12z"})],-1)]),8,We),(0,n.Lk)("button",{onClick:e=>l.openEditModal(a),class:"action-btn",title:"Edit Restaurant"},t[3]||(t[3]=[(0,n.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor"},[(0,n.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,n.Lk)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"})],-1)]),8,Qe),(0,n.Lk)("a",{href:l.getDirectionsUrl(a),target:"_blank",rel:"noopener noreferrer",class:"action-btn",title:"Get Directions"},t[4]||(t[4]=[(0,n.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor"},[(0,n.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,n.Lk)("path",{d:"M22.43 10.59l-9.01-9.01c-.75-.75-2.07-.76-2.83 0l-9.01 9.01c-.76.75-.76 2.07 0 2.83l9.01 9.01c.75.75 2.07.75 2.83 0l9.01-9.01c.75-.76.75-2.08 0-2.83zM12 16c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4z"})],-1)]),8,$e),(0,n.Lk)("a",{href:l.getDetailsUrl(a),target:"_blank",rel:"noopener noreferrer",class:"action-btn",title:"View Details on Google"},t[5]||(t[5]=[(0,n.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor"},[(0,n.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,n.Lk)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 5 1.41-1.41L15.5 14zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"})],-1)]),8,Oe),(0,n.Lk)("button",{class:"check-in-btn",onClick:t=>e.$emit("review-at",a.id)},"Review",8,qe)])]))),128))])):((0,n.uX)(),(0,n.CE)("p",je,"No restaurants found matching your search."))]))])}const Ye={class:"modal-content"},et={class:"form-group"},tt={class:"form-group"},at={class:"form-group"},st={class:"form-group"},nt={class:"form-group"},ot={class:"form-group"},lt={class:"modal-actions"};function it(e,t,a,o,l,i){return(0,n.uX)(),(0,n.CE)("div",{class:"modal-overlay",onClick:t[8]||(t[8]=(0,s.D$)(t=>e.$emit("close"),["self"]))},[(0,n.Lk)("div",Ye,[t[16]||(t[16]=(0,n.Lk)("h2",null,"Edit Restaurant",-1)),o.editableRestaurant?((0,n.uX)(),(0,n.CE)("form",{key:0,onSubmit:t[7]||(t[7]=(0,s.D$)((...e)=>o.onSave&&o.onSave(...e),["prevent"]))},[(0,n.Lk)("div",et,[t[9]||(t[9]=(0,n.Lk)("label",{for:"name"},"Name",-1)),(0,n.bo)((0,n.Lk)("input",{id:"name","onUpdate:modelValue":t[0]||(t[0]=e=>o.editableRestaurant.name=e),type:"text",required:""},null,512),[[s.Jo,o.editableRestaurant.name]])]),(0,n.Lk)("div",tt,[t[10]||(t[10]=(0,n.Lk)("label",{for:"address"},"Address",-1)),(0,n.bo)((0,n.Lk)("input",{id:"address","onUpdate:modelValue":t[1]||(t[1]=e=>o.editableRestaurant.address=e),type:"text"},null,512),[[s.Jo,o.editableRestaurant.address]])]),(0,n.Lk)("div",at,[t[11]||(t[11]=(0,n.Lk)("label",{for:"city"},"City",-1)),(0,n.bo)((0,n.Lk)("input",{id:"city","onUpdate:modelValue":t[2]||(t[2]=e=>o.editableRestaurant.city=e),type:"text"},null,512),[[s.Jo,o.editableRestaurant.city]])]),(0,n.Lk)("div",st,[t[12]||(t[12]=(0,n.Lk)("label",{for:"state"},"State",-1)),(0,n.bo)((0,n.Lk)("input",{id:"state","onUpdate:modelValue":t[3]||(t[3]=e=>o.editableRestaurant.state=e),type:"text"},null,512),[[s.Jo,o.editableRestaurant.state]])]),(0,n.Lk)("div",nt,[t[13]||(t[13]=(0,n.Lk)("label",{for:"zip"},"Zip Code",-1)),(0,n.bo)((0,n.Lk)("input",{id:"zip","onUpdate:modelValue":t[4]||(t[4]=e=>o.editableRestaurant.zip=e),type:"text"},null,512),[[s.Jo,o.editableRestaurant.zip]])]),(0,n.Lk)("div",ot,[t[14]||(t[14]=(0,n.Lk)("label",{for:"url"},"Website URL",-1)),(0,n.bo)((0,n.Lk)("input",{id:"url","onUpdate:modelValue":t[5]||(t[5]=e=>o.editableRestaurant.url=e),type:"url",placeholder:"https://example.com"},null,512),[[s.Jo,o.editableRestaurant.url]])]),(0,n.Lk)("div",lt,[(0,n.Lk)("button",{type:"button",class:"btn-cancel",onClick:t[6]||(t[6]=t=>e.$emit("close"))},"Cancel"),t[15]||(t[15]=(0,n.Lk)("button",{type:"submit",class:"btn-save"},"Save Changes",-1))])],32)):(0,n.Q3)("",!0)])])}const rt={name:"EditRestaurantModal",props:{restaurant:{type:Object,required:!0}},emits:["close","save"],setup(e,{emit:t}){const a=(0,D.KR)(null);(0,n.wB)(()=>e.restaurant,e=>{e&&(a.value=JSON.parse(JSON.stringify(e)))},{immediate:!0,deep:!0});const s=()=>{t("save",a.value)};return{editableRestaurant:a,onSave:s}}},ct=(0,Le.A)(rt,[["render",it],["__scopeId","data-v-2288406c"]]),dt=ct,ut="kennected.com@gmail.com";async function vt(e){if(!e||!e.trim())return console.error("Geocoding error: Address is empty."),null;const t=`https://nominatim.openstreetmap.org/search?q=${encodeURIComponent(e)}&format=json&limit=1&email=${ut}`;try{const e=await fetch(t),a=await e.json();if(a&&a.length>0){const{lat:e,lon:t}=a[0];return{lat:parseFloat(e),lng:parseFloat(t)}}return null}catch(a){return console.error("Error during geocoding fetch:",a),null}}const pt={class:"modal-content"},gt={class:"modal-header"},ht={class:"modal-body"},mt={key:0,class:"loading-indicator"},wt={key:1,class:"no-reviews-message"},Lt={key:2,class:"reviews-list"},kt={class:"review-header"},yt=["src"],Rt={class:"user-info"},ft={class:"user-name"},Ct={class:"review-date"},bt={class:"review-body"},Mt={key:0,class:"review-text"},It={key:1,class:"review-photo-container"},Et=["src"],Ut={key:2,class:"tags-container"};function zt(e,t,a,l,i,r){const c=(0,n.g2)("StarRating");return(0,n.uX)(),(0,n.CE)("div",{class:"modal-overlay",onClick:t[1]||(t[1]=(0,s.D$)(t=>e.$emit("close"),["self"]))},[(0,n.Lk)("div",pt,[(0,n.Lk)("div",gt,[(0,n.Lk)("h2",null,"Reviews for "+(0,o.v_)(a.restaurant.name),1),(0,n.Lk)("button",{onClick:t[0]||(t[0]=t=>e.$emit("close")),class:"close-btn"},"Ã—")]),(0,n.Lk)("div",ht,[l.loading?((0,n.uX)(),(0,n.CE)("div",mt,"Loading reviews...")):0===l.reviews.length?((0,n.uX)(),(0,n.CE)("div",wt," No reviews yet for this restaurant. ")):((0,n.uX)(),(0,n.CE)("ul",Lt,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.reviews,e=>((0,n.uX)(),(0,n.CE)("li",{key:e.id,class:"review-item"},[(0,n.Lk)("div",kt,[(0,n.Lk)("img",{src:e.userPhoto||"https://cdn-icons-png.flaticon.com/512/149/149071.png",alt:"User",class:"user-avatar"},null,8,yt),(0,n.Lk)("div",Rt,[(0,n.Lk)("span",ft,(0,o.v_)(e.userName),1),(0,n.Lk)("span",Ct,(0,o.v_)(l.formatDate(e.createdAt)),1)])]),(0,n.Lk)("div",bt,[(0,n.bF)(c,{rating:e.rating},null,8,["rating"]),e.text?((0,n.uX)(),(0,n.CE)("p",Mt,'"'+(0,o.v_)(e.text)+'"',1)):(0,n.Q3)("",!0),e.photoURL?((0,n.uX)(),(0,n.CE)("div",It,[(0,n.Lk)("img",{src:e.photoURL,alt:"Review photo",class:"review-photo"},null,8,Et)])):(0,n.Q3)("",!0),e.tags&&e.tags.length>0?((0,n.uX)(),(0,n.CE)("div",Ut,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.tags,e=>((0,n.uX)(),(0,n.CE)("span",{key:e,class:"tag"},(0,o.v_)(e),1))),128))])):(0,n.Q3)("",!0)])]))),128))]))])])])}const St={name:"RestaurantReviewsModal",components:{StarRating:Ie},props:{restaurant:{type:Object,required:!0}},emits:["close"],setup(e){const t=(0,D.KR)([]),a=(0,D.KR)(!0),s=async()=>{if(e.restaurant?.id){console.log(`Fetching reviews for restaurant ID: ${e.restaurant.id}`),a.value=!0,t.value=[];try{const s=(0,Q.P)((0,Q.rJ)(Y,"reviews"),(0,Q._M)("restaurantId","==",e.restaurant.id),(0,Q.My)("createdAt","desc")),n=await(0,Q.GG)(s);console.log(`Found ${n.size} reviews for restaurant ${e.restaurant.id}.`);const o=n.docs.map(e=>({id:e.id,...e.data()}));if(0===o.length)return t.value=[],void(a.value=!1);const l=[...new Set(o.map(e=>e.userId))],i=new Map,r=[];for(let e=0;e<l.length;e+=30){const t=l.slice(e,e+30);if(t.length>0){const e=(0,Q.P)((0,Q.rJ)(Y,"users"),(0,Q._M)("uid","in",t));r.push((0,Q.GG)(e))}}const c=await Promise.all(r);c.forEach(e=>{e.forEach(e=>{const t=e.data();i.set(t.uid,t)})}),t.value=o.map(e=>{const t=i.get(e.userId);return{...e,userName:t?.displayName||"Unknown User",userPhoto:t?.photoURL||null}})}catch(s){console.error("Error fetching reviews for restaurant:",s),console.error("Error fetching reviews:",s)}finally{a.value=!1}}};(0,n.wB)(()=>e.restaurant,e=>{e&&s()},{immediate:!0});const o=e=>e&&e.toDate?e.toDate().toLocaleDateString():"";return{reviews:t,loading:a,formatDate:o}}},xt=(0,Le.A)(St,[["render",zt],["__scopeId","data-v-9fcc604c"]]),Nt=xt,Pt={name:"Restaurants",components:{EditRestaurantModal:dt,StarRating:Ie,RestaurantReviewsModal:Nt},emits:["review-at"],setup(){const e=(0,D.KR)([]),t=(0,D.KR)(!0),a=(0,D.KR)(""),s=(0,D.KR)(!1),o=(0,D.KR)(!1),l=(0,D.KR)(null),i=(0,D.KR)(null),r=(0,D.KR)(null),c=(0,D.KR)(new Set);let d=()=>{};const u=async()=>{t.value=!0;try{const[t,a]=await Promise.all([(0,Q.GG)((0,Q.rJ)(Y,"restaurants")),(0,Q.GG)((0,Q.rJ)(Y,"reviews"))]),s={};a.forEach(e=>{const t=e.data();t.restaurantId&&"number"===typeof t.rating&&(s[t.restaurantId]||(s[t.restaurantId]={total:0,count:0}),s[t.restaurantId].total+=t.rating,s[t.restaurantId].count++)}),e.value=t.docs.map(e=>{const t={id:e.id,...e.data()},a=s[t.id];return{...t,averageRating:a?a.total/a.count:0,ratingCount:a?a.count:0}})}catch(a){console.error("Error fetching restaurants and ratings:",a)}finally{t.value=!1}};(0,n.sV)(()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(e=>{r.value={lat:e.coords.latitude,lng:e.coords.longitude},u(),v()},e=>{console.error("Error getting location",e),u(),v()}):(console.error("Geolocation is not supported by this browser."),u(),v())}),(0,n.hi)(()=>{d()});const v=()=>{const e=j.currentUser;if(!e)return;const t=(0,Q.P)((0,Q.rJ)(Y,"bucketListItems"),(0,Q._M)("userId","==",e.uid));d=(0,Q.aQ)(t,e=>{const t=new Set;e.forEach(e=>t.add(e.data().restaurantId)),c.value=t})},p=(0,n.EW)(()=>e.value.map(e=>{const t=r.value&&e.location?Ee(r.value.lat,r.value.lng,e.location.lat,e.location.lng):null;return{...e,distance:t}}).sort((e,t)=>null===e.distance?1:null===t.distance?-1:e.distance-t.distance)),g=(0,n.EW)(()=>{if(!a.value.trim())return p.value;const e=a.value.toLowerCase();return p.value.filter(t=>t.name&&t.name.toLowerCase().includes(e)||t.address&&t.address.toLowerCase().includes(e)||t.city&&t.city.toLowerCase().includes(e)||t.state&&t.state.toLowerCase().includes(e)||t.zip&&t.zip.toLowerCase().includes(e))}),h=e=>{const t=encodeURIComponent(`${e.name}, ${e.address}`);return`https://www.google.com/maps/dir/?api=1&destination=${t}`},m=e=>{const t=encodeURIComponent(`${e.name}, ${e.address}`);return`https://www.google.com/search?q=${t}`},w=e=>{l.value=e,s.value=!0},L=()=>{s.value=!1,l.value=null},k=e=>{i.value=e,o.value=!0},y=()=>{o.value=!1,i.value=null},R=async t=>{if(!t||!t.id)return;const a=l.value,s=["address","city","state","zip"],n=s.some(e=>a[e]!==t[e]);if(n){const e=[t.address,t.city,t.state,t.zip].filter(Boolean).join(", "),a=await vt(e);a?t.location=a:(alert("Could not find a location for the provided address. Please check the address and try again. The restaurant will be saved without a location."),t.location=null)}const{id:o,...i}=t,r=(0,Q.H9)(Y,"restaurants",o);try{await(0,Q.mZ)(r,i);const a=e.value.findIndex(e=>e.id===o);-1!==a&&e.value.splice(a,1,{...e.value[a],...t}),L()}catch(c){console.error("Error updating restaurant: ",c),alert("Failed to save changes. Please try again.")}},f=e=>c.value.has(e),C=async e=>{const t=j.currentUser;if(t)if(f(e.id)){const a=(0,Q.P)((0,Q.rJ)(Y,"bucketListItems"),(0,Q._M)("userId","==",t.uid),(0,Q._M)("restaurantId","==",e.id)),s=await(0,Q.GG)(a);s.forEach(e=>(0,Q.kd)(e.ref))}else await(0,Q.gS)((0,Q.rJ)(Y,"bucketListItems"),{userId:t.uid,restaurantId:e.id,createdAt:(0,Q.O5)()})};return{restaurants:e,loading:t,searchQuery:a,filteredRestaurants:g,getDirectionsUrl:h,getDetailsUrl:m,isEditModalVisible:s,restaurantToEdit:l,isReviewsModalVisible:o,restaurantForReviews:i,openEditModal:w,closeEditModal:L,saveRestaurantChanges:R,openReviewsModal:k,closeReviewsModal:y,isInBucketList:f,toggleBucketList:C}}},Xt=(0,Le.A)(Pt,[["render",Ze],["__scopeId","data-v-995e7140"]]),Ft=Xt,_t={class:"user-search-page"},Bt={class:"search-box"},Kt={key:0},Gt={key:1},At={key:0,class:"no-users-message"},Ht={key:0},Tt={key:1},Vt={class:"user-card-content"},Dt={class:"user-info"},Jt=["src"],Wt={class:"user-name"},Qt={key:0,class:"user-distance"},$t={key:0,class:"last-review"},Ot={class:"review-header"},qt={class:"review-body"},jt={key:0,class:"review-text"},Zt={key:1,class:"last-review no-review"},Yt={class:"user-actions"},ea=["onClick"];function ta(e,t,a,l,i,r){const c=(0,n.g2)("StarRating");return(0,n.uX)(),(0,n.CE)("div",_t,[(0,n.Lk)("div",Bt,[(0,n.bo)((0,n.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>l.searchQuery=e),placeholder:"Search for users by name...",class:"search-input"},null,512),[[s.Jo,l.searchQuery]])]),l.loading?((0,n.uX)(),(0,n.CE)("div",Kt,"Loading users...")):((0,n.uX)(),(0,n.CE)("div",Gt,[0===l.filteredUsers.length?((0,n.uX)(),(0,n.CE)("div",At,[l.searchQuery?((0,n.uX)(),(0,n.CE)("span",Ht,"No users found matching your search.")):((0,n.uX)(),(0,n.CE)("span",Tt,"No other users found."))])):(0,n.Q3)("",!0),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.filteredUsers,e=>((0,n.uX)(),(0,n.CE)("div",{key:e.uid,class:"user-card"},[(0,n.Lk)("div",Vt,[(0,n.Lk)("div",Dt,[(0,n.Lk)("img",{src:e.photoURL||"https://cdn-icons-png.flaticon.com/512/149/149071.png",class:"user-avatar",alt:"User"},null,8,Jt),(0,n.Lk)("div",null,[(0,n.Lk)("span",Wt,(0,o.v_)(e.displayName),1),null!==e.distance?((0,n.uX)(),(0,n.CE)("div",Qt,(0,o.v_)(e.distance.toFixed(1))+" miles away",1)):(0,n.Q3)("",!0)])]),e.lastReview?((0,n.uX)(),(0,n.CE)("div",$t,[(0,n.Lk)("div",Ot,[t[1]||(t[1]=(0,n.eW)(" Latest review: ",-1)),(0,n.Lk)("strong",null,(0,o.v_)(e.lastReview.restaurantName),1)]),(0,n.Lk)("div",qt,[(0,n.bF)(c,{rating:e.lastReview.rating},null,8,["rating"]),e.lastReview.text?((0,n.uX)(),(0,n.CE)("p",jt,'"'+(0,o.v_)(e.lastReview.text)+'"',1)):(0,n.Q3)("",!0)])])):((0,n.uX)(),(0,n.CE)("div",Zt," No reviews yet. "))]),(0,n.Lk)("div",Yt,[(0,n.Lk)("button",{onClick:t=>l.toggleFollow(e),class:(0,o.C4)({"unfollow-btn":e.isFollowing})},(0,o.v_)(e.isFollowing?"Unfollow":"Follow"),11,ea)])]))),128))]))])}const aa={name:"UserSearch",components:{StarRating:Ie},setup(){const e=(0,D.KR)([]),t=(0,D.KR)(!0),a=(0,D.KR)(null),s=(0,D.KR)([]),o=(0,D.KR)(""),l=async()=>{t.value=!0;const n=j.currentUser;if(!n)return;const o=await(0,Q.GG)((0,Q.P)((0,Q.rJ)(Y,"follows"),(0,Q._M)("followerId","==",n.uid)));s.value=o.docs.map(e=>e.data().followingId);const l=await(0,Q.GG)((0,Q.rJ)(Y,"restaurants")),i=new Map;l.forEach(e=>{i.set(e.id,e.data())});const r=(0,Q.P)((0,Q.rJ)(Y,"users"),(0,Q._M)("uid","!=",n.uid)),c=await(0,Q.GG)(r),d=c.docs.map(e=>({uid:e.id,...e.data()})),u=await Promise.all(d.map(async e=>{const t=(0,Q.P)((0,Q.rJ)(Y,"reviews"),(0,Q._M)("userId","==",e.uid),(0,Q.My)("createdAt","desc"),(0,Q.AB)(1)),n=await(0,Q.GG)(t);let o=null,l=null;if(!n.empty){const e=n.docs[0].data(),t=i.get(e.restaurantId);o={...e,restaurantName:t?.name||"Unknown Restaurant"},a.value&&t?.location&&(l=Ee(a.value.lat,a.value.lng,t.location.lat,t.location.lng))}return{...e,isFollowing:s.value.includes(e.uid),lastReview:o,distance:l}}));e.value=u,t.value=!1};(0,n.sV)(()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(e=>{a.value={lat:e.coords.latitude,lng:e.coords.longitude},l()},e=>{console.error("Error getting location",e),l()}):(console.error("Geolocation is not supported by this browser."),l())});const i=(0,n.EW)(()=>{const t=[...e.value].sort((e,t)=>null===e.distance&&null!==t.distance?1:null!==e.distance&&null===t.distance?-1:null===e.distance&&null===t.distance?0:e.distance-t.distance);if(!o.value.trim())return t;const a=o.value.toLowerCase();return t.filter(e=>e.displayName.toLowerCase().includes(a))}),r=async e=>{const t=j.currentUser;if(!t)return;const a=(0,Q.rJ)(Y,"follows");if(e.isFollowing){const s=(0,Q.P)(a,(0,Q._M)("followerId","==",t.uid),(0,Q._M)("followingId","==",e.uid)),n=await(0,Q.GG)(s);if(!n.empty){const t=n.docs[0].id;await(0,Q.kd)((0,Q.H9)(Y,"follows",t)),e.isFollowing=!1}}else await(0,Q.gS)(a,{followerId:t.uid,followingId:e.uid}),e.isFollowing=!0};return{filteredUsers:i,loading:t,toggleFollow:r,searchQuery:o}}},sa=(0,Le.A)(aa,[["render",ta],["__scopeId","data-v-20655c0c"]]),na=sa,oa={class:"review-page"},la={class:"review-card"},ia={class:"form-group"},ra=["disabled"],ca=["value"],da={key:0,class:"add-restaurant-prompt"},ua={key:0,class:"add-restaurant-form"},va={class:"form-group"},pa={class:"form-group"},ga={class:"form-group"},ha={class:"form-group"},ma={class:"form-group"},wa={class:"form-group"},La=["disabled"],ka={key:0,class:"error-message"},ya={class:"form-group"},Ra={key:0,class:"photo-actions"},fa={key:1,class:"photo-preview"},Ca=["src"],ba={key:1,class:"camera-modal"},Ma={ref:"videoPlayer",class:"camera-video",autoplay:"",playsinline:""},Ia={class:"form-group"},Ea={class:"star-rating-input"},Ua=["onMouseover","onClick","title"],za={height:"28px",width:"28px",viewBox:"0 0 24 24",fill:"currentColor"},Sa=["d"],xa={class:"form-group"},Na={class:"tags-container"},Pa=["onClick"],Xa={class:"form-group"},Fa={class:"new-tag-input"},_a=["disabled"],Ba={class:"form-group"},Ka=["disabled"],Ga={key:2,class:"error-message"};function Aa(e,t,a,l,i,r){return(0,n.uX)(),(0,n.CE)("div",oa,[(0,n.Lk)("div",la,[(0,n.Lk)("form",{onSubmit:t[20]||(t[20]=(0,s.D$)((...e)=>l.submitReview&&l.submitReview(...e),["prevent"]))},[(0,n.Lk)("div",ia,[t[23]||(t[23]=(0,n.Lk)("label",{for:"restaurant"},"Restaurant",-1)),(0,n.bo)((0,n.Lk)("select",{id:"restaurant","onUpdate:modelValue":t[0]||(t[0]=e=>l.selectedRestaurant=e),disabled:!!a.selectedRestaurantId,required:""},[t[21]||(t[21]=(0,n.Lk)("option",{disabled:"",value:""},"Please select a restaurant",-1)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.restaurants,e=>((0,n.uX)(),(0,n.CE)("option",{key:e.id,value:e.id},(0,o.v_)(e.name),9,ca))),128))],8,ra),[[s.u1,l.selectedRestaurant]]),a.selectedRestaurantId?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("div",da,[t[22]||(t[22]=(0,n.eW)(" Can't find the restaurant? ",-1)),(0,n.Lk)("button",{type:"button",class:"link-button",onClick:t[1]||(t[1]=e=>l.showAddRestaurantForm=!l.showAddRestaurantForm)},(0,o.v_)(l.showAddRestaurantForm?"Cancel":"Add a new one"),1)]))]),l.showAddRestaurantForm?((0,n.uX)(),(0,n.CE)("div",ua,[t[30]||(t[30]=(0,n.Lk)("h3",{class:"add-restaurant-header"},"Add New Restaurant",-1)),(0,n.Lk)("div",va,[t[24]||(t[24]=(0,n.Lk)("label",{for:"new-rest-name"},"Name",-1)),(0,n.bo)((0,n.Lk)("input",{id:"new-rest-name","onUpdate:modelValue":t[2]||(t[2]=e=>l.newRestaurant.name=e),type:"text",required:""},null,512),[[s.Jo,l.newRestaurant.name]])]),(0,n.Lk)("div",pa,[t[25]||(t[25]=(0,n.Lk)("label",{for:"new-rest-address"},"Address",-1)),(0,n.bo)((0,n.Lk)("input",{id:"new-rest-address","onUpdate:modelValue":t[3]||(t[3]=e=>l.newRestaurant.address=e),type:"text",required:""},null,512),[[s.Jo,l.newRestaurant.address]])]),(0,n.Lk)("div",ga,[t[26]||(t[26]=(0,n.Lk)("label",{for:"new-rest-city"},"City",-1)),(0,n.bo)((0,n.Lk)("input",{id:"new-rest-city","onUpdate:modelValue":t[4]||(t[4]=e=>l.newRestaurant.city=e),type:"text"},null,512),[[s.Jo,l.newRestaurant.city]])]),(0,n.Lk)("div",ha,[t[27]||(t[27]=(0,n.Lk)("label",{for:"new-rest-state"},"State",-1)),(0,n.bo)((0,n.Lk)("input",{id:"new-rest-state","onUpdate:modelValue":t[5]||(t[5]=e=>l.newRestaurant.state=e),type:"text"},null,512),[[s.Jo,l.newRestaurant.state]])]),(0,n.Lk)("div",ma,[t[28]||(t[28]=(0,n.Lk)("label",{for:"new-rest-zip"},"Zip Code",-1)),(0,n.bo)((0,n.Lk)("input",{id:"new-rest-zip","onUpdate:modelValue":t[6]||(t[6]=e=>l.newRestaurant.zip=e),type:"text"},null,512),[[s.Jo,l.newRestaurant.zip]])]),(0,n.Lk)("div",wa,[t[29]||(t[29]=(0,n.Lk)("label",{for:"url"},"Website URL",-1)),(0,n.bo)((0,n.Lk)("input",{id:"url","onUpdate:modelValue":t[7]||(t[7]=e=>l.newRestaurant.url=e),type:"url",placeholder:"https://example.com"},null,512),[[s.Jo,l.newRestaurant.url]])]),(0,n.Lk)("button",{type:"button",class:"btn-save-restaurant",onClick:t[8]||(t[8]=(...e)=>l.saveNewRestaurant&&l.saveNewRestaurant(...e)),disabled:l.isSavingRestaurant},(0,o.v_)(l.isSavingRestaurant?"Saving...":"Save Restaurant"),9,La),l.addRestaurantError?((0,n.uX)(),(0,n.CE)("p",ka,(0,o.v_)(l.addRestaurantError),1)):(0,n.Q3)("",!0)])):(0,n.Q3)("",!0),(0,n.Lk)("div",ya,[t[33]||(t[33]=(0,n.Lk)("label",null,"Photo",-1)),l.photoDataUrl?((0,n.uX)(),(0,n.CE)("div",fa,[(0,n.Lk)("img",{src:l.photoDataUrl,alt:"Review photo preview"},null,8,Ca),(0,n.Lk)("button",{type:"button",onClick:t[12]||(t[12]=(...e)=>l.removePhoto&&l.removePhoto(...e)),class:"btn-remove-photo",title:"Remove Photo"},"Ã—")])):((0,n.uX)(),(0,n.CE)("div",Ra,[(0,n.Lk)("button",{type:"button",onClick:t[9]||(t[9]=(...e)=>l.openCamera&&l.openCamera(...e)),class:"btn-secondary"},t[31]||(t[31]=[(0,n.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor"},[(0,n.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,n.Lk)("circle",{cx:"12",cy:"12",r:"3.2"}),(0,n.Lk)("path",{d:"M9 2L7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2H9zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z"})],-1),(0,n.eW)(" Take a Picture ",-1)])),(0,n.Lk)("button",{type:"button",onClick:t[10]||(t[10]=(...e)=>l.triggerFileUpload&&l.triggerFileUpload(...e)),class:"btn-secondary"},t[32]||(t[32]=[(0,n.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor"},[(0,n.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,n.Lk)("path",{d:"M9 16h6v-6h4l-7-7-7 7h4v6zm3-10.17L14.17 8H13v6h-2V8H9.83L12 5.83zM5 18h14v2H5v-2z"})],-1),(0,n.eW)(" Upload Photo ",-1)])),(0,n.Lk)("input",{type:"file",ref:"fileInput",onChange:t[11]||(t[11]=(...e)=>l.handleFileUpload&&l.handleFileUpload(...e)),accept:"image/*",style:{display:"none"}},null,544)]))]),l.isCameraOpen?((0,n.uX)(),(0,n.CE)("div",ba,[(0,n.Lk)("video",Ma,null,512),(0,n.Lk)("button",{type:"button",onClick:t[13]||(t[13]=(...e)=>l.capturePhoto&&l.capturePhoto(...e)),class:"btn-capture"},"Capture"),(0,n.Lk)("button",{type:"button",onClick:t[14]||(t[14]=(...e)=>l.closeCamera&&l.closeCamera(...e)),class:"btn-cancel-camera"},"Cancel")])):(0,n.Q3)("",!0),(0,n.Lk)("div",Ia,[t[35]||(t[35]=(0,n.Lk)("label",null,"Rating",-1)),(0,n.Lk)("div",Ea,[((0,n.uX)(),(0,n.CE)(n.FK,null,(0,n.pI)(5,e=>(0,n.Lk)("span",{key:e,class:"star",onMouseover:t=>l.hoverRating=e,onMouseleave:t[15]||(t[15]=e=>l.hoverRating=0),onClick:t=>l.rating=e,title:`${e} star${e>1?"s":""}`},[((0,n.uX)(),(0,n.CE)("svg",za,[t[34]||(t[34]=(0,n.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"},null,-1)),(0,n.Lk)("path",{d:l.getStarPath(e)},null,8,Sa)]))],40,Ua)),64))])]),(0,n.Lk)("div",xa,[t[36]||(t[36]=(0,n.Lk)("label",null,"Tags",-1)),(0,n.Lk)("div",Na,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.tags,e=>((0,n.uX)(),(0,n.CE)("button",{key:e.id,type:"button",class:(0,o.C4)(["tag-btn",{selected:l.selectedTags.includes(e.name)}]),onClick:t=>l.toggleTag(e.name)},(0,o.v_)(e.name),11,Pa))),128))])]),(0,n.Lk)("div",Xa,[t[37]||(t[37]=(0,n.Lk)("label",{for:"new-tag"},"Add a new tag",-1)),(0,n.Lk)("div",Fa,[(0,n.bo)((0,n.Lk)("input",{id:"new-tag","onUpdate:modelValue":t[16]||(t[16]=e=>l.newTag=e),onKeydown:t[17]||(t[17]=(0,s.jR)((0,s.D$)((...e)=>l.addNewTag&&l.addNewTag(...e),["prevent"]),["enter"])),placeholder:"e.g., crispy, peppery, huge"},null,544),[[s.Jo,l.newTag,void 0,{trim:!0}]]),(0,n.Lk)("button",{type:"button",onClick:t[18]||(t[18]=(...e)=>l.addNewTag&&l.addNewTag(...e)),disabled:!l.newTag.trim()},"Add Tag",8,_a)])]),(0,n.Lk)("div",Ba,[t[38]||(t[38]=(0,n.Lk)("label",{for:"comment"},"Comment",-1)),(0,n.bo)((0,n.Lk)("textarea",{id:"comment","onUpdate:modelValue":t[19]||(t[19]=e=>l.comment=e),rows:"4",placeholder:"How was the tenderloin?"},null,512),[[s.Jo,l.comment]])]),(0,n.Lk)("button",{type:"submit",disabled:l.submitting||!l.selectedRestaurant||0===l.rating},(0,o.v_)(l.submitting?"Submitting...":"Submit Review"),9,Ka),l.errorMessage?((0,n.uX)(),(0,n.CE)("p",Ga,(0,o.v_)(l.errorMessage),1)):(0,n.Q3)("",!0)],32)])])}const Ha={},Ta={name:"Review",props:{selectedRestaurantId:{type:String,default:null}},emits:["reviewed"],setup(e,{emit:t}){const a=(0,D.KR)([]),s=(0,D.KR)(e.selectedRestaurantId||""),o=(0,D.KR)(0),l=(0,D.KR)(0),i=(0,D.KR)(""),r=(0,D.KR)(!1),c=(0,D.KR)(""),d=(0,D.KR)([]),u=(0,D.KR)([]),v=(0,D.KR)(""),p=(0,D.KR)(!1),g=(0,D.KR)({name:"",address:"",city:"",state:"",zip:"",url:""}),h=(0,D.KR)(!1),m=(0,D.KR)(""),w=(0,D.KR)(!1),L=(0,D.KR)(null),k=(0,D.KR)(null),y=(0,D.KR)(null),R=(0,D.KR)(null),f=(0,D.KR)(null),C="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27z",b="M22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.64-7.03L22 9.24zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z";(0,n.sV)(async()=>{const t=(0,Q.P)((0,Q.rJ)(Ha.db,"tags"),(0,Q.My)("name")),n=new Promise(t=>{navigator.geolocation&&!e.selectedRestaurantId?navigator.geolocation.getCurrentPosition(e=>{f.value={lat:e.coords.latitude,lng:e.coords.longitude},t()},()=>t(),{timeout:5e3}):t()});if(e.selectedRestaurantId){const s=(0,Q.H9)(Ha.db,"restaurants",e.selectedRestaurantId),[n,o]=await Promise.all([(0,Q.GG)(t),(0,Q.x7)(s)]);d.value=n.docs.map(e=>({id:e.id,...e.data()})),o.exists()&&(a.value=[{id:o.id,...o.data()}])}else{const e=(0,Q.P)((0,Q.rJ)(Ha.db,"restaurants"),(0,Q.My)("name")),[o,l]=await Promise.all([(0,Q.GG)(t),(0,Q.GG)(e)]);if(d.value=o.docs.map(e=>({id:e.id,...e.data()})),a.value=l.docs.map(e=>({id:e.id,...e.data()})),await n,f.value&&a.value.length>0){let e=null,t=1/0;a.value.forEach(a=>{if(a.location){const s=Ee(f.value.lat,f.value.lng,a.location.lat,a.location.lng);null!==s&&s<t&&(t=s,e=a)}}),e&&(s.value=e.id)}}});const M=e=>{const t=l.value||o.value;return t>=e?C:b},I=e=>{const t=u.value.indexOf(e);t>-1?u.value.splice(t,1):u.value.push(e)},E=async()=>{const e=v.value.toLowerCase();if(e&&!d.value.some(t=>t.name===e))try{const t=await(0,Q.gS)((0,Q.rJ)(Ha.db,"tags"),{name:e,createdAt:(0,Q.O5)()}),a={id:t.id,name:e};d.value.push(a),d.value.sort((e,t)=>e.name.localeCompare(t.name)),u.value.push(e),v.value=""}catch(t){c.value="Failed to add new tag.",console.error("Error adding new tag: ",t)}else v.value=""},U=async()=>{const e=g.value.name.trim(),t=g.value.address.trim();if(e&&t){h.value=!0,m.value="";try{const n=(0,Q.P)((0,Q.rJ)(Ha.db,"restaurants"),(0,Q._M)("name","==",e),(0,Q._M)("address","==",t)),o=await(0,Q.GG)(n);if(!o.empty)return m.value="This restaurant already exists in the database.",void(h.value=!1);const l=[g.value.address,g.value.city,g.value.state,g.value.zip].filter(Boolean).join(", "),i=await vt(l);if(!i)return m.value="Could not find a location for the provided address. Please check the address and try again.",void(h.value=!1);const r={...g.value,name:e,address:t,location:i,createdAt:(0,Q.O5)()},c=await(0,Q.gS)((0,Q.rJ)(Ha.db,"restaurants"),r),d={id:c.id,...r};a.value.push(d),a.value.sort((e,t)=>e.name.localeCompare(t.name)),s.value=c.id,p.value=!1,g.value={name:"",address:"",city:"",state:"",zip:"",url:""}}catch(n){console.error("Error saving new restaurant:",n),m.value="Failed to save restaurant. Please try again."}finally{h.value=!1}}else m.value="Restaurant name and address are required."},z=async()=>{w.value=!0,await(0,n.dY)();try{y.value=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}}),k.value&&(k.value.srcObject=y.value)}catch(e){console.error("Error accessing camera: ",e),c.value="Could not access the camera. Please check permissions.",w.value=!1}},S=()=>{y.value&&y.value.getTracks().forEach(e=>e.stop()),w.value=!1},x=()=>{const e=document.createElement("canvas"),t=k.value,a=1280,s=1280;let n=t.videoWidth,o=t.videoHeight;n>o?n>a&&(o*=a/n,n=a):o>s&&(n*=s/o,o=s),e.width=n,e.height=o;const l=e.getContext("2d");l.drawImage(t,0,0,n,o),L.value=e.toDataURL("image/jpeg",.8),S()},N=()=>{L.value=null},P=()=>{R.value.click()},X=e=>{const t=e.target.files[0];if(t){const e=new FileReader;e.onload=e=>{L.value=e.target.result},e.readAsDataURL(t)}},F=async()=>{const e=Ha.auth.currentUser;if(e&&s.value&&0!==o.value){r.value=!0,c.value="";try{let a=null;if(L.value){const t=(0,$.c7)(),s=`reviews/${e.uid}/${Date.now()}.jpg`,n=(0,$.KR)(t,s),o=await(0,$.ls)(n,L.value,"data_url");a=await(0,$.qk)(o.ref)}const n=(0,Q.O5)();await(0,Q.gS)((0,Q.rJ)(Ha.db,"reviews"),{userId:e.uid,restaurantId:s.value,photoURL:a,rating:o.value,text:i.value,tags:u.value,createdAt:n,lastActivityAt:n});const l=(0,Q.P)((0,Q.rJ)(Ha.db,"bucketListItems"),(0,Q._M)("userId","==",e.uid),(0,Q._M)("restaurantId","==",s.value)),r=await(0,Q.GG)(l);if(!r.empty){const e=r.docs[0];await updateDoc(e.ref,{completedAt:n})}t("reviewed")}catch(a){console.error("Error submitting check-in: ",a),c.value="Failed to submit check-in. Please try again."}finally{r.value=!1}}else c.value="Please select a restaurant and provide a rating."};return{restaurants:a,selectedRestaurant:s,rating:o,hoverRating:l,comment:i,submitting:r,errorMessage:c,getStarPath:M,submitReview:F,tags:d,selectedTags:u,newTag:v,toggleTag:I,addNewTag:E,showAddRestaurantForm:p,newRestaurant:g,isSavingRestaurant:h,addRestaurantError:m,saveNewRestaurant:U,isCameraOpen:w,photoDataUrl:L,videoPlayer:k,openCamera:z,closeCamera:S,capturePhoto:x,removePhoto:N,fileInput:R,triggerFileUpload:P,handleFileUpload:X}}},Va=(0,Le.A)(Ta,[["render",Aa],["__scopeId","data-v-ca92e582"]]),Da=Va,Ja={class:"recommendations-page"},Wa={key:0,class:"loading-indicator"},Qa={key:1},$a={key:0,class:"no-restaurants-message"},Oa={key:1,class:"restaurant-list"},qa={class:"restaurant-details"},ja={class:"restaurant-name"},Za={class:"restaurant-meta"},Ya=["title"],es={class:"rating-text"},ts={class:"rating-count"},as={key:1,class:"distance"},ss={class:"restaurant-address"},ns={class:"restaurant-actions"},os=["onClick","title"],ls=["href"],is=["href"],rs=["onClick"];function cs(e,t,a,s,l,i){const r=(0,n.g2)("StarRating");return(0,n.uX)(),(0,n.CE)("div",Ja,[t[3]||(t[3]=(0,n.Lk)("div",{class:"page-header"},[(0,n.Lk)("h2",null,"Top 10 Recommendations"),(0,n.Lk)("p",null,"Based on reviews in the last 6 months within 100 miles of your location.")],-1)),s.loading?((0,n.uX)(),(0,n.CE)("div",Wa,"Loading recommendations...")):((0,n.uX)(),(0,n.CE)("div",Qa,[0===s.restaurants.length?((0,n.uX)(),(0,n.CE)("div",$a," No recommendations found. ")):((0,n.uX)(),(0,n.CE)("ul",Oa,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.restaurants,a=>((0,n.uX)(),(0,n.CE)("li",{key:a.id,class:"restaurant-item"},[(0,n.Lk)("div",qa,[(0,n.Lk)("span",ja,(0,o.v_)(a.name),1),(0,n.Lk)("div",Za,[a.averageRating>0?((0,n.uX)(),(0,n.CE)("div",{key:0,class:"rating",title:`${a.averageRating.toFixed(2)} average rating`},[(0,n.bF)(r,{rating:a.averageRating},null,8,["rating"]),(0,n.Lk)("span",es,(0,o.v_)(a.averageRating.toFixed(1)),1),(0,n.Lk)("span",ts,"("+(0,o.v_)(a.reviewCount)+" recent reviews)",1)],8,Ya)):(0,n.Q3)("",!0),null!==a.distance?((0,n.uX)(),(0,n.CE)("span",as,(0,o.v_)(a.distance.toFixed(1))+" miles away",1)):(0,n.Q3)("",!0)]),(0,n.Lk)("span",ss,(0,o.v_)(a.address)+", "+(0,o.v_)(a.city)+", "+(0,o.v_)(a.state)+" "+(0,o.v_)(a.zip),1)]),(0,n.Lk)("div",ns,[(0,n.Lk)("button",{onClick:e=>s.toggleBucketList(a),class:(0,o.C4)(["action-btn",{"in-bucket-list":s.isInBucketList(a.id)}]),title:s.isInBucketList(a.id)?"Remove from Bucket List":"Add to Bucket List"},t[0]||(t[0]=[(0,n.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor"},[(0,n.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,n.Lk)("path",{d:"M18 7h-2.06c-.33-3.2-2.46-5.8-5.94-5.8S4.39 3.8 4.06 7H2v12h16V7zM6.14 7c.2-1.92 1.6-3.48 3.86-3.8A4.002 4.002 0 0 1 14 7h-2.14c-.2-1.92-1.6-3.48-3.86-3.8zM16 17H4v-8h12v8z"})],-1)]),10,os),(0,n.Lk)("a",{href:s.getDirectionsUrl(a),target:"_blank",rel:"noopener noreferrer",class:"action-btn",title:"Get Directions"},t[1]||(t[1]=[(0,n.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor"},[(0,n.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,n.Lk)("path",{d:"M22.43 10.59l-9.01-9.01c-.75-.75-2.07-.76-2.83 0l-9.01 9.01c-.76.75-.76 2.07 0 2.83l9.01 9.01c.75.75 2.07.75 2.83 0l9.01-9.01c.75-.76.75-2.08 0-2.83zM12 16c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4z"})],-1)]),8,ls),(0,n.Lk)("a",{href:s.getDetailsUrl(a),target:"_blank",rel:"noopener noreferrer",class:"action-btn",title:"View Details on Google"},t[2]||(t[2]=[(0,n.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor"},[(0,n.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,n.Lk)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 5 1.41-1.41L15.5 14zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"})],-1)]),8,is),(0,n.Lk)("button",{class:"check-in-btn",onClick:t=>e.$emit("review-at",a.id)},"Review",8,rs)])]))),128))]))]))])}function ds(e,t,a,s){if(null===e||null===t||null===a||null===s)return 1/0;if(e===a&&t===s)return 0;const n=3959,o=(a-e)*Math.PI/180,l=(s-t)*Math.PI/180,i=Math.sin(o/2)*Math.sin(o/2)+Math.cos(e*Math.PI/180)*Math.cos(a*Math.PI/180)*Math.sin(l/2)*Math.sin(l/2),r=2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i));return n*r}const us={name:"Recommendations",components:{StarRating:Ie},emits:["review-at"],setup(){const e=(0,D.KR)([]),t=(0,D.KR)(!0),a=(0,D.KR)(null),s=(0,D.KR)(new Set);let o=()=>{};const l=async()=>{if(t.value=!0,!a.value)return console.error("User location not available."),t.value=!1,void(e.value=[]);try{const t=await(0,Q.GG)((0,Q.rJ)(Y,"restaurants")),s=t.docs.map(e=>({id:e.id,...e.data()})),n=s.filter(e=>{if(!e.location||"number"!==typeof e.location.lat||"number"!==typeof e.location.lng)return!1;const t=ds(a.value.lat,a.value.lng,e.location.lat,e.location.lng);return e.distance=t,t<=100}),o=new Date;o.setMonth(o.getMonth()-6);const l=Q.Dc.fromDate(o),i=(0,Q.P)((0,Q.rJ)(Y,"reviews"),(0,Q._M)("createdAt",">=",l)),r=await(0,Q.GG)(i),c=r.docs.map(e=>e.data()),d=n.map(e=>{const t=c.filter(t=>t.restaurantId===e.id&&"number"===typeof t.rating);let a=0,s=0;if(t.length>0){const e=t.reduce((e,t)=>e+t.rating,0);a=e/t.length,s=t.length}return{...e,averageRating:a,reviewCount:s}}).filter(e=>e.reviewCount>0);d.sort((e,t)=>t.averageRating-e.averageRating),e.value=d.slice(0,10)}catch(s){console.error("Error fetching recommendations:",s)}finally{t.value=!1}};(0,n.sV)(()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(e=>{a.value={lat:e.coords.latitude,lng:e.coords.longitude},l(),c()},e=>{console.error("Geolocation failed. Using default location.",e),a.value={lat:41.5,lng:-90.5},l(),c()}):(console.error("Geolocation is not supported by this browser."),a.value={lat:41.5,lng:-90.5},l(),c())}),(0,n.hi)(()=>{o()});const i=e=>{const t=encodeURIComponent(`${e.name}, ${e.address}`);return`https://www.google.com/maps/dir/?api=1&destination=${t}`},r=e=>{const t=encodeURIComponent(`${e.name}, ${e.address}`);return`https://www.google.com/search?q=${t}`},c=()=>{const e=j.currentUser;if(!e)return;const t=(0,Q.P)((0,Q.rJ)(Y,"bucketListItems"),(0,Q._M)("userId","==",e.uid));o=(0,Q.aQ)(t,e=>{const t=new Set;e.forEach(e=>t.add(e.data().restaurantId)),s.value=t})},d=e=>s.value.has(e),u=async e=>{const t=j.currentUser;if(t)if(d(e.id)){const a=(0,Q.P)((0,Q.rJ)(Y,"bucketListItems"),(0,Q._M)("userId","==",t.uid),(0,Q._M)("restaurantId","==",e.id)),s=await(0,Q.GG)(a);s.forEach(e=>(0,Q.kd)(e.ref))}else await(0,Q.gS)((0,Q.rJ)(Y,"bucketListItems"),{userId:t.uid,restaurantId:e.id,createdAt:(0,Q.O5)()})};return{restaurants:e,loading:t,getDirectionsUrl:i,getDetailsUrl:r,isInBucketList:d,toggleBucketList:u}}},vs=(0,Le.A)(us,[["render",cs],["__scopeId","data-v-7bbc1c58"]]),ps=vs,gs={class:"stats-page"},hs={class:"stats-container"},ms={key:0},ws={key:1,class:"stats-grid"},Ls={class:"stat-card"},ks={class:"stat-card"},ys={class:"stat-card"},Rs={class:"stat-card"},fs={key:2},Cs={key:3,class:"log-container"};function bs(e,t,a,s,l,i){return(0,n.uX)(),(0,n.CE)("div",gs,[t[5]||(t[5]=(0,n.Lk)("h2",null,"Database Stats",-1)),(0,n.Lk)("div",hs,[s.statsLoading?((0,n.uX)(),(0,n.CE)("div",ms,"Loading stats...")):s.stats?((0,n.uX)(),(0,n.CE)("ul",ws,[(0,n.Lk)("li",Ls,[t[0]||(t[0]=(0,n.Lk)("strong",null,"Restaurants",-1)),(0,n.Lk)("span",null,(0,o.v_)(s.stats.restaurants),1)]),(0,n.Lk)("li",ks,[t[1]||(t[1]=(0,n.Lk)("strong",null,"Users",-1)),(0,n.Lk)("span",null,(0,o.v_)(s.stats.users),1)]),(0,n.Lk)("li",ys,[t[2]||(t[2]=(0,n.Lk)("strong",null,"Reviews",-1)),(0,n.Lk)("span",null,(0,o.v_)(s.stats.reviews),1)]),(0,n.Lk)("li",Rs,[t[3]||(t[3]=(0,n.Lk)("strong",null,"Follows",-1)),(0,n.Lk)("span",null,(0,o.v_)(s.stats.follows),1)])])):((0,n.uX)(),(0,n.CE)("div",fs,"Could not load stats.")),s.log.length>0?((0,n.uX)(),(0,n.CE)("div",Cs,[t[4]||(t[4]=(0,n.Lk)("h3",null,"Log:",-1)),(0,n.Lk)("pre",null,(0,o.v_)(s.log.join("\n")),1)])):(0,n.Q3)("",!0)])])}const Ms={name:"DatabaseStats",setup(){const e=(0,D.KR)(null),t=(0,D.KR)(!0),a=(0,D.KR)([]),s=async()=>{t.value=!0;try{const t=["restaurants","users","reviews","follows"],a={},s=t.map(async e=>{const t=(0,Q.rJ)(Y,e),s=await(0,Q.d_)(t);a[e]=s.data().count});await Promise.all(s),e.value=a}catch(s){a.value.push("Error fetching collection stats: "+s.message),console.error("Error fetching stats:",s)}finally{t.value=!1}};return(0,n.sV)(s),{stats:e,statsLoading:t,log:a}}},Is=(0,Le.A)(Ms,[["render",bs],["__scopeId","data-v-7fa04ecf"]]),Es=Is,Us={class:"my-reviews-page"},zs={key:1,class:"loading-indicator"},Ss={key:2,class:"no-reviews-message"},xs={key:3,class:"reviews-list"},Ns={class:"card-header"},Ps={class:"restaurant-name"},Xs={class:"review-date"},Fs={key:0,class:"photo-container"},_s=["src"],Bs={class:"card-body"},Ks={class:"rating-display"},Gs={key:0,class:"comment-text"},As={key:1,class:"tags-container"},Hs={class:"card-actions"},Ts=["onClick"],Vs=["onClick"];function Ds(e,t,a,s,l,i){const r=(0,n.g2)("EditReviewModal"),c=(0,n.g2)("StarRating");return(0,n.uX)(),(0,n.CE)("div",Us,[s.isEditModalVisible?((0,n.uX)(),(0,n.Wv)(r,{key:0,review:s.reviewToEdit,onClose:s.closeEditModal,onSave:s.handleSaveReview},null,8,["review","onClose","onSave"])):(0,n.Q3)("",!0),s.loading?((0,n.uX)(),(0,n.CE)("div",zs,"Loading your reviews...")):0===s.populatedReviews.length?((0,n.uX)(),(0,n.CE)("div",Ss,[t[1]||(t[1]=(0,n.Lk)("p",null,"You haven't posted any reviews yet.",-1)),(0,n.Lk)("button",{onClick:t[0]||(t[0]=t=>e.$emit("go-to-review"))},"Post your first review!")])):((0,n.uX)(),(0,n.CE)("div",xs,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.populatedReviews,e=>((0,n.uX)(),(0,n.CE)("div",{key:e.id,class:"review-card"},[(0,n.Lk)("div",Ns,[(0,n.Lk)("span",Ps,(0,o.v_)(e.restaurantName),1),(0,n.Lk)("span",Xs,(0,o.v_)(s.formatDate(e.createdAt)),1)]),e.photoURL?((0,n.uX)(),(0,n.CE)("div",Fs,[(0,n.Lk)("img",{src:e.photoURL,alt:"Review photo",class:"check-in-photo"},null,8,_s)])):(0,n.Q3)("",!0),(0,n.Lk)("div",Bs,[(0,n.Lk)("div",Ks,[(0,n.bF)(c,{rating:e.rating},null,8,["rating"])]),e.comment?((0,n.uX)(),(0,n.CE)("p",Gs,'"'+(0,o.v_)(e.comment)+'"',1)):(0,n.Q3)("",!0),e.tags&&e.tags.length>0?((0,n.uX)(),(0,n.CE)("div",As,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.tags,e=>((0,n.uX)(),(0,n.CE)("span",{key:e,class:"tag"},(0,o.v_)(e),1))),128))])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",Hs,[(0,n.Lk)("button",{onClick:t=>s.openEditModal(e),class:"action-btn edit-btn"},"Edit",8,Ts),(0,n.Lk)("button",{onClick:t=>s.handleDeleteReview(e),class:"action-btn delete-btn"},"Delete",8,Vs)])]))),128))]))])}const Js={key:0,class:"modal-content"},Ws={class:"form-group"},Qs={class:"star-rating-input"},$s=["onMouseover","onClick","title"],Os={height:"28px",width:"28px",viewBox:"0 0 24 24",fill:"currentColor"},qs=["d"],js={class:"form-group"},Zs={key:0,class:"photo-preview"},Ys=["src"],en={key:1,class:"photo-actions"},tn={key:0,class:"camera-modal"},an={ref:"videoPlayer",class:"camera-video",autoplay:"",playsinline:""},sn={class:"form-group"},nn={class:"form-group"},on={class:"tags-container"},ln=["onClick"],rn={class:"modal-actions"};function cn(e,t,a,l,i,r){return(0,n.uX)(),(0,n.CE)("div",{class:"modal-overlay",onClick:t[10]||(t[10]=(0,s.D$)(t=>e.$emit("close"),["self"]))},[l.editableReview?((0,n.uX)(),(0,n.CE)("div",Js,[t[19]||(t[19]=(0,n.Lk)("h2",null,"Edit Review",-1)),(0,n.Lk)("form",{onSubmit:t[9]||(t[9]=(0,s.D$)((...e)=>l.onSave&&l.onSave(...e),["prevent"]))},[(0,n.Lk)("div",Ws,[t[12]||(t[12]=(0,n.Lk)("label",null,"Rating",-1)),(0,n.Lk)("div",Qs,[((0,n.uX)(),(0,n.CE)(n.FK,null,(0,n.pI)(5,e=>(0,n.Lk)("span",{key:e,class:"star",onMouseover:t=>l.hoverRating=e,onMouseleave:t[0]||(t[0]=e=>l.hoverRating=0),onClick:t=>l.editableReview.rating=e,title:`${e} star${e>1?"s":""}`},[((0,n.uX)(),(0,n.CE)("svg",Os,[t[11]||(t[11]=(0,n.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"},null,-1)),(0,n.Lk)("path",{d:l.getStarPath(e)},null,8,qs)]))],40,$s)),64))])]),(0,n.Lk)("div",js,[t[15]||(t[15]=(0,n.Lk)("label",null,"Photo",-1)),l.photoDataUrl||l.editableReview.photoURL?((0,n.uX)(),(0,n.CE)("div",Zs,[(0,n.Lk)("img",{src:l.photoDataUrl||l.editableReview.photoURL,alt:"Review photo preview"},null,8,Ys),(0,n.Lk)("button",{type:"button",onClick:t[1]||(t[1]=(...e)=>l.removePhoto&&l.removePhoto(...e)),class:"btn-remove-photo",title:"Remove Photo"},"Ã—")])):((0,n.uX)(),(0,n.CE)("div",en,[(0,n.Lk)("button",{type:"button",onClick:t[2]||(t[2]=(...e)=>l.openCamera&&l.openCamera(...e)),class:"btn-secondary"},t[13]||(t[13]=[(0,n.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor"},[(0,n.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,n.Lk)("circle",{cx:"12",cy:"12",r:"3.2"}),(0,n.Lk)("path",{d:"M9 2L7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2H9zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z"})],-1),(0,n.eW)(" Take a Picture ",-1)])),(0,n.Lk)("button",{type:"button",onClick:t[3]||(t[3]=(...e)=>l.triggerFileUpload&&l.triggerFileUpload(...e)),class:"btn-secondary"},t[14]||(t[14]=[(0,n.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor"},[(0,n.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,n.Lk)("path",{d:"M9 16h6v-6h4l-7-7-7 7h4v6zm3-10.17L14.17 8H13v6h-2V8H9.83L12 5.83zM5 18h14v2H5v-2z"})],-1),(0,n.eW)(" Upload Photo ",-1)])),(0,n.Lk)("input",{type:"file",ref:"fileInput",onChange:t[4]||(t[4]=(...e)=>l.handleFileUpload&&l.handleFileUpload(...e)),accept:"image/*",style:{display:"none"}},null,544)]))]),l.isCameraOpen?((0,n.uX)(),(0,n.CE)("div",tn,[(0,n.Lk)("video",an,null,512),(0,n.Lk)("button",{type:"button",onClick:t[5]||(t[5]=(...e)=>l.capturePhoto&&l.capturePhoto(...e)),class:"btn-capture"},"Capture"),(0,n.Lk)("button",{type:"button",onClick:t[6]||(t[6]=(...e)=>l.closeCamera&&l.closeCamera(...e)),class:"btn-cancel-camera"},"Cancel")])):(0,n.Q3)("",!0),(0,n.Lk)("div",sn,[t[16]||(t[16]=(0,n.Lk)("label",{for:"comment"},"Comment",-1)),(0,n.bo)((0,n.Lk)("textarea",{id:"comment","onUpdate:modelValue":t[7]||(t[7]=e=>l.editableReview.comment=e),rows:"4"},null,512),[[s.Jo,l.editableReview.comment]])]),(0,n.Lk)("div",nn,[t[17]||(t[17]=(0,n.Lk)("label",null,"Tags",-1)),(0,n.Lk)("div",on,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.allTags,e=>((0,n.uX)(),(0,n.CE)("button",{key:e.id,type:"button",class:(0,o.C4)(["tag-btn",{selected:l.editableReview.tags.includes(e.name)}]),onClick:t=>l.toggleTag(e.name)},(0,o.v_)(e.name),11,ln))),128))])]),(0,n.Lk)("div",rn,[(0,n.Lk)("button",{type:"button",class:"btn-cancel",onClick:t[8]||(t[8]=t=>e.$emit("close"))},"Cancel"),t[18]||(t[18]=(0,n.Lk)("button",{type:"submit",class:"btn-save"},"Save Changes",-1))])],32)])):(0,n.Q3)("",!0)])}const dn={name:"EditReviewModal",props:{review:{type:Object,required:!0}},emits:["close","save"],setup(e,{emit:t}){const a=(0,D.KR)(null),s=(0,D.KR)(0),o=(0,D.KR)([]),l=(0,D.KR)(!1),i=(0,D.KR)(null),r=(0,D.KR)(!1),c=(0,D.KR)(null),d=(0,D.KR)(null),u=(0,D.KR)(null),v="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27z",p="M22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.64-7.03L22 9.24zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z";(0,n.wB)(()=>e.review,e=>{e&&(a.value=JSON.parse(JSON.stringify(e)),a.value.tags||(a.value.tags=[]),i.value=null,r.value=!1)},{immediate:!0,deep:!0}),(0,n.sV)(async()=>{const e=(0,Q.P)((0,Q.rJ)(Y,"tags"),(0,Q.My)("name")),t=await(0,Q.GG)(e);o.value=t.docs.map(e=>({id:e.id,...e.data()}))});const g=e=>{const t=s.value||(a.value?a.value.rating:0);return t>=e?v:p},h=e=>{if(!a.value)return;const t=a.value.tags,s=t.indexOf(e);s>-1?t.splice(s,1):t.push(e)},m=()=>{t("save",{reviewData:a.value,newPhotoDataUrl:i.value,photoRemoved:r.value})},w=async()=>{l.value=!0,await(0,n.dY)();try{d.value=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}}),c.value&&(c.value.srcObject=d.value)}catch(e){console.error("Error accessing camera: ",e),l.value=!1}},L=()=>{d.value&&d.value.getTracks().forEach(e=>e.stop()),l.value=!1},k=()=>{const e=document.createElement("canvas"),t=c.value,a=1280,s=1280;let n=t.videoWidth,o=t.videoHeight;n>o?n>a&&(o*=a/n,n=a):o>s&&(n*=s/o,o=s),e.width=n,e.height=o;const l=e.getContext("2d");l.drawImage(t,0,0,n,o),i.value=e.toDataURL("image/jpeg",.8),r.value=!1,L()},y=()=>{i.value=null,a.value&&(a.value.photoURL=null),r.value=!0},R=()=>{u.value.click()},f=e=>{const t=e.target.files[0];if(t){const e=new FileReader;e.onload=e=>{i.value=e.target.result,r.value=!1},e.readAsDataURL(t)}};return{editableReview:a,hoverRating:s,allTags:o,getStarPath:g,toggleTag:h,onSave:m,isCameraOpen:l,photoDataUrl:i,videoPlayer:c,openCamera:w,closeCamera:L,capturePhoto:k,removePhoto:y,fileInput:u,triggerFileUpload:R,handleFileUpload:f}}},un=(0,Le.A)(dn,[["render",cn],["__scopeId","data-v-6a28d33e"]]),vn=un,pn={name:"MyReviews",components:{StarRating:Ie,EditReviewModal:vn},emits:["go-to-review"],setup(){const e=(0,D.KR)(!0),t=(0,D.KR)([]),a=(0,D.KR)(new Map),s=(0,D.KR)(!1),o=(0,D.KR)(null),l=async()=>{e.value=!0;const s=j.currentUser;if(s)try{const[e,n]=await Promise.all([(0,Q.GG)((0,Q.P)((0,Q.rJ)(Y,"reviews"),(0,Q._M)("userId","==",s.uid),(0,Q.My)("createdAt","desc"))),(0,Q.GG)((0,Q.rJ)(Y,"restaurants"))]);n.forEach(e=>{a.value.set(e.id,e.data())}),t.value=e.docs.map(e=>({id:e.id,...e.data()}))}catch(n){console.error("Error fetching reviews:",n)}finally{e.value=!1}else e.value=!1};(0,n.sV)(l);const i=(0,n.EW)(()=>t.value.map(e=>({...e,comment:e.text,restaurantName:a.value.get(e.restaurantId)?.name||"Unknown Restaurant"}))),r=e=>e&&e.toDate?e.toDate().toLocaleDateString():"",c=e=>{o.value=e,s.value=!0},d=()=>{s.value=!1,o.value=null},u=async e=>{if(window.confirm("Are you sure you want to delete this review? This action cannot be undone."))try{if(e.photoURL){const t=(0,$.c7)(),a=(0,$.KR)(t,e.photoURL);await(0,$.XR)(a).catch(e=>console.error("Error deleting old photo:",e))}const a=(0,Q.H9)(Y,"reviews",e.id);await(0,Q.kd)(a),t.value=t.value.filter(t=>t.id!==e.id)}catch(a){console.error("Error deleting review:",a),alert("Failed to delete review. Please try again.")}},v=async e=>{const{reviewData:a,newPhotoDataUrl:s,photoRemoved:n}=e,o=t.value.find(e=>e.id===a.id);try{let e=o.photoURL;const l=(0,$.c7)();if((s||n)&&o.photoURL){const e=(0,$.KR)(l,o.photoURL);await(0,$.XR)(e).catch(e=>console.warn("Could not delete old photo:",e))}if(s){const t=j.currentUser,a=`reviews/${t.uid}/${Date.now()}.jpg`,n=(0,$.KR)(l,a),o=await(0,$.ls)(n,s,"data_url");e=await(0,$.qk)(o.ref)}else n&&(e=null);const i=(0,Q.H9)(Y,"reviews",a.id);await(0,Q.mZ)(i,{rating:a.rating,text:a.comment,tags:a.tags,photoURL:e});const r=t.value.findIndex(e=>e.id===a.id);-1!==r&&(t.value[r]={...t.value[r],...a,photoURL:e}),d()}catch(l){console.error("Error updating review:",l),alert("Failed to update review. Please try again.")}};return{loading:e,populatedReviews:i,formatDate:r,isEditModalVisible:s,reviewToEdit:o,openEditModal:c,closeEditModal:d,handleDeleteReview:u,handleSaveReview:v}}},gn=(0,Le.A)(pn,[["render",Ds],["__scopeId","data-v-a39a1f60"]]),hn=gn,mn={class:"leaderboard-page"},wn={key:0,class:"loading-indicator"},Ln={key:1,class:"no-users-message"},kn={key:2,class:"leaderboard-list"},yn={class:"rank-container"},Rn={class:"rank"},fn={key:0,class:"medal"},Cn=["src"],bn={class:"user-info"},Mn={class:"user-name"},In={class:"review-count"};function En(e,t,a,s,l,i){return(0,n.uX)(),(0,n.CE)("div",mn,[t[1]||(t[1]=(0,n.Lk)("div",{class:"page-header"},[(0,n.Lk)("h2",null,"Leaderboard"),(0,n.Lk)("p",null,"Top 10 reviewers")],-1)),s.loading?((0,n.uX)(),(0,n.CE)("div",wn,"Loading leaderboard...")):0===s.users.length?((0,n.uX)(),(0,n.CE)("div",Ln,t[0]||(t[0]=[(0,n.Lk)("p",null,"No users to display on the leaderboard yet.",-1)]))):((0,n.uX)(),(0,n.CE)("ol",kn,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.users,(e,t)=>((0,n.uX)(),(0,n.CE)("li",{key:e.uid,class:(0,o.C4)(["leaderboard-item",s.getRankClass(t)])},[(0,n.Lk)("div",yn,[(0,n.Lk)("span",Rn,(0,o.v_)(t+1),1),s.getMedal(t)?((0,n.uX)(),(0,n.CE)("span",fn,(0,o.v_)(s.getMedal(t)),1)):(0,n.Q3)("",!0)]),(0,n.Lk)("img",{src:e.photoURL||"https://cdn-icons-png.flaticon.com/512/149/149071.png",alt:"User",class:"user-avatar",referrerpolicy:"no-referrer"},null,8,Cn),(0,n.Lk)("div",bn,[(0,n.Lk)("span",Mn,(0,o.v_)(e.displayName),1),(0,n.Lk)("span",In,(0,o.v_)(e.reviewCount||0)+" reviews",1)])],2))),128))]))])}const Un={name:"Leaderboard",setup(){const e=(0,D.KR)(!0),t=(0,D.KR)([]);let a=()=>{};(0,n.sV)(()=>{try{const s=(0,Q.P)((0,Q.rJ)(Y,"users"),(0,Q.My)("reviewCount","desc"),(0,Q.AB)(10));a=(0,Q.aQ)(s,a=>{t.value=a.docs.map(e=>e.data()),e.value=!1},t=>{console.error("Error fetching leaderboard:",t),e.value=!1})}catch(s){console.error("Error setting up leaderboard listener:",s),e.value=!1}}),(0,n.hi)(()=>{a()});const s=e=>0===e?"ðŸ¥‡":1===e?"ðŸ¥ˆ":2===e?"ðŸ¥‰":e>=3&&e<10?"ðŸ…":null,o=e=>0===e?"rank-gold":1===e?"rank-silver":2===e?"rank-bronze":e>=3&&e<10?"rank-regular":"";return{loading:e,users:t,getMedal:s,getRankClass:o}}},zn=(0,Le.A)(Un,[["render",En],["__scopeId","data-v-3b1a9780"]]),Sn=zn,xn={class:"followers-page"},Nn={key:0},Pn={key:1},Xn={key:0,class:"no-followers-message"},Fn={class:"user-card-content"},_n={class:"user-info"},Bn=["src"],Kn={class:"user-name"},Gn={key:0,class:"last-review"},An={class:"review-header"},Hn={class:"review-body"},Tn={key:0,class:"review-text"},Vn={key:1,class:"last-review no-review"},Dn={class:"user-actions"},Jn=["onClick"];function Wn(e,t,a,s,l,i){const r=(0,n.g2)("UserReviewsModal"),c=(0,n.g2)("StarRating");return(0,n.uX)(),(0,n.CE)(n.FK,null,[s.isReviewsModalVisible?((0,n.uX)(),(0,n.Wv)(r,{key:0,user:s.userForReviews,onClose:s.closeReviewsModal},null,8,["user","onClose"])):(0,n.Q3)("",!0),(0,n.Lk)("div",xn,[s.loading?((0,n.uX)(),(0,n.CE)("div",Nn,"Loading followers...")):((0,n.uX)(),(0,n.CE)("div",Pn,[0===s.followers.length?((0,n.uX)(),(0,n.CE)("div",Xn,t[0]||(t[0]=[(0,n.Lk)("span",null,"No one is following you yet.",-1)]))):(0,n.Q3)("",!0),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.followers,e=>((0,n.uX)(),(0,n.CE)("div",{key:e.uid,class:"user-card"},[(0,n.Lk)("div",Fn,[(0,n.Lk)("div",_n,[(0,n.Lk)("img",{src:e.photoURL||"https://cdn-icons-png.flaticon.com/512/149/149071.png",class:"user-avatar",alt:"User"},null,8,Bn),(0,n.Lk)("div",null,[(0,n.Lk)("span",Kn,(0,o.v_)(e.displayName),1)])]),e.lastReview?((0,n.uX)(),(0,n.CE)("div",Gn,[(0,n.Lk)("div",An,[t[1]||(t[1]=(0,n.eW)(" Latest review: ",-1)),(0,n.Lk)("strong",null,(0,o.v_)(e.lastReview.restaurantName),1)]),(0,n.Lk)("div",Hn,[(0,n.bF)(c,{rating:e.lastReview.rating},null,8,["rating"]),e.lastReview.text?((0,n.uX)(),(0,n.CE)("p",Tn,'"'+(0,o.v_)(e.lastReview.text)+'"',1)):(0,n.Q3)("",!0)])])):((0,n.uX)(),(0,n.CE)("div",Vn," No reviews yet. "))]),(0,n.Lk)("div",Dn,[(0,n.Lk)("button",{onClick:t=>s.openReviewsModal(e),class:"action-btn",title:"View Reviews"},t[2]||(t[2]=[(0,n.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor"},[(0,n.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,n.Lk)("path",{d:"M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H6l-2 2V4h16v12z"})],-1)]),8,Jn)])]))),128))]))])],64)}const Qn={class:"modal-content"},$n={class:"modal-header"},On={class:"modal-body"},qn={key:0,class:"loading-indicator"},jn={key:1,class:"no-reviews-message"},Zn={key:2,class:"reviews-list"},Yn={class:"review-header"},eo={class:"restaurant-name"},to={class:"review-date"},ao={class:"review-body"},so={key:0,class:"review-text"},no=["src"],oo={key:2,class:"tags-container"};function lo(e,t,a,l,i,r){const c=(0,n.g2)("StarRating");return(0,n.uX)(),(0,n.CE)("div",{class:"modal-overlay",onClick:t[1]||(t[1]=(0,s.D$)(t=>e.$emit("close"),["self"]))},[(0,n.Lk)("div",Qn,[(0,n.Lk)("div",$n,[(0,n.Lk)("h2",null,"Reviews by "+(0,o.v_)(a.user.displayName),1),(0,n.Lk)("button",{onClick:t[0]||(t[0]=t=>e.$emit("close")),class:"close-btn"},"Ã—")]),(0,n.Lk)("div",On,[l.loading?((0,n.uX)(),(0,n.CE)("div",qn,"Loading reviews...")):0===l.reviews.length?((0,n.uX)(),(0,n.CE)("div",jn," This user hasn't posted any reviews yet. ")):((0,n.uX)(),(0,n.CE)("ul",Zn,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.reviews,e=>((0,n.uX)(),(0,n.CE)("li",{key:e.id,class:"review-item"},[(0,n.Lk)("div",Yn,[(0,n.Lk)("span",eo,(0,o.v_)(e.restaurantName),1),(0,n.Lk)("span",to,(0,o.v_)(l.formatDate(e.createdAt)),1)]),(0,n.Lk)("div",ao,[(0,n.bF)(c,{rating:e.rating},null,8,["rating"]),e.text?((0,n.uX)(),(0,n.CE)("p",so,'"'+(0,o.v_)(e.text)+'"',1)):(0,n.Q3)("",!0),e.photoURL?((0,n.uX)(),(0,n.CE)("img",{key:1,src:e.photoURL,alt:"Review photo",class:"review-photo"},null,8,no)):(0,n.Q3)("",!0),e.tags&&e.tags.length>0?((0,n.uX)(),(0,n.CE)("div",oo,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.tags,e=>((0,n.uX)(),(0,n.CE)("span",{key:e,class:"tag"},(0,o.v_)(e),1))),128))])):(0,n.Q3)("",!0)])]))),128))]))])])])}const io={name:"UserReviewsModal",components:{StarRating:Ie},props:{user:{type:Object,required:!0}},emits:["close"],setup(e){const t=(0,D.KR)([]),a=(0,D.KR)(!0),s=async()=>{if(!e.user?.uid)return t.value=[],void(a.value=!1);a.value=!0,t.value=[];try{const a=await(0,Q.GG)((0,Q.rJ)(Y,"restaurants")),s=new Map;a.forEach(e=>{s.set(e.id,e.data().name)});const n=(0,Q.P)((0,Q.rJ)(Y,"reviews"),(0,Q._M)("userId","==",e.user.uid),(0,Q.My)("createdAt","desc")),o=await(0,Q.GG)(n);t.value=o.docs.map(e=>{const t=e.data();return{id:e.id,...t,restaurantName:s.get(t.restaurantId)||"Unknown Restaurant"}})}catch(s){console.error("Error fetching user reviews:",s)}finally{a.value=!1}};(0,n.wB)(()=>e.user,e=>{e&&s()},{immediate:!0});const o=e=>e&&e.toDate?e.toDate().toLocaleDateString():"";return{reviews:t,loading:a,formatDate:o}}},ro=(0,Le.A)(io,[["render",lo],["__scopeId","data-v-33107a52"]]),co=ro,uo={name:"Followers",components:{UserReviewsModal:co,StarRating:Ie},setup(){const e=(0,D.KR)([]),t=(0,D.KR)(!0),a=(0,D.KR)(!1),s=(0,D.KR)(null),o=async()=>{t.value=!0;const a=j.currentUser;if(!a)return void(t.value=!1);const s=(0,Q.P)((0,Q.rJ)(Y,"follows"),(0,Q._M)("followingId","==",a.uid)),n=await(0,Q.GG)(s),o=n.docs.map(e=>e.data().followerId);if(0===o.length)return e.value=[],void(t.value=!1);const l=await(0,Q.GG)((0,Q.rJ)(Y,"restaurants")),i=new Map;l.forEach(e=>{i.set(e.id,e.data().name)});const r=[];for(let e=0;e<o.length;e+=30){const t=o.slice(e,e+30);if(t.length>0){const e=(0,Q.P)((0,Q.rJ)(Y,"users"),(0,Q._M)("uid","in",t)),a=await(0,Q.GG)(e);a.forEach(e=>{r.push({uid:e.id,...e.data()})})}}const c=await Promise.all(r.map(async e=>{const t=(0,Q.P)((0,Q.rJ)(Y,"reviews"),(0,Q._M)("userId","==",e.uid),(0,Q.My)("createdAt","desc"),(0,Q.AB)(1)),a=await(0,Q.GG)(t);let s=null;if(!a.empty){const e=a.docs[0].data();s={...e,restaurantName:i.get(e.restaurantId)||"Unknown Restaurant"}}return{...e,lastReview:s}}));e.value=c,t.value=!1};(0,n.sV)(o);const l=e=>{s.value=e,a.value=!0},i=()=>{a.value=!1,s.value=null};return{followers:e,loading:t,isReviewsModalVisible:a,userForReviews:s,openReviewsModal:l,closeReviewsModal:i}}},vo=(0,Le.A)(uo,[["render",Wn],["__scopeId","data-v-9fa36902"]]),po=vo,go={class:"bucket-list-page"},ho={class:"page-header"},mo={class:"view-toggle"},wo={key:0,class:"loading-indicator"},Lo={key:1,class:"no-items-message"},ko={key:0},yo={key:1},Ro={key:2,class:"restaurant-list"},fo={class:"restaurant-details"},Co={class:"restaurant-name"},bo={class:"restaurant-meta"},Mo=["title"],Io={class:"rating-text"},Eo={class:"rating-count"},Uo={key:1,class:"distance"},zo={class:"restaurant-address"},So={class:"restaurant-actions"},xo=["onClick"],No=["onClick"];function Po(e,t,a,s,l,i){const r=(0,n.g2)("StarRating");return(0,n.uX)(),(0,n.CE)("div",go,[(0,n.Lk)("div",ho,[t[2]||(t[2]=(0,n.Lk)("h2",null,"My Bucket List",-1)),(0,n.Lk)("div",mo,[(0,n.Lk)("button",{onClick:t[0]||(t[0]=e=>s.showCompleted=!1),class:(0,o.C4)({active:!s.showCompleted})},"To Try",2),(0,n.Lk)("button",{onClick:t[1]||(t[1]=e=>s.showCompleted=!0),class:(0,o.C4)({active:s.showCompleted})},"Completed",2)])]),s.loading?((0,n.uX)(),(0,n.CE)("div",wo,"Loading your bucket list...")):0===s.filteredItems.length?((0,n.uX)(),(0,n.CE)("div",Lo,[s.showCompleted?((0,n.uX)(),(0,n.CE)("p",yo,"You haven't completed any bucket list items yet.")):((0,n.uX)(),(0,n.CE)("p",ko,"Your bucket list is empty. Add some restaurants to try!"))])):((0,n.uX)(),(0,n.CE)("div",Ro,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.filteredItems,t=>((0,n.uX)(),(0,n.CE)("div",{key:t.id,class:"restaurant-item"},[(0,n.Lk)("div",fo,[(0,n.Lk)("span",Co,(0,o.v_)(t.restaurant.name),1),(0,n.Lk)("div",bo,[t.restaurant.averageRating>0?((0,n.uX)(),(0,n.CE)("div",{key:0,class:"rating",title:`${t.restaurant.averageRating.toFixed(2)} average rating`},[(0,n.bF)(r,{rating:t.restaurant.averageRating},null,8,["rating"]),(0,n.Lk)("span",Io,(0,o.v_)(t.restaurant.averageRating.toFixed(1)),1),(0,n.Lk)("span",Eo,"("+(0,o.v_)(t.restaurant.ratingCount)+")",1)],8,Mo)):(0,n.Q3)("",!0),null!==t.restaurant.distance?((0,n.uX)(),(0,n.CE)("span",Uo,(0,o.v_)(t.restaurant.distance.toFixed(1))+" miles away ",1)):(0,n.Q3)("",!0)]),(0,n.Lk)("span",zo,[(0,n.eW)((0,o.v_)(t.restaurant.address),1),t.restaurant.city?((0,n.uX)(),(0,n.CE)(n.FK,{key:0},[(0,n.eW)(", "+(0,o.v_)(t.restaurant.city),1)],64)):(0,n.Q3)("",!0),t.restaurant.state?((0,n.uX)(),(0,n.CE)(n.FK,{key:1},[(0,n.eW)(", "+(0,o.v_)(t.restaurant.state),1)],64)):(0,n.Q3)("",!0),t.restaurant.zip?((0,n.uX)(),(0,n.CE)(n.FK,{key:2},[(0,n.eW)((0,o.v_)(t.restaurant.zip),1)],64)):(0,n.Q3)("",!0)])]),(0,n.Lk)("div",So,[(0,n.Lk)("button",{onClick:e=>s.removeFromBucketList(t.id),class:"action-btn delete-btn"},"Remove",8,xo),(0,n.Lk)("button",{class:"check-in-btn",onClick:a=>e.$emit("review-at",t.restaurantId)},"Review",8,No)])]))),128))]))])}const Xo={name:"BucketList",components:{StarRating:Ie},emits:["review-at"],setup(){const e=(0,D.KR)([]),t=(0,D.KR)(!0),a=(0,D.KR)(!1),s=(0,D.KR)(null);let o=()=>{};const l=()=>{const a=j.currentUser;if(!a)return void(t.value=!1);const n=(0,Q.P)((0,Q.rJ)(Y,"bucketListItems"),(0,Q._M)("userId","==",a.uid));o=(0,Q.aQ)(n,async a=>{t.value=!0;const n=a.docs.map(e=>({id:e.id,...e.data()}));if(0===n.length)return e.value=[],void(t.value=!1);const o=[...new Set(n.map(e=>e.restaurantId))],l=new Map;if(o.length>0){for(let e=0;e<o.length;e+=30){const t=o.slice(e,e+30),a=(0,Q.P)((0,Q.rJ)(Y,"restaurants"),(0,Q._M)((0,Q.Fs)(),"in",t)),s=await(0,Q.GG)(a);s.forEach(e=>l.set(e.id,{id:e.id,...e.data()}))}const t=(0,Q.P)((0,Q.rJ)(Y,"reviews"),(0,Q._M)("restaurantId","in",o)),a=await(0,Q.GG)(t),i={};a.forEach(e=>{const t=e.data();t.restaurantId&&"number"===typeof t.rating&&(i[t.restaurantId]||(i[t.restaurantId]={total:0,count:0}),i[t.restaurantId].total+=t.rating,i[t.restaurantId].count++)}),e.value=n.map(e=>{const t=l.get(e.restaurantId);if(!t)return null;const a=i[t.id];return t.averageRating=a?a.total/a.count:0,t.ratingCount=a?a.count:0,t.distance=s.value&&t.location?Ee(s.value.lat,s.value.lng,t.location.lat,t.location.lng):null,{...e,restaurant:t}}).filter(Boolean)}else e.value=[];t.value=!1})};(0,n.sV)(()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(e=>{s.value={lat:e.coords.latitude,lng:e.coords.longitude},l()},e=>{console.error("Error getting location for bucket list",e),l()}):l()}),(0,n.hi)(()=>{o()});const i=(0,n.EW)(()=>{const t=e.value.filter(e=>a.value?!!e.completedAt:!e.completedAt);return t.sort((e,t)=>null===e.restaurant.distance?1:null===t.restaurant.distance?-1:e.restaurant.distance-t.restaurant.distance)}),r=async e=>{confirm("Are you sure you want to remove this from your bucket list?")&&await(0,Q.kd)((0,Q.H9)(Y,"bucketListItems",e))},c=e=>{const t=encodeURIComponent(`${e.name}, ${e.address}`);return`https://www.google.com/maps/dir/?api=1&destination=${t}`},d=e=>{const t=encodeURIComponent(`${e.name}, ${e.address}`);return`https://www.google.com/search?q=${t}`};return{loading:t,showCompleted:a,filteredItems:i,removeFromBucketList:r,getDirectionsUrl:c,getDetailsUrl:d}}},Fo=(0,Le.A)(Xo,[["render",Po],["__scopeId","data-v-62d271c8"]]),_o=Fo,Bo={class:"following-page"},Ko={key:0},Go={key:1},Ao={key:0,class:"no-users-message"},Ho={class:"user-card-content"},To={class:"user-info"},Vo=["src"],Do={class:"user-name"},Jo={key:0,class:"last-review"},Wo={class:"review-header"},Qo={class:"review-body"},$o={key:0,class:"review-text"},Oo={key:1,class:"last-review no-review"},qo={class:"user-actions"},jo=["onClick"],Zo=["onClick"];function Yo(e,t,a,s,l,i){const r=(0,n.g2)("UserReviewsModal"),c=(0,n.g2)("StarRating");return(0,n.uX)(),(0,n.CE)(n.FK,null,[s.isReviewsModalVisible?((0,n.uX)(),(0,n.Wv)(r,{key:0,user:s.userForReviews,onClose:s.closeReviewsModal},null,8,["user","onClose"])):(0,n.Q3)("",!0),(0,n.Lk)("div",Bo,[s.loading?((0,n.uX)(),(0,n.CE)("div",Ko,"Loading users you follow...")):((0,n.uX)(),(0,n.CE)("div",Go,[0===s.following.length?((0,n.uX)(),(0,n.CE)("div",Ao,t[0]||(t[0]=[(0,n.Lk)("span",null,"You are not following anyone yet.",-1)]))):(0,n.Q3)("",!0),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.following,e=>((0,n.uX)(),(0,n.CE)("div",{key:e.uid,class:"user-card"},[(0,n.Lk)("div",Ho,[(0,n.Lk)("div",To,[(0,n.Lk)("img",{src:e.photoURL||"https://cdn-icons-png.flaticon.com/512/149/149071.png",class:"user-avatar",alt:"User"},null,8,Vo),(0,n.Lk)("div",null,[(0,n.Lk)("span",Do,(0,o.v_)(e.displayName),1)])]),e.lastReview?((0,n.uX)(),(0,n.CE)("div",Jo,[(0,n.Lk)("div",Wo,[t[1]||(t[1]=(0,n.eW)(" Latest review: ",-1)),(0,n.Lk)("strong",null,(0,o.v_)(e.lastReview.restaurantName),1)]),(0,n.Lk)("div",Qo,[(0,n.bF)(c,{rating:e.lastReview.rating},null,8,["rating"]),e.lastReview.text?((0,n.uX)(),(0,n.CE)("p",$o,'"'+(0,o.v_)(e.lastReview.text)+'"',1)):(0,n.Q3)("",!0)])])):((0,n.uX)(),(0,n.CE)("div",Oo," No reviews yet. "))]),(0,n.Lk)("div",qo,[(0,n.Lk)("button",{onClick:t=>s.openReviewsModal(e),class:"action-btn",title:"View Reviews"},t[2]||(t[2]=[(0,n.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor"},[(0,n.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,n.Lk)("path",{d:"M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H6l-2 2V4h16v12z"})],-1)]),8,jo),(0,n.Lk)("button",{onClick:t=>s.unfollowUser(e),class:"unfollow-btn"},"Unfollow",8,Zo)])]))),128))]))])],64)}const el={name:"Following",components:{StarRating:Ie,UserReviewsModal:co},setup(){const e=(0,D.KR)([]),t=(0,D.KR)(!0),a=(0,D.KR)(!1),s=(0,D.KR)(null);let o=()=>{};const l=()=>{t.value=!0;const a=j.currentUser;if(!a)return void(t.value=!1);const s=(0,Q.P)((0,Q.rJ)(Y,"follows"),(0,Q._M)("followerId","==",a.uid));o=(0,Q.aQ)(s,async a=>{const s=a.docs.map(e=>e.data().followingId);if(0===s.length)return e.value=[],void(t.value=!1);const n=await(0,Q.GG)((0,Q.rJ)(Y,"restaurants")),o=new Map;n.forEach(e=>{o.set(e.id,e.data().name)});const l=[];for(let e=0;e<s.length;e+=30){const t=s.slice(e,e+30);if(t.length>0){const e=(0,Q.P)((0,Q.rJ)(Y,"users"),(0,Q._M)("uid","in",t)),a=await(0,Q.GG)(e);a.forEach(e=>{l.push({uid:e.id,...e.data()})})}}const i=await Promise.all(l.map(async e=>{const t=(0,Q.P)((0,Q.rJ)(Y,"reviews"),(0,Q._M)("userId","==",e.uid),(0,Q.My)("createdAt","desc"),(0,Q.AB)(1)),a=await(0,Q.GG)(t);let s=null;if(!a.empty){const e=a.docs[0].data();s={...e,restaurantName:o.get(e.restaurantId)||"Unknown Restaurant"}}return{...e,lastReview:s}}));e.value=i,t.value=!1},e=>{console.error("Error listening to following collection:",e),t.value=!1})},i=async e=>{const t=j.currentUser;if(t&&window.confirm(`Are you sure you want to unfollow ${e.displayName}?`))try{const a=(0,Q.P)((0,Q.rJ)(Y,"follows"),(0,Q._M)("followerId","==",t.uid),(0,Q._M)("followingId","==",e.uid)),s=await(0,Q.GG)(a);if(!s.empty){const e=s.docs[0].id;await(0,Q.kd)((0,Q.H9)(Y,"follows",e))}}catch(a){console.error("Error unfollowing user:",a),alert("Failed to unfollow user. Please try again.")}};(0,n.sV)(l),(0,n.hi)(()=>{o()});const r=e=>{s.value=e,a.value=!0},c=()=>{a.value=!1,s.value=null};return{following:e,loading:t,unfollowUser:i,isReviewsModalVisible:a,userForReviews:s,openReviewsModal:r,closeReviewsModal:c}}},tl=(0,Le.A)(el,[["render",Yo],["__scopeId","data-v-123e3f98"]]),al=tl;async function sl(){const e=[{name:"The Chocolate Moose",address:"101 N Main St",city:"Farmland",state:"IN",zip:"47340",url:"",location:{lat:40.1878913,lng:-85.1279397},description:"",photoURL:""},{name:"Smitty's Bar & Grill",address:"125 Mall St",city:"Leonore",state:"IL",zip:"61332",url:"",location:{lat:41.1887214,lng:-88.9804186},description:"",photoURL:""},{name:"The Wooden Spoon Diner",address:"5120 S Dale Mabry Hwy",city:"Tampa",state:"FL",zip:"33611",url:"",location:{lat:27.9255773,lng:-82.2708432},description:"",photoURL:""},{name:"Mutts On 13th",address:"1517 13th St",city:"St Cloud",state:"FL",zip:"34769",url:"",location:{lat:28.2457148,lng:-81.2865585},description:"",photoURL:""},{name:"The Cup Diner",address:"1418 13th St",city:"St Cloud",state:"FL",zip:"34769",url:"",location:{lat:28.2456404,lng:-81.2851104},description:"",photoURL:""},{name:"Edinburgh Diner",address:"221 E Main Cross St",city:"Edinburgh",state:"IN",zip:"46124",url:"",location:{lat:39.3514394,lng:-85.9715215},description:"",photoURL:""},{name:"Moon Glo Bar & Grill",address:"1204 E Main St",city:"Westville",state:"IL",zip:"61883",url:"",location:{lat:40.1041169,lng:-87.5640457},description:"",photoURL:""},{name:"One Eyed Jack's",address:"108 N Monticello St",city:"Winamac",state:"IN",zip:"46996",url:"",location:{lat:41.0517368,lng:-86.6043211},description:"",photoURL:""},{name:"ACME by Full Circle",address:"1105 E State Blvd",city:"Fort Wayne",state:"IN",zip:"46805",url:"",location:{lat:41.096893,lng:-85.1248578},description:"",photoURL:""},{name:"Bufordâ€™s",address:"201 E North St",city:"Cisco",state:"IL",zip:"61830",url:"",location:{lat:39.9665963,lng:-88.3455253},description:"",photoURL:""},{name:"The Dirty Bird - Sycamore",address:"160 W Lincoln Hwy",city:"Sycamore",state:"IL",zip:"60178",url:"",location:{lat:41.9878971,lng:-88.6858541},description:"",photoURL:""},{name:"Bernadotte Cafe & bar",address:"2390 IL-95",city:"Ipava",state:"IL",zip:"61441",url:"",location:{lat:40.4021405,lng:-90.3215325},description:"",photoURL:""},{name:"Diesel Tap House",address:"2669 Buford Hwy NE",city:"Buford",state:"GA",zip:"30518",url:"",location:{lat:34.1237945,lng:-83.9849624},description:"",photoURL:""},{name:"Chubbies Pub And Grub",address:"1201 S Huntington St",city:"Syracuse",state:"IN",zip:"46567",url:"",location:{lat:41.407773,lng:-85.7464621},description:"",photoURL:""},{name:"Rustic Cafe",address:"101 W 2nd St",city:"Delphos",state:"OH",zip:"45833",url:"",location:{lat:40.8435363,lng:-84.339261},description:"",photoURL:""},{name:"Sheridan's Walton Tap Inc",address:"101 Main St",city:"Walton",state:"IL",zip:"61376",url:"",location:{lat:41.7153329,lng:-89.4387486},description:"",photoURL:""},{name:"The Tin Plate, Fine Food & Spirits",address:"211 S Anderson St",city:"Elwood",state:"IN",zip:"46036",url:"",location:{lat:40.2675543,lng:-85.8312155},description:"",photoURL:""},{name:"Nick's Kitchen",address:"506 N Jefferson St",city:"Huntington",state:"IN",zip:"46750",url:"",location:{lat:40.8827217,lng:-85.4959158},description:"",photoURL:""},{name:"Route No. 73 Brew & Chew",address:"111 S Main St",city:"Pearl City",state:"IL",zip:"61062",url:"",location:{lat:42.2652713,lng:-89.8258878},description:"",photoURL:""},{name:"St Philipâ€™s Inn",address:"11200 Upper Mt Vernon Rd",city:"Evansville",state:"IN",zip:"47712",url:"",location:{lat:37.9930135,lng:-87.7137676},description:"",photoURL:""},{name:"Miller's Tavern",address:"230 E Main St",city:"North Vernon",state:"IN",zip:"47265",url:"",location:{lat:39.0053468,lng:-85.6248876},description:"",photoURL:""},{name:"Pudgee's Eatery and Market",address:"105 S Main St",city:"Wildwood",state:"FL",zip:"34785",url:"",location:{lat:28.7728958,lng:-82.2946701},description:"",photoURL:""},{name:"Dooley O'Toole's",address:"160 E Carmel Dr",city:"Carmel",state:"IN",zip:"46032",url:"",location:{lat:39.9618023,lng:-86.1241367},description:"",photoURL:""},{name:"Mac's Diner",address:"109 W Main St",city:"Litchfield",state:"IL",zip:"62056",url:"",location:{lat:39.2554588,lng:-89.3470077},description:"",photoURL:""},{name:"Motor Inn Travel Plaza",address:"1800 E Lincoln Hwy",city:"Wapakoneta",state:"OH",zip:"45895",url:"",location:{lat:40.6522766,lng:-84.5810121},description:"",photoURL:""},{name:"Pilgrim Family Restaurant",address:"1505 W Main Cross St",city:"Findlay",state:"OH",zip:"45840",url:"",location:{lat:41.0418201,lng:-83.6752141},description:"",photoURL:""},{name:"Benny's Off the Water",address:"11331 E Daugherty Ln",city:"Milltown",state:"IN",zip:"47145",url:"",location:{lat:38.3792719,lng:-86.6433131},description:"",photoURL:""},{name:"Steve's Place",address:"2110 Cleveland Ave",city:"Fort Myers",state:"FL",zip:"33901",url:"",location:{lat:26.6902724,lng:-81.862471},description:"",photoURL:""},{name:"Storie's Restaurant",address:"109 E Main St",city:"Greensburg",state:"IN",zip:"47240",url:"",location:{lat:39.3364564,lng:-85.4837691},description:"",photoURL:""},{name:"Klooz Brewz, Brewery & Public House",address:"125 N Main St",city:"Lebanon",state:"IN",zip:"46052",url:"",location:{lat:40.048319,lng:-86.4677371},description:"",photoURL:""},{name:"Brothers Family Restaurant",address:"2400 16th St",city:"Moline",state:"IL",zip:"61265",url:"",location:{lat:41.5790331,lng:-90.35113},description:"",photoURL:""},{name:"The Grill",address:"101 W Main St",city:"Greenfield",state:"IN",zip:"46140",url:"",location:{lat:39.8902869,lng:-85.9301673},description:"",photoURL:""},{name:"Westwoods Lodge Pub & Grill",address:"2406 W Jefferson St",city:"Springfield",state:"IL",zip:"62702",url:"",location:{lat:39.8129372,lng:-89.6964892},description:"",photoURL:""},{name:"The 318 Restaurant",address:"318 N Main St",city:"Farmer City",state:"IL",zip:"61842",url:"",location:{lat:41.1212189,lng:-88.8320081},description:"",photoURL:""},{name:"Park Restaurant",address:"20 S Park Ave",city:"New Castle",state:"IN",zip:"47362",url:"",location:{lat:39.9165274,lng:-85.384495},description:"",photoURL:""},{name:"Crossroads Family Restaurant",address:"7230 US-52",city:"West Harrison",state:"IN",zip:"47060",url:"",location:{lat:39.07,lng:-85.2605556},description:"",photoURL:""},{name:"John's Famous Stew",address:"1146 Kentucky Ave",city:"Indianapolis",state:"IN",zip:"46221",url:"",location:{lat:39.7526208,lng:-86.177867},description:"",photoURL:""},{name:"Uncle Vait's Pizza",address:"101 N Main St",city:"Forrest",state:"IL",zip:"61741",url:"",location:{lat:40.6416779,lng:-88.7911391},description:"",photoURL:""},{name:"Palomino Club",address:"489 IL-48",city:"Taylorville",state:"IL",zip:"62568",url:"",location:{lat:39.5601053,lng:-89.2977649},description:"",photoURL:""},{name:"Oaken Barrel Brewing Company",address:"50 N Airport Pkwy",city:"Greenwood",state:"IN",zip:"46143",url:"",location:{lat:39.6156667,lng:-86.0906583},description:"",photoURL:""},{name:"Lee'z Place Bar & Grill",address:"120 W Main St",city:"Sheridan",state:"IL",zip:"60551",url:"",location:{lat:41.6306918,lng:-88.6536323},description:"",photoURL:""},{name:"Warsaw Brewery LLC",address:"100 N Main St",city:"Warsaw",state:"IL",zip:"62379",url:"",location:{lat:40.3661155,lng:-91.4303207},description:"",photoURL:""},{name:"POUR HOUSE BAR & GRILL",address:"101 E Main St",city:"Lowell",state:"IN",zip:"46356",url:"",location:{lat:41.1448683,lng:-87.2751526},description:"",photoURL:""},{name:"Spoonies Bar & Grill",address:"101 N Main St",city:"London Mills",state:"IL",zip:"61544",url:"",location:{lat:40.7125342,lng:-90.2665742},description:"",photoURL:""},{name:"Ashers Bar & Grill",address:"101 N Main St",city:"East Peoria",state:"IL",zip:"61611",url:"",location:{lat:40.5697057,lng:-89.6472241},description:"",photoURL:""},{name:"B&K Root Beer",address:"501 N Jefferson St",city:"Huntington",state:"IN",zip:"46750",url:"",location:{lat:40.8718,lng:-85.4848},description:"",photoURL:""},{name:"Chubby's Restaurant",address:"4470 E Parkway",city:"Gatlinburg",state:"TN",zip:"37738",url:"",location:{lat:35.8640001,lng:-83.5173536},description:"",photoURL:""},{name:"Hwy 441 Diner",address:"101 US-441",city:"Tavares",state:"FL",zip:"32778",url:"",location:{lat:28.8177313,lng:-81.7258853},description:"",photoURL:""},{name:"Spanky's Food & Spirits",address:"101 E Main St",city:"Mattoon",state:"IL",zip:"61938",url:"",location:{lat:39.4744133,lng:-88.3790938},description:"",photoURL:""},{name:"Woody's Diner",address:"101 N Main St",city:"Ada",state:"OH",zip:"45810",url:"",location:{lat:40.469305,lng:-83.864927},description:"",photoURL:""},{name:"The Pavillion",address:"101 N Main St",city:"Carrollton",state:"IL",zip:"62016",url:"",location:{lat:39.2969779,lng:-90.6085052},description:"",photoURL:""},{name:"Beamer's Drive In",address:"101 N Michigan St",city:"Plymouth",state:"IN",zip:"46563",url:"",location:{lat:41.2455957,lng:-86.2488534},description:"",photoURL:""},{name:"Bonge's Tavern",address:"9830 W 280 N",city:"Perkinsville",state:"IN",zip:"46011",url:"",location:{lat:40.1439002,lng:-85.8592702},description:"",photoURL:""},{name:"Millie's Chill & Grill",address:"101 N Main St",city:"Le Roy",state:"IL",zip:"61752",url:"",location:{lat:40.3468917,lng:-88.7631083},description:"",photoURL:""},{name:"Pub 15",address:"101 E Main St",city:"Bedford",state:"IN",zip:"47421",url:"",location:{lat:38.8623495,lng:-86.483406},description:"",photoURL:""},{name:"Ale Emporium",address:"8617 E 116th St",city:"Fishers",state:"IN",zip:"46038",url:"",location:{lat:39.6357849,lng:-86.0847304},description:"",photoURL:""},{name:"Vinny's Drive Bar",address:"5515 W 10th St",city:"Indianapolis",state:"IN",zip:"46224",url:"",location:{lat:39.7760762,lng:-86.2499069},description:"",photoURL:""},{name:"Edon Dairy Treat",address:"101 W Indiana St",city:"Edon",state:"OH",zip:"43518",url:"",location:{lat:41.5556052,lng:-84.769398},description:"",photoURL:""},{name:"The Warehouse",address:"101 N Main St",city:"Glasford",state:"IL",zip:"61533",url:"",location:{lat:40.692562,lng:-89.79551},description:"",photoURL:""},{name:"TS18",address:"101 N Main St",city:"Alexis",state:"IL",zip:"61412",url:"",location:{lat:40.9348577,lng:-90.9564871},description:"",photoURL:""},{name:"101 Beer Kitchen",address:"9708 District N Dr",city:"Fishers",state:"IN",zip:"46037",url:"",location:{lat:39.9630004,lng:-86.1272315},description:"",photoURL:""},{name:"Upland Carmel Tap House",address:"820 E 116th St",city:"Carmel",state:"IN",zip:"46032",url:"",location:{lat:39.956704,lng:-86.142971},description:"",photoURL:""},{name:"Charcoal House Tavern",address:"101 N Main St",city:"Jerseyville",state:"IL",zip:"62052",url:"",location:{lat:39.1159484,lng:-90.3378871},description:"",photoURL:""},{name:"Old Richmond Inn",address:"138 S 5th St",city:"Richmond",state:"IN",zip:"47374",url:"",location:{lat:39.8262198,lng:-84.8957573},description:"",photoURL:""},{name:"The End Zone Sports Bar & Grill",address:"2408 N 4th St",city:"Lafayette",state:"IN",zip:"47904",url:"",location:{lat:40.3676036,lng:-86.8675601},description:"",photoURL:""},{name:"Clinch River Brewing",address:"2045 Norris Fwy",city:"Norris",state:"TN",zip:"37828",url:"",location:{lat:36.2156441,lng:-84.0761352},description:"",photoURL:""},{name:"Kilroy's Bar & Grill",address:"201 S Meridian St",city:"Indianapolis",state:"IN",zip:"46225",url:"",location:{lat:39.7640751,lng:-86.1580203},description:"",photoURL:""},{name:"Cozy Corner Restaurant",address:"101 N Main St",city:"Farmer City",state:"IL",zip:"61842",url:"",location:{lat:41.1212478,lng:-88.8263441},description:"",photoURL:""},{name:"Pejza's Lydick Patio",address:"26444 US-20",city:"South Bend",state:"IN",zip:"46628",url:"",location:{lat:41.6936159,lng:-86.3791797},description:"",photoURL:""},{name:"Green Street Pub and Eatery",address:"911 N Green St",city:"Brownsburg",state:"IN",zip:"46112",url:"",location:{lat:39.8551354,lng:-86.3905701},description:"",photoURL:""},{name:"Coal Miner's Cafe",address:"101 N Main St",city:"Ladd",state:"IL",zip:"61329",url:"",location:{lat:41.2648639,lng:-89.2500956},description:"",photoURL:""},{name:"Taxman Fortville",address:"29 S Main St",city:"Fortville",state:"IN",zip:"46040",url:"",location:{lat:39.9335792,lng:-85.849132},description:"",photoURL:""},{name:"Ziggie's Pub and Eatery",address:"101 E Main St",city:"Columbus",state:"IN",zip:"47201",url:"",location:{lat:39.2294262,lng:-85.8989943},description:"",photoURL:""},{name:"Brickyard Bar & Grill",address:"101 N Main St",city:"Abingdon",state:"IL",zip:"61410",url:"",location:{lat:40.9474013,lng:-90.3101405},description:"",photoURL:""},{name:"The Breezeway Restaurant & Bar",address:"112 E 1st St",city:"Sanford",state:"FL",zip:"32771",url:"",location:{lat:28.8120179,lng:-81.2674339},description:"",photoURL:""},{name:"Midway Bar and Grill",address:"101 N Main St",city:"Morrisonville",state:"IL",zip:"62546",url:"",location:{lat:39.351435,lng:-89.5368671},description:"",photoURL:""},{name:"Grindstone Charley's",address:"101 N Main St",city:"Kokomo",state:"IN",zip:"46901",url:"",location:{lat:40.4413687,lng:-86.1264795},description:"",photoURL:""},{name:"rudy's restaurant",address:"101 N Main St",city:"Macomb",state:"IL",zip:"61455",url:"",location:{lat:40.2299838,lng:-90.9507491},description:"",photoURL:""},{name:"Amazing Joe's Grill",address:"909 N Wheeling Ave",city:"Muncie",state:"IN",zip:"47303",url:"",location:{lat:40.2014959,lng:-85.3928802},description:"",photoURL:""},{name:"Get It-N-Go",address:"101 N Main St",city:"Vincennes",state:"IN",zip:"47591",url:"",location:{lat:38.667684,lng:-87.5228811},description:"",photoURL:""},{name:"Route 66 Motorheads Bar and Grill",address:"600 Toronto Rd",city:"Springfield",state:"IL",zip:"62711",url:"",location:{lat:39.7129834,lng:-89.6474113},description:"",photoURL:""},{name:"C.R. Heroes",address:"10570 E 96th St",city:"Fishers",state:"IN",zip:"46037",url:"",location:{lat:39.9281489,lng:-85.9828434},description:"",photoURL:""},{name:"Plump's Last Shot",address:"6416 Cornell Ave",city:"Indianapolis",state:"IN",zip:"46220",url:"",location:{lat:39.8731604,lng:-86.1427212},description:"",photoURL:""},{name:"Sunoco Gas Station",address:"101 N Main St",city:"Crawfordsville",state:"IN",zip:"47933",url:"",location:{lat:40.0740639,lng:-86.9064353},description:"",photoURL:""},{name:"Hy-Vee Grocery Store",address:"1403 N Veterans Pkwy",city:"Bloomington",state:"IL",zip:"61704",url:"",location:{lat:40.4975074,lng:-88.9498779},description:"",photoURL:""},{name:"5th Ave. Grill and Bar",address:"7811 E 38th St",city:"Indianapolis",state:"IN",zip:"46226",url:"",location:{lat:39.7214534,lng:-86.0870901},description:"",photoURL:""},{name:"Fire & Ale",address:"2521 N Dirksen Pkwy",city:"Springfield",state:"IL",zip:"62702",url:"",location:{lat:39.8989313,lng:-89.602574},description:"",photoURL:""},{name:"Brickhouse Grill & Pub",address:"2 W Old State Capitol Plaza",city:"Springfield",state:"IL",zip:"62701",url:"",location:{lat:39.7704966,lng:-89.7134519},description:"",photoURL:""},{name:"Union Station Cafe",address:"101 N Main St",city:"Linton",state:"IN",zip:"47441",url:"",location:{lat:39.0688256,lng:-87.2598312},description:"",photoURL:""},{name:"Wolfies Grill - Noblesville",address:"137 W Jackson St",city:"Noblesville",state:"IN",zip:"46060",url:"",location:{lat:40.09337,lng:-86.033878},description:"",photoURL:""},{name:"Frost Bite",address:"5530 W 10th St",city:"Indianapolis",state:"IN",zip:"46224",url:"",location:{lat:39.761425,lng:-86.3992234},description:"",photoURL:""},{name:"Artists Colony Inn & Restaurant",address:"105 S Van Buren St",city:"Nashville",state:"IN",zip:"47448",url:"",location:{lat:39.2059036,lng:-86.2465464},description:"",photoURL:""},{name:"Erika's Place",address:"102 S Union St",city:"Westfield",state:"IN",zip:"46074",url:"",location:{lat:40.0468522,lng:-86.01525},description:"",photoURL:""},{name:"Burnt Bridge Tavern",address:"101 N Main St",city:"Conover",state:"WI",zip:"54519",url:"",location:{lat:46.0409008,lng:-89.3332199},description:"",photoURL:""},{name:"Brew Brothers",address:"101 N Main St",city:"Shelbyville",state:"IN",zip:"46176",url:"",location:{lat:39.5892831,lng:-85.8249454},description:"",photoURL:""},{name:"Schneider's Pub",address:"101 N Main St",city:"Indianapolis",state:"IN",zip:"46227",url:"",location:{lat:39.6507001,lng:-86.1570132},description:"",photoURL:""},{name:"Barn Bites Food Truck",address:"101 N Main St",city:"Columbia",state:"SC",zip:"29201",url:"",location:{lat:34.0188277,lng:-81.0416959},description:"",photoURL:""},{name:"The BillBoard Bistro",address:"101 N Main St",city:"Peoria",state:"IL",zip:"61602",url:"",location:{lat:40.6478199,lng:-89.6501383},description:"",photoURL:""},{name:"Star 34 Cafe",address:"101 N Main St",city:"Earlville",state:"IL",zip:"60518",url:"",location:{lat:41.6437872,lng:-88.626736},description:"",photoURL:""},{name:"Dutchman's Diner",address:"101 N Main St",city:"Odon",state:"IN",zip:"47562",url:"",location:{lat:38.785942,lng:-86.9973526},description:"",photoURL:""},{name:"Lilly's Super subs",address:"101 N Main St",city:"Leesburg",state:"FL",zip:"34748",url:"",location:{lat:28.8206323,lng:-81.7737903},description:"",photoURL:""},{name:"Rusty's Raw Bar & Grill - Estero",address:"20041 S Tamiami Trail",city:"Estero",state:"FL",zip:"33928",url:"",location:{lat:26.4482963,lng:-81.8163087},description:"",photoURL:""},{name:"Milkeyâ€™s Place",address:"101 N Main St",city:"Pittsfield",state:"IL",zip:"62363",url:"",location:{lat:39.6946024,lng:-91.0411068},description:"",photoURL:""},{name:"Tried & True Alehouse",address:"2800 S State Rd 135",city:"Greenwood",state:"IN",zip:"46143",url:"",location:{lat:39.5768141,lng:-86.16056},description:"",photoURL:""},{name:"Jonesy's Junction",address:"101 N Main St",city:"North Manchester",state:"IN",zip:"46962",url:"",location:{lat:41.0377576,lng:-86.0183211},description:"",photoURL:""},{name:"Golden Basket Breakfast Club",address:"101 N Main St",city:"Downers Grove",state:"IL",zip:"60515",url:"",location:{lat:41.7971662,lng:-87.9752232},description:"",photoURL:""},{name:"Blue's Cafe",address:"101 N Main St",city:"Watseka",state:"IL",zip:"60970",url:"",location:{lat:41.1184544,lng:-87.8814518},description:"",photoURL:""},{name:"Crossroads 46 Diner",address:"4600 W State Road 46",city:"Spencer",state:"IN",zip:"47460",url:"",location:{lat:39.2872021,lng:-86.7696225},description:"",photoURL:""},{name:"Restaurant Edelweiss",address:"611 Manatee Ave E",city:"Bradenton",state:"FL",zip:"34208",url:"",location:{lat:27.4955656,lng:-82.5570352},description:"",photoURL:""},{name:"Kirby Foods Deli Counter",address:"101 N Main St",city:"Washington",state:"IL",zip:"61571",url:"",location:{lat:40.7899109,lng:-89.3699824},description:"",photoURL:""},{name:"Black Dog Pub",address:"4910 N Clinton St",city:"Fort Wayne",state:"IN",zip:"46825",url:"",location:{lat:41.059358,lng:-85.221755},description:"",photoURL:""},{name:"Hall's Tavern at Coventry",address:"5745 Coventry Ln",city:"Fort Wayne",state:"IN",zip:"46804",url:"",location:{lat:41.0336769,lng:-85.256286},description:"",photoURL:""},{name:"Opie's Bar & Grill",address:"101 N Main St",city:"Galesburg",state:"IL",zip:"61401",url:"",location:{lat:40.9491977,lng:-90.3714336},description:"",photoURL:""},{name:"Seasons Gastropub",address:"101 N Main St",city:"Morton",state:"IL",zip:"61550",url:"",location:{lat:40.6100171,lng:-89.462774},description:"",photoURL:""},{name:"Missy's Corner Cafe",address:"101 N Main St",city:"Pekin",state:"IL",zip:"61554",url:"",location:{lat:40.5586245,lng:-89.6156359},description:"",photoURL:""},{name:"Sunshine CafÃ©",address:"101 N Main St",city:"Seymour",state:"IN",zip:"47274",url:"",location:{lat:38.958975,lng:-85.84018},description:"",photoURL:""},{name:"Aristocrat Pub & Oxford Room",address:"5212 N College Ave",city:"Indianapolis",state:"IN",zip:"46220",url:"",location:{lat:39.8472823,lng:-86.1460157},description:"",photoURL:""},{name:"Barbecue and Bourbon",address:"1414 N Main St",city:"Speedway",state:"IN",zip:"46224",url:"",location:{lat:39.7855103,lng:-86.2413919},description:"",photoURL:""},{name:"Charlie Parker's Diner",address:"700 W North St",city:"Springfield",state:"IL",zip:"62704",url:"",location:{lat:39.7660325,lng:-89.6635417},description:"",photoURL:""}];for(const t of e)await(0,Q.gS)((0,Q.rJ)(Y,"restaurants"),t);alert("Sample data seeded!")}const nl={name:"App",components:{Home:Se,Restaurants:Ft,BucketList:_o,UserSearch:na,Review:Da,Recommendations:ps,DatabaseStats:Es,MyReviews:hn,Leaderboard:Sn,Followers:po,Following:al},setup(){const e=(0,D.KR)(null),t=(0,D.KR)("home"),a=(0,D.KR)(null),s=(0,D.KR)(window.innerWidth<768),o=(0,n.EW)(()=>e.value&&"kennected.com@gmail.com"===e.value.email),l={home:"Home",restaurants:"Restaurants","bucket-list":"BucketList","user-search":"UserSearch",review:"Review","my-reviews":"MyReviews",recommendations:"Recommendations",leaderboard:"Leaderboard",cleanup:"Cleanup","database-stats":"DatabaseStats",followers:"Followers",following:"Following"},i=(0,n.EW)(()=>l[t.value]||"Home"),r=()=>{s.value=!s.value};window.addEventListener("resize",()=>{s.value=window.innerWidth<768}),(0,W.hg)(j,async t=>{if(e.value=t,t){const e=(0,Q.H9)(Y,"users",t.uid),a=await(0,Q.x7)(e);a.exists()||await(0,Q.BN)(e,{uid:t.uid,displayName:t.displayName,email:t.email,photoURL:t.photoURL,createdAt:new Date,reviewCount:0})}});const c=async()=>{try{await(0,W.df)(j,Z)}catch(e){alert("Login failed: "+e.message)}},d=async()=>{await(0,W.CI)(j)},u=()=>{t.value="home"},v=()=>{t.value="restaurants"},p=()=>{t.value="user-search"},g=()=>{t.value="review"},h=()=>{t.value="my-reviews"},m=()=>{t.value="recommendations"},w=()=>{t.value="leaderboard"},L=()=>{t.value="database-stats"},k=()=>{t.value="followers"},y=()=>{t.value="following"},R=()=>{t.value="bucket-list"},f=e=>{a.value=e,t.value="review"};return{user:e,loginWithGoogle:c,logout:d,seedSampleData:sl,currentPage:t,goToHome:u,goToRestaurants:v,goToUserSearch:p,goToReview:g,goToMyReviews:h,goToRecommendations:m,goToLeaderboard:w,goToDatabaseStats:L,goToFollowers:k,goToFollowing:y,goToBucketList:R,reviewAt:f,selectedRestaurantForReview:a,isSidebarCollapsed:s,toggleSidebar:r,isAdmin:o,currentComponent:i}}},ol=(0,Le.A)(nl,[["render",m]]),ll=ol;(0,s.Ef)(ll).mount("#app")}},t={};function a(s){var n=t[s];if(void 0!==n)return n.exports;var o=t[s]={exports:{}};return e[s](o,o.exports,a),o.exports}a.m=e,(()=>{var e=[];a.O=(t,s,n,o)=>{if(!s){var l=1/0;for(d=0;d<e.length;d++){for(var[s,n,o]=e[d],i=!0,r=0;r<s.length;r++)(!1&o||l>=o)&&Object.keys(a.O).every(e=>a.O[e](s[r]))?s.splice(r--,1):(i=!1,o<l&&(l=o));if(i){e.splice(d--,1);var c=n();void 0!==c&&(t=c)}}return t}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[s,n,o]}})(),(()=>{a.d=(e,t)=>{for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}})(),(()=>{a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})(),(()=>{var e={524:0};a.O.j=t=>0===e[t];var t=(t,s)=>{var n,o,[l,i,r]=s,c=0;if(l.some(t=>0!==e[t])){for(n in i)a.o(i,n)&&(a.m[n]=i[n]);if(r)var d=r(a)}for(t&&t(s);c<l.length;c++)o=l[c],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(d)},s=self["webpackChunkmy_vue_app"]=self["webpackChunkmy_vue_app"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})();var s=a.O(void 0,[504],()=>a(80));s=a.O(s)})();
//# sourceMappingURL=app.25842ada.js.map