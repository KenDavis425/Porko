(()=>{"use strict";var e={449:(e,t,a)=>{var s=a(751),r=a(641),i=a(33);const o={id:"app"},n={class:"sidebar"},l={class:"sidebar-top"},d={key:0,xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor"},c={key:1,src:"/logo.svg",class:"sidebar-toggle-logo",alt:"Expand menu"},u={key:0,class:"sidebar-header"},v=["src"],g={class:"sidebar-user"},p={class:"sidebar-user-name"},w={key:0,class:"sidebar-badges"},h={class:"sidebar-nav"},m={class:"sidebar-bottom"},k={class:"app-version"},b={class:"main-content"},y={key:0,class:"component-wrapper"},f={key:1,class:"component-wrapper empty-state"};function L(e,t,a,s,L,C){const R=(0,r.g2)("BadgeDisplay"),E=(0,r.g2)("ReviewDetailModal"),M=(0,r.g2)("Toast");return(0,r.uX)(),(0,r.CE)("div",o,[(0,r.Lk)("div",{class:(0,i.C4)(["main-layout",{"sidebar-collapsed":s.isSidebarCollapsed}])},[(0,r.Lk)("aside",n,[(0,r.Lk)("div",l,[(0,r.Lk)("button",{class:"sidebar-toggle",onClick:t[0]||(t[0]=(...e)=>s.toggleSidebar&&s.toggleSidebar(...e)),title:"Toggle Sidebar"},[s.isSidebarCollapsed?((0,r.uX)(),(0,r.CE)("img",c)):((0,r.uX)(),(0,r.CE)("svg",d,t[16]||(t[16]=[(0,r.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"},null,-1),(0,r.Lk)("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"},null,-1)])))]),t[27]||(t[27]=(0,r.Lk)("div",{class:"sidebar-branding"},[(0,r.Lk)("img",{src:"/logo.svg",alt:"PorkHub Logo",class:"sidebar-logo"}),(0,r.Lk)("h1",{class:"sidebar-title"},"PorkHub")],-1)),s.user?((0,r.uX)(),(0,r.CE)("div",u,[(0,r.Lk)("img",{src:s.user.photoURL||"https://cdn-icons-png.flaticon.com/512/149/149071.png",class:"sidebar-avatar",alt:"User Avatar",referrerpolicy:"no-referrer",onClick:t[1]||(t[1]=(...e)=>s.goToProfile&&s.goToProfile(...e)),style:{cursor:"pointer"},title:"View Your Profile"},null,8,v),(0,r.Lk)("div",g,[(0,r.Lk)("div",p,(0,i.v_)(s.user.displayName),1),s.userBadges&&s.userBadges.length>0?((0,r.uX)(),(0,r.CE)("div",w,[(0,r.bF)(R,{badges:s.userBadges,title:""},null,8,["badges"])])):(0,r.Q3)("",!0)])])):(0,r.Q3)("",!0),(0,r.Lk)("nav",h,[(0,r.Lk)("button",{class:(0,i.C4)(["sidebar-link",{active:"home"===s.currentPage}]),onClick:t[2]||(t[2]=(...e)=>s.goToHome&&s.goToHome(...e)),title:"Home"},t[17]||(t[17]=[(0,r.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor"},[(0,r.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,r.Lk)("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8h5z"})],-1),(0,r.Lk)("span",null,"Home",-1)]),2),(0,r.Lk)("button",{class:(0,i.C4)(["sidebar-link",{active:"leaderboard"===s.currentPage}]),onClick:t[3]||(t[3]=(...e)=>s.goToLeaderboard&&s.goToLeaderboard(...e)),title:"Leaderboard"},t[18]||(t[18]=[(0,r.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor"},[(0,r.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,r.Lk)("path",{d:"M16 11V3H8v6H2v12h20V11h-6zm-6-6h4v14h-4V5zm-6 6h4v8H4v-8zm16 8h-4v-8h4v8z"})],-1),(0,r.Lk)("span",null,"Leaderboard",-1)]),2),(0,r.Lk)("button",{class:(0,i.C4)(["sidebar-link",{active:"restaurants"===s.currentPage}]),onClick:t[4]||(t[4]=(...e)=>s.goToRestaurants&&s.goToRestaurants(...e)),title:"Restaurants"},t[19]||(t[19]=[(0,r.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor"},[(0,r.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,r.Lk)("path",{d:"M16 6v8h3v8h-3v-2h-2v2h-2v-2h-2v2H8v-2H6v2H3v-8h3V6c0-3.31 2.69-6 6-6s6 2.69 6 6zm-2 0c0-2.21-1.79-4-4-4s-4 1.79-4 4v8h8V6zm-5 3h2v2h-2z"})],-1),(0,r.Lk)("span",null,"Restaurants",-1)]),2),(0,r.Lk)("button",{class:(0,i.C4)(["sidebar-link",{active:"recommendations"===s.currentPage}]),onClick:t[5]||(t[5]=(...e)=>s.goToRecommendations&&s.goToRecommendations(...e)),title:"Recommendations"},t[20]||(t[20]=[(0,r.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor"},[(0,r.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,r.Lk)("path",{d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27z"})],-1),(0,r.Lk)("span",null,"Recommendations",-1)]),2),s.user?((0,r.uX)(),(0,r.CE)("button",{key:0,class:(0,i.C4)(["sidebar-link",{active:"review"===s.currentPage}]),onClick:t[6]||(t[6]=(...e)=>s.goToReview&&s.goToReview(...e)),title:"Write a Review"},t[21]||(t[21]=[(0,r.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor"},[(0,r.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,r.Lk)("path",{d:"M12 2C8.14 2 5 5.14 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.86-3.14-7-7-7zm-1.5 9h-2v-2h2v2zm5 0h-2v-2h2v2zm-2.5-4h-2V5h2v2z"})],-1),(0,r.Lk)("span",null,"Write a Review",-1)]),2)):(0,r.Q3)("",!0),s.user?((0,r.uX)(),(0,r.CE)("button",{key:1,class:(0,i.C4)(["sidebar-link",{active:"user-search"===s.currentPage}]),onClick:t[7]||(t[7]=(...e)=>s.goToUserSearch&&s.goToUserSearch(...e)),title:"Follow Users"},t[22]||(t[22]=[(0,r.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor"},[(0,r.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,r.Lk)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 5 1.41-1.41L15.5 14zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14zM12 10V7H8v3H5v2h3v3h2v-3h3v-2h-3z"})],-1),(0,r.Lk)("span",null,"Follow Users",-1)]),2)):(0,r.Q3)("",!0),s.user?((0,r.uX)(),(0,r.CE)("button",{key:2,class:(0,i.C4)(["sidebar-link",{active:"bucket-list"===s.currentPage}]),onClick:t[8]||(t[8]=(...e)=>s.goToBucketList&&s.goToBucketList(...e)),title:"My Bucket List"},t[23]||(t[23]=[(0,r.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor"},[(0,r.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,r.Lk)("path",{d:"M18 7h-2.06c-.33-3.2-2.46-5.8-5.94-5.8S4.39 3.8 4.06 7H2v12h16V7zM6.14 7c.2-1.92 1.6-3.48 3.86-3.8A4.002 4.002 0 0 1 14 7h-2.14c-.2-1.92-1.6-3.48-3.86-3.8zM16 17H4v-8h12v8z"})],-1),(0,r.Lk)("span",null,"My Bucket List",-1)]),2)):(0,r.Q3)("",!0),s.user?((0,r.uX)(),(0,r.CE)("button",{key:3,class:(0,i.C4)(["sidebar-link",{active:"my-reviews"===s.currentPage}]),onClick:t[9]||(t[9]=(...e)=>s.goToMyReviews&&s.goToMyReviews(...e)),title:"My Reviews"},t[24]||(t[24]=[(0,r.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor"},[(0,r.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,r.Lk)("path",{d:"M3 13h2v-2H3v2zm0 4h2v-2H3v2zm0-8h2V7H3v2zm4 4h14v-2H7v2zm0 4h14v-2H7v2zM7 7v2h14V7H7z"})],-1),(0,r.Lk)("span",null,"My Reviews",-1)]),2)):(0,r.Q3)("",!0),s.user?((0,r.uX)(),(0,r.CE)("button",{key:4,class:(0,i.C4)(["sidebar-link",{active:"followers"===s.currentPage}]),onClick:t[10]||(t[10]=(...e)=>s.goToFollowers&&s.goToFollowers(...e)),title:"My Followers"},t[25]||(t[25]=[(0,r.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor"},[(0,r.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,r.Lk)("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5s-3 1.34-3 3 1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"})],-1),(0,r.Lk)("span",null,"My Followers",-1)]),2)):(0,r.Q3)("",!0),s.user?((0,r.uX)(),(0,r.CE)("button",{key:5,class:(0,i.C4)(["sidebar-link",{active:"following"===s.currentPage}]),onClick:t[11]||(t[11]=(...e)=>s.goToFollowing&&s.goToFollowing(...e)),title:"Following"},t[26]||(t[26]=[(0,r.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor"},[(0,r.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,r.Lk)("circle",{cx:"6.18",cy:"17.82",r:"2.18"}),(0,r.Lk)("path",{d:"M4 4.44v2.83c3.9 0 7.07 3.17 7.07 7.07h2.83c0-5.47-4.43-9.9-9.9-9.9zM4 10.1v2.83c2.39 0 4.33 1.94 4.33 4.33h2.83c0-3.98-3.23-7.16-7.16-7.16z"})],-1),(0,r.Lk)("span",null,"Following",-1)]),2)):(0,r.Q3)("",!0)])]),(0,r.Lk)("div",m,[(0,r.Lk)("button",{class:(0,i.C4)(["sidebar-link",{active:"help"===s.currentPage}]),onClick:t[12]||(t[12]=(...e)=>s.goToHelp&&s.goToHelp(...e)),title:"Help & User Guide"},t[28]||(t[28]=[(0,r.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor"},[(0,r.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,r.Lk)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"})],-1),(0,r.Lk)("span",null,"Help",-1)]),2),s.isAdmin?((0,r.uX)(),(0,r.CE)("button",{key:0,class:(0,i.C4)(["sidebar-link",{active:"database-stats"===s.currentPage}]),onClick:t[13]||(t[13]=(...e)=>s.goToDatabaseStats&&s.goToDatabaseStats(...e)),title:"Database Stats"},t[29]||(t[29]=[(0,r.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor"},[(0,r.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,r.Lk)("path",{d:"M5 9.2h3V19H5zM10.6 5h2.8v14h-2.8zm5.6 8H19v6h-2.8z"})],-1),(0,r.Lk)("span",null,"Database Stats",-1)]),2)):(0,r.Q3)("",!0),s.user?((0,r.uX)(),(0,r.CE)("button",{key:1,class:"sidebar-link",onClick:t[14]||(t[14]=(...e)=>s.logout&&s.logout(...e)),title:"Logout"},t[30]||(t[30]=[(0,r.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor"},[(0,r.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,r.Lk)("path",{d:"M17 7l-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5-5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"})],-1),(0,r.Lk)("span",null,"Logout",-1)]))):((0,r.uX)(),(0,r.CE)("button",{key:2,class:"login-btn-sidebar",onClick:t[15]||(t[15]=(...e)=>s.loginWithGoogle&&s.loginWithGoogle(...e)),title:"Login with Google"},t[31]||(t[31]=[(0,r.Fv)('<span>Login with</span><svg viewBox="0 0 48 48" width="22px" height="22px"><path fill="#EA4335" d="M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.85-6.85C35.9 2.38 30.47 0 24 0 14.62 0 6.51 5.38 2.56 13.22l7.98 6.19C12.43 13.72 17.74 9.5 24 9.5z"></path><path fill="#4285F4" d="M46.98 24.55c0-1.57-.15-3.09-.38-4.55H24v9.02h12.94c-.58 2.96-2.26 5.48-4.78 7.18l7.73 6c4.51-4.18 7.09-10.36 7.09-17.65z"></path><path fill="#FBBC05" d="M10.53 28.59c-.48-1.45-.76-2.99-.76-4.59s.27-3.14.76-4.59l-7.98-6.19C.92 16.46 0 20.12 0 24c0 3.88.92 7.54 2.56 10.78l7.97-6.19z"></path><path fill="#34A853" d="M24 48c6.48 0 11.93-2.13 15.89-5.81l-7.73-6c-2.15 1.45-4.92 2.3-8.16 2.3-6.26 0-11.57-4.22-13.47-9.91l-7.98 6.19C6.51 42.62 14.62 48 24 48z"></path><path fill="none" d="M0 0h48v48H0z"></path></svg>',2)]))),(0,r.Lk)("div",k,"v"+(0,i.v_)(s.appVersion),1)])]),(0,r.Lk)("main",b,[s.sharedReviewId?((0,r.uX)(),(0,r.CE)("div",f)):((0,r.uX)(),(0,r.CE)("div",y,[((0,r.uX)(),(0,r.Wv)(r.PR,{include:"Home"},[((0,r.uX)(),(0,r.Wv)((0,r.$y)(s.currentComponent),{user:s.user,onReviewed:s.goToHome,onCheckInAt:s.reviewAt,onReviewAt:s.reviewAt,onGoToReview:s.goToReview,"selected-restaurant-id":s.selectedRestaurantForReview},null,40,["user","onReviewed","onCheckInAt","onReviewAt","onGoToReview","selected-restaurant-id"]))],1024))]))]),s.sharedReviewId?((0,r.uX)(),(0,r.Wv)(E,{key:0,"review-id":s.sharedReviewId,user:s.user,onClose:s.closeReviewModal},null,8,["review-id","user","onClose"])):(0,r.Q3)("",!0),(0,r.bF)(M)],2)])}const C={class:"home-page"},R={key:0,class:"location-prompt-banner"},E={key:1,class:"location-prompt-banner warning"},M={key:2,class:"sort-toggle"},I={class:"feed"},x={key:0,class:"loading-indicator"},S={key:1},A={key:0,class:"no-posts-message"},X={key:0},_={key:1},F={class:"post-header"},P=["src"],U={class:"post-info"},z={class:"user-line"},V={class:"user-name"},T={key:0,class:"medal"},K={class:"post-date"},H={class:"post-content"},N={class:"post-title-line"},B={class:"restaurant-title-group"},Q={class:"restaurant-name"},G=["onClick","title"],D={key:0,class:"distance"},J={key:0,class:"restaurant-location"},q={class:"review-body"},W={key:0,class:"review-text"},$=["src"],O={key:2,class:"tags-container"},j={class:"post-actions"},Y=["onClick","disabled","aria-label","aria-pressed"],Z=["onClick"],ee={ref:"loadMoreTrigger"},te={key:1,class:"loading-indicator"},ae={key:3,class:"gamification-features"},se={class:"features-container"},re={class:"feature-column"},ie={class:"feature-column"},oe={class:"feature-column"};function ne(e,t,a,s,o,n){const l=(0,r.g2)("StarRating"),d=(0,r.g2)("Comments"),c=(0,r.g2)("TrendingRestaurants"),u=(0,r.g2)("ActivityFeed"),v=(0,r.g2)("FollowRecommendations");return(0,r.uX)(),(0,r.CE)("div",C,["prompt"===s.locationPermission?((0,r.uX)(),(0,r.CE)("div",R,[t[3]||(t[3]=(0,r.Lk)("div",{class:"banner-content"},[(0,r.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor"},[(0,r.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,r.Lk)("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.86-3.14-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"})]),(0,r.Lk)("p",null,"Share your location to see posts and restaurants near you!")],-1)),(0,r.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>s.requestLocationAccess&&s.requestLocationAccess(...e)),class:"btn-primary"},"Share Location")])):(0,r.Q3)("",!0),"denied"===s.locationPermission?((0,r.uX)(),(0,r.CE)("div",E,t[4]||(t[4]=[(0,r.Lk)("div",{class:"banner-content"},[(0,r.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor"},[(0,r.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,r.Lk)("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"})]),(0,r.Lk)("p",null,"Location access is denied. To see local content, please enable location services for this site in your browser settings.")],-1)]))):(0,r.Q3)("",!0),s.userLocation?((0,r.uX)(),(0,r.CE)("div",M,[(0,r.Lk)("button",{onClick:t[1]||(t[1]=e=>s.setSortOrder("time")),class:(0,i.C4)({active:"time"===s.sortOrder})},"Most Recent",2),(0,r.Lk)("button",{onClick:t[2]||(t[2]=e=>s.setSortOrder("distance")),class:(0,i.C4)({active:"distance"===s.sortOrder})},"Nearby",2)])):(0,r.Q3)("",!0),(0,r.Lk)("div",I,[s.loading?((0,r.uX)(),(0,r.CE)("div",x,"Loading feed...")):((0,r.uX)(),(0,r.CE)("div",S,[0===s.posts.length?((0,r.uX)(),(0,r.CE)("div",A,[a.user?((0,r.uX)(),(0,r.CE)("div",X,t[5]||(t[5]=[(0,r.Lk)("h3",null,"Your Feed is Empty",-1),(0,r.Lk)("p",null,"Follow some users to see their reviews here, or check out the Restaurants page to find new places.",-1)]))):((0,r.uX)(),(0,r.CE)("div",_,t[6]||(t[6]=[(0,r.Lk)("h3",null,"Welcome to PorkHub!",-1),(0,r.Lk)("p",null,"There are no reviews to show right now. Check out the Restaurants page to discover new places!",-1)])))])):(0,r.Q3)("",!0),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(s.posts,e=>((0,r.uX)(),(0,r.CE)("div",{key:e.id,class:"post-card"},[(0,r.Lk)("div",F,[(0,r.Lk)("img",{src:e.userPhoto||"https://cdn-icons-png.flaticon.com/512/149/149071.png",alt:"User",class:"user-avatar",referrerpolicy:"no-referrer"},null,8,P),(0,r.Lk)("div",U,[(0,r.Lk)("div",z,[(0,r.Lk)("span",V,(0,i.v_)(e.userName),1),e.medal?((0,r.uX)(),(0,r.CE)("span",T,(0,i.v_)(e.medal),1)):(0,r.Q3)("",!0)]),(0,r.Lk)("span",K,(0,i.v_)(e.createdAt.toDate().toLocaleString()),1)])]),(0,r.Lk)("div",H,[(0,r.Lk)("div",N,[(0,r.Lk)("div",B,[(0,r.Lk)("h2",Q,(0,i.v_)(e.restaurantName),1),a.user?((0,r.uX)(),(0,r.CE)("button",{key:0,onClick:t=>s.toggleBucketList(e),class:(0,i.C4)(["action-btn bucket-list-btn",{"in-bucket-list":s.isInBucketList(e.restaurantId)}]),title:s.isInBucketList(e.restaurantId)?"In Bucket List":"Add to Bucket List"},t[7]||(t[7]=[(0,r.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20px",viewBox:"0 0 24 24",width:"20px",fill:"currentColor"},[(0,r.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,r.Lk)("path",{d:"M18 7h-2.06c-.33-3.2-2.46-5.8-5.94-5.8S4.39 3.8 4.06 7H2v12h16V7zM6.14 7c.2-1.92 1.6-3.48 3.86-3.8A4.002 4.002 0 0 1 14 7h-2.14c-.2-1.92-1.6-3.48-3.86-3.8zM16 17H4v-8h12v8z"})],-1)]),10,G)):(0,r.Q3)("",!0)]),null!==e.distance?((0,r.uX)(),(0,r.CE)("div",D,(0,i.v_)(e.distance.toFixed(1))+" miles away ",1)):(0,r.Q3)("",!0)]),e.restaurantCity||e.restaurantState?((0,r.uX)(),(0,r.CE)("div",J,[(0,r.eW)((0,i.v_)(e.restaurantCity),1),e.restaurantCity&&e.restaurantState?((0,r.uX)(),(0,r.CE)(r.FK,{key:0},[(0,r.eW)(", ")],64)):(0,r.Q3)("",!0),(0,r.eW)((0,i.v_)(e.restaurantState),1)])):(0,r.Q3)("",!0),(0,r.Lk)("div",q,[(0,r.bF)(l,{rating:e.rating},null,8,["rating"]),e.text?((0,r.uX)(),(0,r.CE)("p",W,'"'+(0,i.v_)(e.text)+'"',1)):(0,r.Q3)("",!0),e.photoURL?((0,r.uX)(),(0,r.CE)("img",{key:1,src:e.photoURL,alt:"Review photo",class:"review-photo",loading:"lazy"},null,8,$)):(0,r.Q3)("",!0),e.tags&&e.tags.length>0?((0,r.uX)(),(0,r.CE)("div",O,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e.tags,e=>((0,r.uX)(),(0,r.CE)("span",{key:e,class:"tag"},(0,i.v_)(e),1))),128))])):(0,r.Q3)("",!0)]),(0,r.Lk)("div",j,[(0,r.Lk)("button",{onClick:t=>s.toggleLike(e.id),class:(0,i.C4)(["like-btn",{liked:e.isLiked}]),disabled:!a.user,"aria-label":e.isLiked?"Unlike this review":"Like this review","aria-pressed":e.isLiked},[t[8]||(t[8]=(0,r.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20px",viewBox:"0 0 24 24",width:"20px",fill:"currentColor"},[(0,r.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,r.Lk)("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})],-1)),(0,r.Lk)("span",null,(0,i.v_)(e.likeCount||0),1)],10,Y),(0,r.Lk)("button",{onClick:t=>s.shareReview(e.id),class:"share-btn",title:"Share this review","aria-label":"Share this review"},t[9]||(t[9]=[(0,r.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20px",viewBox:"0 0 24 24",width:"20px",fill:"currentColor"},[(0,r.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,r.Lk)("path",{d:"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z"})],-1),(0,r.Lk)("span",null,"Share",-1)]),8,Z)]),(0,r.bF)(d,{"post-id":e.id,user:a.user,"post-type":"reviews","post-author-id":e.userId},null,8,["post-id","user","post-author-id"])])]))),128)),(0,r.Lk)("div",ee,null,512),s.loadingMore?((0,r.uX)(),(0,r.CE)("div",te,"Loading more...")):(0,r.Q3)("",!0)]))]),a.user?((0,r.uX)(),(0,r.CE)("div",ae,[(0,r.Lk)("div",se,[(0,r.Lk)("div",re,[(0,r.bF)(c,{onRestaurantSelected:s.handleRestaurantSelected},null,8,["onRestaurantSelected"])]),(0,r.Lk)("div",ie,[(0,r.bF)(u,{user:a.user,following:s.userFollowing,onRestaurantSelected:s.handleRestaurantSelected},null,8,["user","following","onRestaurantSelected"])]),(0,r.Lk)("div",oe,[(0,r.bF)(v,{user:a.user,following:s.userFollowing,onFollowUser:s.handleFollowUser},null,8,["user","following","onFollowUser"])])])])):(0,r.Q3)("",!0)])}var le=a(953),de=a(223),ce=a(962),ue=a(185),ve=a(993);const ge={apiKey:"AIzaSyDxzi70xuS1KxemDBF1logZ6zyHxINFfp4",authDomain:"porko-c0f87.firebaseapp.com",projectId:"porko-c0f87",storageBucket:"porko-c0f87.firebasestorage.app",messagingSenderId:"1050714930836",appId:"1:1050714930836:web:5b4c9bdf93e95748a23e81",measurementId:"G-3LCKP815FM"},pe=(0,de.Wp)(ge),we=(0,ce.xI)(pe),he=new ce.HF,me=(0,ue.aU)(pe),ke=(0,ve.c7)(pe),be={class:"comments-section"},ye={class:"comment-list"},fe=["src","alt"],Le={class:"comment-content"},Ce={class:"comment-header"},Re={class:"comment-user-name"},Ee={class:"comment-date"},Me={key:0},Ie={class:"comment-text"},xe={class:"comment-actions"},Se=["onClick"],Ae=["onClick"],Xe={key:1,class:"edit-comment"},_e={class:"edit-actions"},Fe={key:0,class:"add-comment"},Pe=["disabled"],Ue={key:1,class:"add-comment-login-prompt"};function ze(e,t,a,o,n,l){return(0,r.uX)(),(0,r.CE)("div",be,[(0,r.Lk)("div",ye,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(o.comments,e=>((0,r.uX)(),(0,r.CE)("div",{key:e.id,class:"comment"},[(0,r.Lk)("img",{src:e.userPhoto||"https://cdn-icons-png.flaticon.com/512/149/149071.png",alt:e.userName,class:"comment-user-photo",referrerpolicy:"no-referrer"},null,8,fe),(0,r.Lk)("div",Le,[(0,r.Lk)("div",Ce,[(0,r.Lk)("span",Re,(0,i.v_)(e.userName),1),(0,r.Lk)("span",Ee,(0,i.v_)(o.formatDate(e.createdAt)),1)]),o.editingCommentId!==e.id?((0,r.uX)(),(0,r.CE)("div",Me,[(0,r.Lk)("p",Ie,(0,i.v_)(e.text),1),(0,r.Lk)("div",xe,[o.canEdit(e)?((0,r.uX)(),(0,r.CE)("button",{key:0,onClick:t=>o.startEditing(e),class:"action-btn"},"Edit",8,Se)):(0,r.Q3)("",!0),o.canDelete(e)?((0,r.uX)(),(0,r.CE)("button",{key:1,onClick:t=>o.deleteComment(e.id),class:"action-btn delete"},"Delete",8,Ae)):(0,r.Q3)("",!0)])])):((0,r.uX)(),(0,r.CE)("div",Xe,[(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>o.editingText=e),onKeyup:t[1]||(t[1]=(0,s.jR)((...e)=>o.saveEdit&&o.saveEdit(...e),["enter"])),class:"edit-input"},null,544),[[s.Jo,o.editingText]]),(0,r.Lk)("div",_e,[(0,r.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>o.saveEdit&&o.saveEdit(...e)),class:"btn-primary"},"Save"),(0,r.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>o.cancelEdit&&o.cancelEdit(...e)),class:"btn-secondary"},"Cancel")])]))])]))),128))]),a.user?((0,r.uX)(),(0,r.CE)("div",Fe,[(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>o.newComment=e),placeholder:"Add a comment...",onKeyup:t[5]||(t[5]=(0,s.jR)((...e)=>o.addComment&&o.addComment(...e),["enter"]))},null,544),[[s.Jo,o.newComment]]),(0,r.Lk)("button",{onClick:t[6]||(t[6]=(...e)=>o.addComment&&o.addComment(...e)),disabled:!o.newComment.trim()},"Post",8,Pe)])):((0,r.uX)(),(0,r.CE)("div",Ue,t[7]||(t[7]=[(0,r.Lk)("p",null,"Please log in to comment.",-1)])))])}const Ve=[];let Te=0;const Ke=(e,t="info",a=3e3)=>{const s=Te++,r={id:s,message:e,type:t,duration:a};return Ve.forEach(e=>e(r)),s},He=e=>(Ve.push(e),()=>{const t=Ve.indexOf(e);t>-1&&Ve.splice(t,1)}),Ne={name:"Comments",props:{postId:{type:String,required:!0},postType:{type:String,required:!0},postAuthorId:{type:String,required:!0},user:{type:Object,default:null}},setup(e){const t=(0,le.KR)([]),a=(0,le.KR)(""),s=(0,le.KR)(null),i=(0,le.KR)("");let o=()=>{};(0,r.sV)(()=>{const a=(0,ue.H9)(me,e.postType,e.postId),s=(0,ue.rJ)(a,"comments"),r=(0,ue.P)(s,(0,ue.My)("createdAt","asc"));o=(0,ue.aQ)(r,async e=>{const a=e.docs.map(e=>({id:e.id,...e.data()})),s=[...new Set(a.map(e=>e.userId))];if(s.length>0){const e=new Map;for(let t=0;t<s.length;t+=30){const a=s.slice(t,t+30),r=(0,ue.P)((0,ue.rJ)(me,"users"),(0,ue._M)((0,ue.Fs)(),"in",a)),i=await(0,ue.GG)(r);i.forEach(t=>e.set(t.id,t.data()))}t.value=a.map(t=>{const a=e.get(t.userId);return{...t,userName:a?.displayName||t.userName||"Unknown User",userPhoto:a?.photoURL||t.userPhoto||null}})}else t.value=[]})}),(0,r.hi)(()=>{o()});const n=async()=>{if(""===a.value.trim())return;const t=e.user;if(!t)return;const s=(0,ue.O5)(),r=(0,ue.H9)(me,e.postType,e.postId),i=(0,ue.rJ)(r,"comments"),o=(0,ue.H9)(me,"reviews",e.postId);await Promise.all([(0,ue.gS)(i,{userId:t.uid,text:a.value,createdAt:s}),(0,ue.mZ)(o,{lastActivityAt:s})]),a.value=""},l=t=>{const a=e.user;return a&&a.uid===t.userId},d=t=>{const a=e.user;return a&&(a.uid===t.userId||a.uid===e.postAuthorId)},c=e=>{s.value=e.id,i.value=e.text},u=()=>{s.value=null,i.value=""},v=async()=>{if(""===i.value.trim()||!s.value)return;const t=(0,ue.H9)(me,e.postType,e.postId),a=(0,ue.rJ)(t,"comments"),r=(0,ue.H9)(a,s.value),o=(0,ue.H9)(me,"reviews",e.postId);await Promise.all([(0,ue.mZ)(r,{text:i.value}),(0,ue.mZ)(o,{lastActivityAt:(0,ue.O5)()})]),u()},g=async t=>{if(confirm("Are you sure you want to delete this comment?"))try{const a=(0,ue.H9)(me,e.postType,e.postId),s=(0,ue.rJ)(a,"comments"),r=(0,ue.H9)(s,t),i=(0,ue.H9)(me,"reviews",e.postId);await Promise.all([(0,ue.kd)(r),(0,ue.mZ)(i,{lastActivityAt:(0,ue.O5)()})]),Ke("Comment deleted successfully","success")}catch(a){console.error("Error deleting comment:",a),Ke("Failed to delete comment. Please try again.","error")}},p=e=>e&&e.toDate?e.toDate().toLocaleString():"";return{comments:t,newComment:a,addComment:n,canEdit:l,canDelete:d,startEditing:c,cancelEdit:u,saveEdit:v,deleteComment:g,editingCommentId:s,editingText:i,formatDate:p}}};var Be=a(262);const Qe=(0,Be.A)(Ne,[["render",ze],["__scopeId","data-v-ba2e816a"]]),Ge=Qe,De=["onClick","onMouseover"],Je={height:"16px",width:"16px",viewBox:"0 0 24 24",fill:"currentColor"},qe=["d"];function We(e,t,a,s,o,n){return(0,r.uX)(),(0,r.CE)("div",{class:(0,i.C4)(["star-rating",{"is-editable":a.editable}])},[((0,r.uX)(),(0,r.CE)(r.FK,null,(0,r.pI)(5,e=>(0,r.Lk)("span",{key:e,onClick:t=>s.setRating(e),onMouseover:t=>s.handleMouseover(e),onMouseleave:t[0]||(t[0]=(...e)=>s.handleMouseleave&&s.handleMouseleave(...e)),class:"star"},[((0,r.uX)(),(0,r.CE)("svg",Je,[t[1]||(t[1]=(0,r.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"},null,-1)),(0,r.Lk)("path",{d:s.getStarPath(e)},null,8,qe)]))],40,De)),64))],2)}const $e={name:"StarRating",props:{rating:{type:Number,required:!0,default:0},editable:{type:Boolean,default:!1}},emits:["update:rating"],setup(e,{emit:t}){const a=(0,le.KR)(0),s="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27z",r="M22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27V6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L18.18 21l-1.64-7.03L22 9.24zM12 15.4z",i="M22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.64-7.03L22 9.24zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z",o=t=>{const o=a.value||e.rating;return o>=t?s:!a.value&&e.rating>=t-.5?r:i},n=a=>{e.editable&&t("update:rating",a)},l=t=>{e.editable&&(a.value=t)},d=()=>{e.editable&&(a.value=0)};return{getStarPath:o,setRating:n,handleMouseover:l,handleMouseleave:d}}},Oe=(0,Be.A)($e,[["render",We],["__scopeId","data-v-32f96f7e"]]),je=Oe,Ye={class:"activity-feed"},Ze={key:0,class:"loading-indicator"},et={key:1,class:"empty-state"},tt={key:2,class:"activities-list"},at={class:"activity-header"},st=["src"],rt={class:"activity-info"},it={class:"activity-action"},ot={class:"user-name"},nt={key:0,class:"badge-indicator"},lt={key:1},dt={class:"activity-time"},ct={key:0,class:"badges-earned"},ut={class:"earned-badges"},vt=["title"],gt={key:1,class:"activity-content"},pt={class:"restaurant-info"},wt={class:"restaurant-name"},ht={class:"review-details"},mt={class:"rating"},kt={class:"rating-value"},bt={key:0,class:"review-title"},yt=["onClick"];function ft(e,t,a,s,o,n){return(0,r.uX)(),(0,r.CE)("div",Ye,[t[2]||(t[2]=(0,r.Lk)("h2",null,"Activity Feed",-1)),t[3]||(t[3]=(0,r.Lk)("p",{class:"feed-description"},"See what your followers are up to",-1)),s.loading?((0,r.uX)(),(0,r.CE)("div",Ze,"Loading activity...")):0===s.activities.length?((0,r.uX)(),(0,r.CE)("div",et,t[0]||(t[0]=[(0,r.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"48px",viewBox:"0 0 24 24",width:"48px",fill:"var(--primary-color)",opacity:"0.3"},[(0,r.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,r.Lk)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm3.5-9c.83 0 1.5-.67 1.5-1.5S16.33 8 15.5 8 14 8.67 14 9.5s.67 1.5 1.5 1.5zm-7 0c.83 0 1.5-.67 1.5-1.5S9.33 8 8.5 8 7 8.67 7 9.5 7.67 11 8.5 11zm3.5 6.5c2.33 0 4.31-1.46 5.11-3.5H6.89c.8 2.04 2.78 3.5 5.11 3.5z"})],-1),(0,r.Lk)("h3",null,"No Activity Yet",-1),(0,r.Lk)("p",null,"Follow some users to see their recent reviews here!",-1)]))):((0,r.uX)(),(0,r.CE)("div",tt,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(s.activities,e=>((0,r.uX)(),(0,r.CE)("div",{key:e.id,class:"activity-item"},[(0,r.Lk)("div",at,[(0,r.Lk)("img",{src:e.userPhoto||"https://cdn-icons-png.flaticon.com/512/149/149071.png",alt:"User",class:"activity-avatar",referrerpolicy:"no-referrer"},null,8,st),(0,r.Lk)("div",rt,[(0,r.Lk)("div",it,[(0,r.Lk)("span",ot,(0,i.v_)(e.userName),1),e.badgesEarned&&e.badgesEarned.length>0?((0,r.uX)(),(0,r.CE)("span",nt," ðŸŽ‰ earned badges! ")):((0,r.uX)(),(0,r.CE)("span",lt,"reviewed"))]),(0,r.Lk)("span",dt,(0,i.v_)(s.formatTime(e.timestamp)),1)])]),e.badgesEarned&&e.badgesEarned.length>0?((0,r.uX)(),(0,r.CE)("div",ct,[t[1]||(t[1]=(0,r.Lk)("div",{class:"earned-title"},"New Achievements!",-1)),(0,r.Lk)("div",ut,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e.badgesEarned,e=>((0,r.uX)(),(0,r.CE)("span",{key:e,class:"earned-badge",title:s.getBadgeName(e)},(0,i.v_)(s.getBadgeEmoji(e)),9,vt))),128))])])):(0,r.Q3)("",!0),e.reviewRestaurant?((0,r.uX)(),(0,r.CE)("div",gt,[(0,r.Lk)("div",pt,[(0,r.Lk)("h4",wt,(0,i.v_)(e.reviewRestaurant),1),(0,r.Lk)("div",ht,[(0,r.Lk)("div",mt,[((0,r.uX)(),(0,r.CE)(r.FK,null,(0,r.pI)(5,t=>(0,r.Lk)("span",{key:t,class:(0,i.C4)(["star",{filled:t<=e.rating}])},"â˜…",2)),64)),(0,r.Lk)("span",kt,(0,i.v_)(e.rating)+"/5",1)]),e.reviewTitle?((0,r.uX)(),(0,r.CE)("div",bt,'"'+(0,i.v_)(e.reviewTitle)+'"',1)):(0,r.Q3)("",!0)])]),(0,r.Lk)("button",{onClick:t=>s.viewRestaurant(e.restaurantId),class:"btn-view",title:"View restaurant"}," View Restaurant ",8,yt)])):(0,r.Q3)("",!0)]))),128))]))])}const Lt={REVIEWER_10:{id:"reviewer-10",name:"10 Reviews",description:"Written 10 reviews",emoji:"ðŸ“",requirement:e=>e.reviewCount>=10,category:"milestone"},REVIEWER_25:{id:"reviewer-25",name:"25 Reviews",description:"Written 25 reviews",emoji:"ðŸ’«",requirement:e=>e.reviewCount>=25,category:"milestone"},REVIEWER_50:{id:"reviewer-50",name:"50 Reviews",description:"Written 50 reviews",emoji:"âœ¨",requirement:e=>e.reviewCount>=50,category:"milestone"},REVIEWER_100:{id:"reviewer-100",name:"100 Reviews",description:"Written 100 reviews",emoji:"ðŸ‘‘",requirement:e=>e.reviewCount>=100,category:"milestone"},PHOTO_MASTER:{id:"photo-master",name:"Photo Master",description:"Written 10+ reviews with photos",emoji:"ðŸ“¸",requirement:e=>e.photoReviewCount>=10,category:"engagement"},ALL_50_STATES:{id:"all-50-states",name:"All 50 States",description:"Reviewed restaurants in all 50 US states",emoji:"ðŸ—ºï¸",requirement:e=>e.statesVisited&&50===e.statesVisited.size,category:"geographic"},ILLINOIS_MASTER:{id:"illinois-master",name:"Illinois Master",description:"Written 10+ reviews in Illinois",emoji:"ðŸ›ï¸",requirement:e=>(e.reviewsByState?.["IL"]||0)>=10,category:"regional"},MIDWEST_EXPLORER:{id:"midwest-explorer",name:"Midwest Explorer",description:"Reviewed in 5+ Midwest states",emoji:"ðŸ§­",requirement:e=>{const t=["IL","IN","IA","KS","MI","MN","MO","NE","ND","OH","SD","WI"],a=t.filter(t=>(e.reviewsByState?.[t]||0)>0);return a.length>=5},category:"regional"},FIRST_TO_REVIEW:{id:"first-to-review",name:"First to Review",description:"Be the first to review a restaurant",emoji:"ðŸš€",requirement:e=>(e.firstReviews||0)>0,category:"discovery"}};function Ct(e){const t=[];return Object.values(Lt).forEach(a=>{a.requirement(e)&&t.push(a.id)}),t}function Rt(e){return Object.values(Lt).find(t=>t.id===e)||null}function Et(e,t=[],a=[]){const s={reviewCount:e.reviewCount||0,photoReviewCount:0,statesVisited:new Set,reviewsByState:{},firstReviews:0};if(t&&t.length>0&&t.forEach(e=>{if(e.photoURL&&s.photoReviewCount++,e.restaurantState){const t=e.restaurantState.toUpperCase();s.statesVisited.add(t),s.reviewsByState[t]=(s.reviewsByState[t]||0)+1}}),a&&a.length>0){const r={};a.forEach(e=>{const t=e.restaurantId;r[t]||(r[t]=[]),r[t].push(e)}),t.forEach(t=>{const a=t.restaurantId,i=r[a]||[],o=i.sort((e,t)=>{const a=e.createdAt?.toMillis?.()||new Date(e.createdAt).getTime()||0,s=t.createdAt?.toMillis?.()||new Date(t.createdAt).getTime()||0;return a-s});o.length>0&&o[0].userId===e.uid&&s.firstReviews++})}return s}const Mt={name:"ActivityFeed",props:{user:{type:Object,required:!0},following:{type:Array,default:()=>[]}},emits:["restaurant-selected"],setup(e,{emit:t}){const a=(0,le.KR)([]),s=(0,le.KR)(!0),i=async()=>{s.value=!0;try{if(!e.user||!e.following||0===e.following.length)return a.value=[],void(s.value=!1);const t=(0,ue.P)((0,ue.rJ)(me,"reviews"),(0,ue._M)("userId","in",e.following),(0,ue.My)("createdAt","desc"),(0,ue.AB)(50)),r=await(0,ue.GG)(t),i=(new Map,await(0,ue.GG)((0,ue.P)((0,ue.rJ)(me,"users"),(0,ue._M)("uid","in",e.following)))),o=new Map;i.docs.forEach(e=>{o.set(e.id,e.data())});const n=new Set;r.docs.forEach(e=>{const t=e.data();t.restaurantId&&n.add(t.restaurantId)});const l=new Map;if(n.size>0){const e=await(0,ue.GG)((0,ue.P)((0,ue.rJ)(me,"restaurants"),(0,ue._M)("__name__","in",Array.from(n))));e.docs.forEach(e=>{l.set(e.id,e.data())})}const d=[];r.docs.forEach(e=>{const t=e.data(),a=o.get(t.userId),s=l.get(t.restaurantId);a&&s&&d.push({id:e.id,userId:t.userId,userName:a.displayName||"Unknown User",userPhoto:a.photoURL,timestamp:t.createdAt,reviewRestaurant:s.name,restaurantId:t.restaurantId,rating:t.rating,reviewTitle:t.title,badgesEarned:[]})}),a.value=d.slice(0,15)}catch(t){console.error("Error loading activity feed:",t),a.value=[]}finally{s.value=!1}},o=e=>{if(!e)return"";const t=e.toDate?e.toDate():new Date(e),a=new Date,s=a-t,r=Math.floor(s/6e4),i=Math.floor(s/36e5),o=Math.floor(s/864e5);return r<1?"just now":r<60?`${r}m ago`:i<24?`${i}h ago`:o<7?`${o}d ago`:t.toLocaleDateString()},n=e=>{const t=Rt(e);return t?t.name:"Achievement"},l=e=>{const t=Rt(e);return t?t.emoji:"ðŸ†"},d=e=>{t("restaurant-selected",e)};return(0,r.sV)(()=>{i()}),{activities:a,loading:s,formatTime:o,getBadgeName:n,getBadgeEmoji:l,viewRestaurant:d}}},It=(0,Be.A)(Mt,[["render",ft],["__scopeId","data-v-6a3d5ec8"]]),xt=It,St={class:"trending-section"},At={class:"trend-tabs"},Xt={key:0,class:"loading-indicator"},_t={key:1,class:"empty-state"},Ft={key:2,class:"trending-list"},Pt={class:"ranking"},Ut={class:"rank-number"},zt={key:0,class:"rank-badge"},Vt={key:1,class:"rank-badge"},Tt={key:2,class:"rank-badge"},Kt={class:"restaurant-info"},Ht={class:"restaurant-name"},Nt={class:"restaurant-meta"},Bt={class:"location"},Qt={class:"stat-badge"},Gt={key:0,class:"stat-value"},Dt={key:1,class:"stat-value"},Jt={class:"trend-indicator"},qt={key:0,class:"indicator-text"},Wt={key:1,class:"indicator-text"},$t=["onClick"];function Ot(e,t,a,s,o,n){return(0,r.uX)(),(0,r.CE)("div",St,[t[3]||(t[3]=(0,r.Lk)("h2",null,"Trending This Week",-1)),(0,r.Lk)("div",At,[(0,r.Lk)("button",{onClick:t[0]||(t[0]=e=>s.trendType="most-reviewed"),class:(0,i.C4)([{active:"most-reviewed"===s.trendType},"trend-tab"])}," ðŸ”¥ Most Reviewed ",2),(0,r.Lk)("button",{onClick:t[1]||(t[1]=e=>s.trendType="highest-rated"),class:(0,i.C4)([{active:"highest-rated"===s.trendType},"trend-tab"])}," â­ Highest Rated ",2)]),s.loading?((0,r.uX)(),(0,r.CE)("div",Xt,"Loading trending...")):0===s.trendingList.length?((0,r.uX)(),(0,r.CE)("div",_t,t[2]||(t[2]=[(0,r.Lk)("p",null,"No data available yet",-1)]))):((0,r.uX)(),(0,r.CE)("div",Ft,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(s.trendingList,(e,t)=>((0,r.uX)(),(0,r.CE)("div",{key:e.id,class:"trending-item"},[(0,r.Lk)("div",Pt,[(0,r.Lk)("span",Ut,"#"+(0,i.v_)(t+1),1),0===t?((0,r.uX)(),(0,r.CE)("span",zt,"ðŸ¥‡")):1===t?((0,r.uX)(),(0,r.CE)("span",Vt,"ðŸ¥ˆ")):2===t?((0,r.uX)(),(0,r.CE)("span",Tt,"ðŸ¥‰")):(0,r.Q3)("",!0)]),(0,r.Lk)("div",Kt,[(0,r.Lk)("h4",Ht,(0,i.v_)(e.name),1),(0,r.Lk)("div",Nt,[(0,r.Lk)("span",Bt,[(0,r.eW)((0,i.v_)(e.city),1),e.city&&e.state?((0,r.uX)(),(0,r.CE)(r.FK,{key:0},[(0,r.eW)(", ")],64)):(0,r.Q3)("",!0),(0,r.eW)((0,i.v_)(e.state),1)]),(0,r.Lk)("span",Qt,["most-reviewed"===s.trendType?((0,r.uX)(),(0,r.CE)("span",Gt,(0,i.v_)(e.weekReviews)+" reviews",1)):((0,r.uX)(),(0,r.CE)("span",Dt,(0,i.v_)(e.averageRating.toFixed(1))+" â­",1))])]),(0,r.Lk)("div",Jt,["most-reviewed"===s.trendType?((0,r.uX)(),(0,r.CE)("span",qt," ðŸ“ˆ "+(0,i.v_)(e.weekReviews)+" new reviews this week ",1)):((0,r.uX)(),(0,r.CE)("span",Wt," Based on "+(0,i.v_)(e.ratingCount)+" reviews ",1))])]),(0,r.Lk)("button",{onClick:t=>s.viewRestaurant(e.id),class:"btn-view",title:"View restaurant"}," View ",8,$t)]))),128))]))])}const jt={name:"TrendingRestaurants",emits:["restaurant-selected"],setup(e,{emit:t}){const a=(0,le.KR)("most-reviewed"),s=(0,le.KR)([]),i=(0,le.KR)(!0),o=async()=>{i.value=!0;try{const e=await(0,ue.GG)((0,ue.rJ)(me,"restaurants")),t=[],a=new Date;a.setDate(a.getDate()-7);const r=await(0,ue.GG)((0,ue.rJ)(me,"reviews")),i=new Map;r.docs.forEach(e=>{const t=e.data(),s=t.restaurantId,r=t.createdAt?.toDate?t.createdAt.toDate():new Date(t.createdAt);i.has(s)||i.set(s,{totalReviews:0,weekReviews:0,ratings:[],ratingCount:0});const o=i.get(s);o.totalReviews++,o.ratings.push(t.rating),o.ratingCount++,r>a&&o.weekReviews++}),e.docs.forEach(e=>{const a=e.data(),s=i.get(e.id)||{totalReviews:0,weekReviews:0,ratings:[],ratingCount:0},r=s.ratings.length>0?s.ratings.reduce((e,t)=>e+t,0)/s.ratings.length:0;t.push({id:e.id,name:a.name,city:a.city,state:a.state,weekReviews:s.weekReviews,totalReviews:s.totalReviews,averageRating:r,ratingCount:s.ratingCount})}),s.value=t}catch(e){console.error("Error loading trending restaurants:",e),s.value=[]}finally{i.value=!1}},n=(0,r.EW)(()=>"most-reviewed"===a.value?s.value.filter(e=>e.weekReviews>0).sort((e,t)=>t.weekReviews-e.weekReviews).slice(0,10):s.value.filter(e=>e.ratingCount>=3).sort((e,t)=>t.averageRating-e.averageRating).slice(0,10)),l=e=>{t("restaurant-selected",e)};return(0,r.sV)(()=>{o()}),{trendType:a,trendingList:n,loading:i,viewRestaurant:l}}},Yt=(0,Be.A)(jt,[["render",Ot],["__scopeId","data-v-518e26e8"]]),Zt=Yt,ea={class:"recommendations-section"},ta={key:0,class:"loading-indicator"},aa={key:1,class:"empty-state"},sa={key:2,class:"recommendations-grid"},ra=["src"],ia={class:"user-name"},oa={class:"user-stats"},na={class:"stat"},la={class:"stat-value"},da={class:"stat"},ca={class:"stat-value"},ua={key:0,class:"user-badges"},va=["title"],ga={key:0,class:"badge-more"},pa={key:1,class:"reason"},wa={class:"reason-text"},ha=["onClick","disabled"];function ma(e,t,a,s,o,n){return(0,r.uX)(),(0,r.CE)("div",ea,[t[4]||(t[4]=(0,r.Lk)("h2",null,"Suggested Users to Follow",-1)),t[5]||(t[5]=(0,r.Lk)("p",{class:"description"},"Users similar to reviewers you already follow",-1)),s.loading?((0,r.uX)(),(0,r.CE)("div",ta,"Loading recommendations...")):0===s.recommendedUsers.length?((0,r.uX)(),(0,r.CE)("div",aa,t[0]||(t[0]=[(0,r.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"48px",viewBox:"0 0 24 24",width:"48px",fill:"var(--primary-color)",opacity:"0.3"},[(0,r.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,r.Lk)("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"})],-1),(0,r.Lk)("h3",null,"No Recommendations Yet",-1),(0,r.Lk)("p",null,"Follow more users to get better recommendations!",-1)]))):((0,r.uX)(),(0,r.CE)("div",sa,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(s.recommendedUsers,e=>((0,r.uX)(),(0,r.CE)("div",{key:e.uid,class:"user-card"},[(0,r.Lk)("img",{src:e.photoURL||"https://cdn-icons-png.flaticon.com/512/149/149071.png",alt:"User",class:"user-photo",referrerpolicy:"no-referrer"},null,8,ra),(0,r.Lk)("h4",ia,(0,i.v_)(e.displayName),1),(0,r.Lk)("div",oa,[(0,r.Lk)("div",na,[t[1]||(t[1]=(0,r.Lk)("span",{class:"stat-label"},"Reviews",-1)),(0,r.Lk)("span",la,(0,i.v_)(e.reviewCount||0),1)]),(0,r.Lk)("div",da,[t[2]||(t[2]=(0,r.Lk)("span",{class:"stat-label"},"Followers",-1)),(0,r.Lk)("span",ca,(0,i.v_)(e.followerCount||0),1)])]),e.badges&&e.badges.length>0?((0,r.uX)(),(0,r.CE)("div",ua,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e.badges.slice(0,3),e=>((0,r.uX)(),(0,r.CE)("span",{key:e,class:"badge-icon",title:s.getBadgeName(e)},(0,i.v_)(s.getBadgeEmoji(e)),9,va))),128)),e.badges.length>3?((0,r.uX)(),(0,r.CE)("span",ga,"+"+(0,i.v_)(e.badges.length-3),1)):(0,r.Q3)("",!0)])):(0,r.Q3)("",!0),e.reason?((0,r.uX)(),(0,r.CE)("div",pa,[t[3]||(t[3]=(0,r.Lk)("span",{class:"reason-label"},"Why we recommend this:",-1)),(0,r.Lk)("span",wa,(0,i.v_)(e.reason),1)])):(0,r.Q3)("",!0),(0,r.Lk)("button",{onClick:t=>s.followUser(e.uid),disabled:s.isFollowing(e.uid),class:"btn-follow"},(0,i.v_)(s.isFollowing(e.uid)?"Following":"Follow"),9,ha)]))),128))]))])}const ka={name:"FollowRecommendations",props:{user:{type:Object,required:!0},following:{type:Array,default:()=>[]}},emits:["follow-user"],setup(e,{emit:t}){const a=(0,le.KR)([]),s=(0,le.KR)(!0),i=(0,le.KR)(new Set(e.following||[])),o=async()=>{s.value=!0;try{if(!e.user||!e.following||0===e.following.length)return a.value=[],void(s.value=!1);const t=await(0,ue.GG)((0,ue.P)((0,ue.rJ)(me,"follows"),(0,ue._M)("followerId","in",e.following))),r=new Set,i=new Map;if(t.docs.forEach(t=>{const a=t.data(),s=a.followingId;s===e.user.uid||e.following.includes(s)||(r.add(s),i.set(s,(i.get(s)||0)+1))}),0===r.size)return a.value=[],void(s.value=!1);const o=Array.from(r).slice(0,12),l=await(0,ue.GG)((0,ue.P)((0,ue.rJ)(me,"users"),(0,ue._M)("uid","in",o))),d=[];l.docs.forEach(e=>{const t=e.data(),a=i.get(e.id)||0;d.push({uid:e.id,displayName:t.displayName,photoURL:t.photoURL,reviewCount:t.reviewCount||0,followerCount:t.followerCount||0,badges:t.earnedBadges||[],mutualFollowCount:a,reason:n(t,a)})}),d.sort((e,t)=>t.mutualFollowCount!==e.mutualFollowCount?t.mutualFollowCount-e.mutualFollowCount:t.reviewCount-e.reviewCount),a.value=d}catch(t){console.error("Error loading recommendations:",t),a.value=[]}finally{s.value=!1}},n=(e,t)=>t>=3?`Followed by ${t} reviewers you know`:e.reviewCount>=25?"Prolific reviewer with quality content":e.badges&&e.badges.length>0?"Earned multiple achievements":"Similar taste in restaurants",l=e=>i.value.has(e),d=async a=>{try{const s=(0,ue.H9)((0,ue.rJ)(me,"follows"),`${e.user.uid}_${a}`);l(a)?(await(0,ue.kd)(s),i.value.delete(a)):(await(0,ue.BN)(s,{followerId:e.user.uid,followingId:a,createdAt:new Date}),i.value.add(a)),t("follow-user",{userId:a,isFollowing:!l(a)})}catch(s){console.error("Error following user:",s)}},c=e=>{const t=Rt(e);return t?t.name:"Achievement"},u=e=>{const t=Rt(e);return t?t.emoji:"ðŸ†"};return(0,r.sV)(()=>{o()}),{recommendedUsers:a,loading:s,isFollowing:l,followUser:d,getBadgeName:c,getBadgeEmoji:u}}},ba=(0,Be.A)(ka,[["render",ma],["__scopeId","data-v-6e74fdb3"]]),ya=ba;function fa(e,t,a,s){if(null===e||null===t||null===a||null===s)return null;if(e===a&&t===s)return 0;const r=3959,i=(a-e)*Math.PI/180,o=(s-t)*Math.PI/180,n=Math.sin(i/2)*Math.sin(i/2)+Math.cos(e*Math.PI/180)*Math.cos(a*Math.PI/180)*Math.sin(o/2)*Math.sin(o/2),l=2*Math.atan2(Math.sqrt(n),Math.sqrt(1-n));return r*l}const La={name:"Home",components:{StarRating:je,Comments:Ge,ActivityFeed:xt,TrendingRestaurants:Zt,FollowRecommendations:ya},props:{user:{type:Object,default:null}},setup(e){const t=(0,le.KR)([]),a=(0,le.KR)(!0),s=(0,le.KR)(null),i=(0,le.KR)(""),o=(0,le.KR)(null),n=(0,le.KR)(!1),l=new Map,d=(0,le.KR)([]),c=10;let u=null;const v=[],g=(0,le.KR)(new Set),p=(0,le.KR)(new Map),w=(0,le.KR)(new Map),h=(0,le.KR)("time"),m=(0,le.KR)([]);let k=!1;const b=()=>{l.forEach(e=>{const t=p.value.get(e.userId);e.medal=E(t)});const e=Array.from(l.values()).sort((e,t)=>{if("distance"===h.value&&s.value){const a=e.distance??1/0,s=t.distance??1/0;if(a!==s)return a-s;const r=e.lastActivityAt||e.createdAt,i=t.lastActivityAt||t.createdAt;return i.seconds-r.seconds}const a=e.lastActivityAt||e.createdAt,r=t.lastActivityAt||t.createdAt;return r.seconds-a.seconds});d.value=e,t.value=d.value.slice(0,t.value.length||c)};(0,r.hi)(()=>{v.forEach(e=>e()),u&&u.disconnect()}),(0,r.sV)(()=>{u=new IntersectionObserver(e=>{e[0].isIntersecting&&f()}),C(),F()}),(0,r.wB)(s,e=>{e&&l.size>0&&(l.forEach(t=>{const a=w.value.get(t.restaurantId);t.distance=a?.location?fa(e.lat,e.lng,a.location.lat,a.location.lng):null}),b())}),(0,r.wB)(()=>e.user,(e,t)=>{e?.uid===t?.uid||k||y()}),(0,r.wB)(o,(e,t)=>{t&&u.unobserve(t),e&&u.observe(e)});const y=async()=>{if(!k){k=!0,a.value=!0;try{v.forEach(e=>{try{e()}catch(t){console.warn("Error unsubscribing listener:",t)}}),v.length=0,l.clear(),await new Promise(e=>setTimeout(e,100));const t=e.user;if(t){const e=(0,ue.P)((0,ue.rJ)(me,"bucketListItems"),(0,ue._M)("userId","==",t.uid)),a=(0,ue.aQ)(e,e=>{const t=new Set;e.forEach(e=>t.add(e.data().restaurantId)),g.value=t},e=>{console.error("Error in bucket list listener:",e)});v.push(a)}else g.value.clear();const r=t?(0,ue.GG)((0,ue.P)((0,ue.rJ)(me,"follows"),(0,ue._M)("followerId","==",t.uid))):Promise.resolve({docs:[]}),[i,o,n,d]=await Promise.all([r,(0,ue.GG)((0,ue.rJ)(me,"restaurants")),(0,ue.GG)((0,ue.rJ)(me,"users")),(0,ue.GG)((0,ue.P)((0,ue.rJ)(me,"users"),(0,ue.My)("reviewCount","desc"),(0,ue.AB)(30)))]),c=d.docs.map(e=>({id:e.id,...e.data()})).filter(e=>{const t=Number(e.reviewCount)||0;return t>0}).sort((e,t)=>{const a=Number(e.reviewCount)||0,s=Number(t.reviewCount)||0;return s-a}).slice(0,10),u=new Map;c.forEach((e,t)=>{u.set(e.id,t)}),p.value=u,w.value.clear(),o.forEach(e=>{w.value.set(e.id,e.data())});const h=new Map;n.forEach(e=>{h.set(e.id,e.data())});const m=(0,ue.P)((0,ue.rJ)(me,"users"),(0,ue.My)("reviewCount","desc"),(0,ue.AB)(30)),k=(0,ue.aQ)(m,e=>{const t=e.docs.map(e=>({id:e.id,...e.data()})).filter(e=>{const t=Number(e.reviewCount)||0;return t>0}).sort((e,t)=>{const a=Number(e.reviewCount)||0,s=Number(t.reviewCount)||0;return s-a}).slice(0,10),a=new Map;t.forEach((e,t)=>{a.set(e.id,t)}),p.value=a,b()},e=>{console.error("Error in leaderboard listener:",e)});v.push(k);const y=e=>{e.docChanges().forEach(e=>{if("removed"===e.type)l.delete(e.doc.id);else{const t=e.doc.data(),a=w.value.get(t.restaurantId),r=h.get(t.userId),i=p.value.get(t.userId),o={...t,id:e.doc.id,restaurantName:a?.name||"Unknown Restaurant",restaurantCity:a?.city,restaurantState:a?.state,location:a?.location||null,distance:s.value&&a?.location?fa(s.value.lat,s.value.lng,a.location.lat,a.location.lng):null,userName:r?.displayName||"Unknown User",userPhoto:r?.photoURL||null,medal:E(i),likeCount:0,isLiked:!1};l.set(o.id,o),x(o.id)}}),b(),a.value=!1};if(t){const e=i.docs.map(e=>e.data().followingId);if(e.includes(t.uid)||e.push(t.uid),e.length>0)for(let t=0;t<e.length;t+=30){const a=e.slice(t,t+30),s=(0,ue.P)((0,ue.rJ)(me,"reviews"),(0,ue._M)("userId","in",a),(0,ue.My)("lastActivityAt","desc")),r=(0,ue.aQ)(s,y,e=>console.error("Feed error (followed):",e));v.push(r)}if(s.value){const e=[];if(o.forEach(t=>{const a=t.data();if(a.location){const r=fa(s.value.lat,s.value.lng,a.location.lat,a.location.lng);null!==r&&r<=100&&e.push(t.id)}}),e.length>0)for(let t=0;t<e.length;t+=30){const a=e.slice(t,t+30),s=(0,ue.P)((0,ue.rJ)(me,"reviews"),(0,ue._M)("restaurantId","in",a),(0,ue.My)("lastActivityAt","desc")),r=(0,ue.aQ)(s,y,e=>console.error("Feed error (nearby):",e));v.push(r)}}}else{const e=(0,ue.P)((0,ue.rJ)(me,"reviews"),(0,ue.My)("lastActivityAt","desc"),(0,ue.AB)(50)),t=(0,ue.aQ)(e,y,e=>console.error("Feed error (recent for guests):",e));v.push(t)}0===v.length&&(a.value=!1)}catch(t){console.error("Error setting up feed listeners:",t),a.value=!1,v.forEach(e=>{try{e()}catch(t){}}),v.length=0}finally{k=!1}}},f=()=>{n.value||t.value.length>=d.value.length||(n.value=!0,setTimeout(()=>{const e=t.value.length,a=d.value.slice(e,e+c);t.value.push(...a),n.value=!1},300))},L=()=>{navigator.geolocation.getCurrentPosition(e=>{i.value="granted",s.value={lat:e.coords.latitude,lng:e.coords.longitude}},()=>{i.value="denied"},{timeout:1e4})},C=async()=>{if(navigator.permissions)try{const e=await navigator.permissions.query({name:"geolocation"});i.value=e.state,e.onchange=()=>{i.value=e.state,"granted"===e.state&&L()},"granted"===e.state&&L()}catch(e){console.error("Error checking location permission:",e),L()}finally{y()}else L()},R=e=>{h.value!==e&&(h.value=e,b())},E=e=>"number"!==typeof e?null:0===e?"ðŸ¥‡":1===e?"ðŸ¥ˆ":2===e?"ðŸ¥‰":e>=3&&e<10?"ðŸ…":null,M=e=>g.value.has(e),I=async t=>{const a=e.user;if(a)if(M(t.restaurantId)){const e=(0,ue.P)((0,ue.rJ)(me,"bucketListItems"),(0,ue._M)("userId","==",a.uid),(0,ue._M)("restaurantId","==",t.restaurantId)),s=await(0,ue.GG)(e);s.forEach(e=>(0,ue.kd)(e.ref))}else await(0,ue.gS)((0,ue.rJ)(me,"bucketListItems"),{userId:a.uid,restaurantId:t.restaurantId,createdAt:(0,ue.O5)()})},x=t=>{const a=e.user,s=(0,ue.H9)(me,"reviews",t),r=(0,ue.rJ)(s,"likes"),i=(0,ue.P)(r),o=(0,ue.aQ)(i,e=>{const s=l.get(t);s&&(s.likeCount=e.size,s.isLiked=!!a&&e.docs.some(e=>e.data().userId===a.uid),l.set(t,s),b())},e=>{console.error("Error fetching likes:",e)});v.push(o)},S=async t=>{const a=e.user;if(!a)return;const s=(0,ue.H9)(me,"reviews",t),r=(0,ue.rJ)(s,"likes"),i=(0,ue.P)(r,(0,ue._M)("userId","==",a.uid)),o=await(0,ue.GG)(i);o.empty?await(0,ue.gS)(r,{userId:a.uid,createdAt:(0,ue.O5)()}):await(0,ue.kd)(o.docs[0].ref)},A=async e=>{const t=window.location.origin,a=`${t}/review/${e}`;if(navigator.share)try{return void await navigator.share({title:"Check out this review on PorkHub",text:"Check out this review on PorkHub",url:a})}catch(s){"AbortError"!==s.name&&console.error("Error sharing:",s)}try{await navigator.clipboard.writeText(a),Ke("Link copied to clipboard!","success")}catch(s){console.error("Failed to copy link:",s);const e=prompt("Copy this link:",a);e&&Ke("Link copied!","success")}},X=e=>{console.log("Selected restaurant:",e)},_=({userId:e,isFollowing:t})=>{if(t)m.value.includes(e)||m.value.push(e);else{const t=m.value.indexOf(e);t>-1&&m.value.splice(t,1)}},F=async()=>{if(e.user)try{const t=await(0,ue.GG)((0,ue.P)((0,ue.rJ)(me,"follows"),(0,ue._M)("followerId","==",e.user.uid)));m.value=t.docs.map(e=>e.data().followingId)}catch(t){console.error("Error loading following list:",t)}};return{posts:t,loading:a,locationPermission:i,requestLocationAccess:L,loadMoreTrigger:o,loadingMore:n,isInBucketList:M,toggleBucketList:I,userLocation:s,sortOrder:h,setSortOrder:R,toggleLike:S,shareReview:A,userFollowing:m,handleRestaurantSelected:X,handleFollowUser:_,loadUserFollowing:F}}},Ca=(0,Be.A)(La,[["render",ne],["__scopeId","data-v-159b487c"]]),Ra=Ca,Ea={class:"restaurants-page"},Ma={class:"search-box"},Ia={key:3,class:"add-restaurant-container"},xa={class:"form-group"},Sa={class:"form-group"},Aa={class:"form-group-row"},Xa={class:"form-group"},_a={class:"form-group"},Fa=["value"],Pa={class:"form-group"},Ua={class:"form-group"},za={key:0,class:"error-message"},Va=["disabled"],Ta={key:4,class:"loading-indicator"},Ka={key:5,class:"restaurant-list-container"},Ha={key:0,class:"restaurant-list"},Na={class:"restaurant-details"},Ba={class:"restaurant-name"},Qa={class:"restaurant-meta"},Ga=["title"],Da={class:"rating-text"},Ja={class:"rating-count"},qa={key:1,class:"distance"},Wa={class:"restaurant-address"},$a={class:"restaurant-actions"},Oa=["onClick","title"],ja=["onClick"],Ya=["onClick"],Za=["href"],es=["href"],ts=["href"],as=["onClick"],ss={key:1,class:"no-restaurants-message"};function rs(e,t,a,o,n,l){const d=(0,r.g2)("EditRestaurantModal"),c=(0,r.g2)("AddReviewModal"),u=(0,r.g2)("RestaurantReviewsModal"),v=(0,r.g2)("StarRating");return(0,r.uX)(),(0,r.CE)("div",Ea,[o.isEditModalVisible?((0,r.uX)(),(0,r.Wv)(d,{key:0,restaurant:o.restaurantToEdit,onClose:o.closeEditModal,onSave:o.saveRestaurantChanges},null,8,["restaurant","onClose","onSave"])):(0,r.Q3)("",!0),o.isAddReviewModalVisible?((0,r.uX)(),(0,r.Wv)(c,{key:1,"restaurant-id":o.restaurantIdForNewReview,user:o.user,onClose:o.closeAddReviewModal,onReviewAdded:o.handleReviewAdded},null,8,["restaurant-id","user","onClose","onReviewAdded"])):(0,r.Q3)("",!0),o.isReviewsModalVisible?((0,r.uX)(),(0,r.Wv)(u,{key:2,restaurant:o.restaurantForReviews,user:o.user,onClose:o.closeReviewsModal,onReviewsUpdated:o.handleReviewOrUpdate},null,8,["restaurant","user","onClose","onReviewsUpdated"])):(0,r.Q3)("",!0),(0,r.Lk)("div",Ma,[(0,r.bo)((0,r.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>o.searchQuery=e),placeholder:"Search by name, address, city, state, or zip...",class:"search-input","aria-label":"Search restaurants"},null,512),[[s.Jo,o.searchQuery]])]),o.user?((0,r.uX)(),(0,r.CE)("div",Ia,[(0,r.Lk)("button",{onClick:t[1]||(t[1]=e=>o.showAddForm=!o.showAddForm),class:"btn-toggle-add"},(0,i.v_)(o.showAddForm?"Cancel":"Add New Restaurant"),1),o.showAddForm?((0,r.uX)(),(0,r.CE)("form",{key:0,onSubmit:t[8]||(t[8]=(0,s.D$)((...e)=>o.addNewRestaurant&&o.addNewRestaurant(...e),["prevent"])),class:"add-restaurant-form"},[t[16]||(t[16]=(0,r.Lk)("h3",null,"Add a New Restaurant",-1)),(0,r.Lk)("div",xa,[t[9]||(t[9]=(0,r.Lk)("label",{for:"new-name"},"Name",-1)),(0,r.bo)((0,r.Lk)("input",{id:"new-name",type:"text","onUpdate:modelValue":t[2]||(t[2]=e=>o.newRestaurant.name=e),required:""},null,512),[[s.Jo,o.newRestaurant.name]])]),(0,r.Lk)("div",Sa,[t[10]||(t[10]=(0,r.Lk)("label",{for:"new-address"},"Address",-1)),(0,r.bo)((0,r.Lk)("input",{id:"new-address",type:"text","onUpdate:modelValue":t[3]||(t[3]=e=>o.newRestaurant.address=e),required:""},null,512),[[s.Jo,o.newRestaurant.address]])]),(0,r.Lk)("div",Aa,[(0,r.Lk)("div",Xa,[t[11]||(t[11]=(0,r.Lk)("label",{for:"new-city"},"City",-1)),(0,r.bo)((0,r.Lk)("input",{id:"new-city",type:"text","onUpdate:modelValue":t[4]||(t[4]=e=>o.newRestaurant.city=e)},null,512),[[s.Jo,o.newRestaurant.city]])]),(0,r.Lk)("div",_a,[t[13]||(t[13]=(0,r.Lk)("label",{for:"new-state"},"State",-1)),(0,r.bo)((0,r.Lk)("select",{id:"new-state","onUpdate:modelValue":t[5]||(t[5]=e=>o.newRestaurant.state=e)},[t[12]||(t[12]=(0,r.Lk)("option",{value:""},"-- Select a State --",-1)),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(o.usStates,e=>((0,r.uX)(),(0,r.CE)("option",{key:e,value:e},(0,i.v_)(e),9,Fa))),128))],512),[[s.u1,o.newRestaurant.state]])]),(0,r.Lk)("div",Pa,[t[14]||(t[14]=(0,r.Lk)("label",{for:"new-zip"},"Zip",-1)),(0,r.bo)((0,r.Lk)("input",{id:"new-zip",type:"text","onUpdate:modelValue":t[6]||(t[6]=e=>o.newRestaurant.zip=e)},null,512),[[s.Jo,o.newRestaurant.zip]])])]),(0,r.Lk)("div",Ua,[t[15]||(t[15]=(0,r.Lk)("label",{for:"new-url"},"Website URL",-1)),(0,r.bo)((0,r.Lk)("input",{id:"new-url",type:"url","onUpdate:modelValue":t[7]||(t[7]=e=>o.newRestaurant.url=e),placeholder:"https://example.com"},null,512),[[s.Jo,o.newRestaurant.url]])]),o.addError?((0,r.uX)(),(0,r.CE)("p",za,(0,i.v_)(o.addError),1)):(0,r.Q3)("",!0),(0,r.Lk)("button",{type:"submit",disabled:o.isSaving,class:"btn-save"},(0,i.v_)(o.isSaving?"Saving...":"Save Restaurant"),9,Va)],32)):(0,r.Q3)("",!0)])):(0,r.Q3)("",!0),o.loading?((0,r.uX)(),(0,r.CE)("div",Ta,"Loading restaurants...")):((0,r.uX)(),(0,r.CE)("div",Ka,[o.filteredRestaurants.length>0?((0,r.uX)(),(0,r.CE)("ul",Ha,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(o.filteredRestaurants,e=>((0,r.uX)(),(0,r.CE)("li",{key:e.id,class:"restaurant-item"},[(0,r.Lk)("div",Na,[(0,r.Lk)("span",Ba,(0,i.v_)(e.name),1),(0,r.Lk)("div",Qa,[e.averageRating>0?((0,r.uX)(),(0,r.CE)("div",{key:0,class:"rating",title:`${e.averageRating.toFixed(2)} average rating`},[(0,r.bF)(v,{rating:e.averageRating},null,8,["rating"]),(0,r.Lk)("span",Da,(0,i.v_)(e.averageRating.toFixed(1)),1),(0,r.Lk)("span",Ja,"("+(0,i.v_)(e.ratingCount)+")",1)],8,Ga)):(0,r.Q3)("",!0),null!==e.distance?((0,r.uX)(),(0,r.CE)("span",qa,(0,i.v_)(e.distance.toFixed(1))+" miles away ",1)):(0,r.Q3)("",!0)]),(0,r.Lk)("span",Wa,[(0,r.eW)((0,i.v_)(e.address),1),e.city?((0,r.uX)(),(0,r.CE)(r.FK,{key:0},[(0,r.eW)(", "+(0,i.v_)(e.city),1)],64)):(0,r.Q3)("",!0),e.state?((0,r.uX)(),(0,r.CE)(r.FK,{key:1},[(0,r.eW)(", "+(0,i.v_)(e.state),1)],64)):(0,r.Q3)("",!0),e.zip?((0,r.uX)(),(0,r.CE)(r.FK,{key:2},[(0,r.eW)((0,i.v_)(e.zip),1)],64)):(0,r.Q3)("",!0)])]),(0,r.Lk)("div",$a,[o.user?((0,r.uX)(),(0,r.CE)("button",{key:0,onClick:t=>o.toggleBucketList(e),class:(0,i.C4)(["action-btn",{"in-bucket-list":o.isInBucketList(e.id)}]),title:o.isInBucketList(e.id)?"Remove from Bucket List":"Add to Bucket List"},t[17]||(t[17]=[(0,r.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor"},[(0,r.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,r.Lk)("path",{d:"M18 7h-2.06c-.33-3.2-2.46-5.8-5.94-5.8S4.39 3.8 4.06 7H2v12h16V7zM6.14 7c.2-1.92 1.6-3.48 3.86-3.8A4.002 4.002 0 0 1 14 7h-2.14c-.2-1.92-1.6-3.48-3.86-3.8zM16 17H4v-8h12v8z"})],-1)]),10,Oa)):(0,r.Q3)("",!0),(0,r.Lk)("button",{onClick:t=>o.openReviewsModal(e),class:"action-btn",title:"View Reviews"},t[18]||(t[18]=[(0,r.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor"},[(0,r.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,r.Lk)("path",{d:"M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H6l-2 2V4h16v12z"})],-1)]),8,ja),o.user?((0,r.uX)(),(0,r.CE)("button",{key:1,onClick:t=>o.openEditModal(e),class:"action-btn",title:"Edit Restaurant"},t[19]||(t[19]=[(0,r.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor"},[(0,r.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,r.Lk)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"})],-1)]),8,Ya)):(0,r.Q3)("",!0),(0,r.Lk)("a",{href:o.getDirectionsUrl(e),target:"_blank",rel:"noopener noreferrer",class:"action-btn",title:"Get Directions"},t[20]||(t[20]=[(0,r.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor"},[(0,r.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,r.Lk)("path",{d:"M22.43 10.59l-9.01-9.01c-.75-.75-2.07-.76-2.83 0l-9.01 9.01c-.76.75-.76 2.07 0 2.83l9.01 9.01c.75.75 2.07.75 2.83 0l9.01-9.01c.75-.76.75-2.08 0-2.83zM12 16c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4z"})],-1)]),8,Za),(0,r.Lk)("a",{href:o.getDetailsUrl(e),target:"_blank",rel:"noopener noreferrer",class:"action-btn",title:"View Details on Google"},t[21]||(t[21]=[(0,r.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor"},[(0,r.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,r.Lk)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 5 1.41-1.41L15.5 14zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"})],-1)]),8,es),e.url?((0,r.uX)(),(0,r.CE)("a",{key:2,href:o.getValidUrl(e.url),target:"_blank",rel:"noopener noreferrer",class:"action-btn",title:"Visit Website"},t[22]||(t[22]=[(0,r.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor"},[(0,r.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,r.Lk)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"})],-1)]),8,ts)):(0,r.Q3)("",!0),o.user?((0,r.uX)(),(0,r.CE)("button",{key:3,class:"check-in-btn",onClick:t=>o.openAddReviewModal(e.id)},"Review",8,as)):(0,r.Q3)("",!0)])]))),128))])):((0,r.uX)(),(0,r.CE)("p",ss,"No restaurants found matching your search."))]))])}const is={class:"modal-content"},os={class:"form-group"},ns={class:"form-group"},ls={class:"form-group"},ds={class:"form-group"},cs={class:"form-group"},us={class:"form-group"},vs={class:"modal-actions"};function gs(e,t,a,i,o,n){return(0,r.uX)(),(0,r.CE)("div",{class:"modal-overlay",onClick:t[8]||(t[8]=(0,s.D$)(t=>e.$emit("close"),["self"]))},[(0,r.Lk)("div",is,[t[16]||(t[16]=(0,r.Lk)("h2",null,"Edit Restaurant",-1)),i.editableRestaurant?((0,r.uX)(),(0,r.CE)("form",{key:0,onSubmit:t[7]||(t[7]=(0,s.D$)((...e)=>i.onSave&&i.onSave(...e),["prevent"]))},[(0,r.Lk)("div",os,[t[9]||(t[9]=(0,r.Lk)("label",{for:"name"},"Name",-1)),(0,r.bo)((0,r.Lk)("input",{id:"name","onUpdate:modelValue":t[0]||(t[0]=e=>i.editableRestaurant.name=e),type:"text",required:""},null,512),[[s.Jo,i.editableRestaurant.name]])]),(0,r.Lk)("div",ns,[t[10]||(t[10]=(0,r.Lk)("label",{for:"address"},"Address",-1)),(0,r.bo)((0,r.Lk)("input",{id:"address","onUpdate:modelValue":t[1]||(t[1]=e=>i.editableRestaurant.address=e),type:"text"},null,512),[[s.Jo,i.editableRestaurant.address]])]),(0,r.Lk)("div",ls,[t[11]||(t[11]=(0,r.Lk)("label",{for:"city"},"City",-1)),(0,r.bo)((0,r.Lk)("input",{id:"city","onUpdate:modelValue":t[2]||(t[2]=e=>i.editableRestaurant.city=e),type:"text"},null,512),[[s.Jo,i.editableRestaurant.city]])]),(0,r.Lk)("div",ds,[t[12]||(t[12]=(0,r.Lk)("label",{for:"state"},"State",-1)),(0,r.bo)((0,r.Lk)("input",{id:"state","onUpdate:modelValue":t[3]||(t[3]=e=>i.editableRestaurant.state=e),type:"text"},null,512),[[s.Jo,i.editableRestaurant.state]])]),(0,r.Lk)("div",cs,[t[13]||(t[13]=(0,r.Lk)("label",{for:"zip"},"Zip Code",-1)),(0,r.bo)((0,r.Lk)("input",{id:"zip","onUpdate:modelValue":t[4]||(t[4]=e=>i.editableRestaurant.zip=e),type:"text"},null,512),[[s.Jo,i.editableRestaurant.zip]])]),(0,r.Lk)("div",us,[t[14]||(t[14]=(0,r.Lk)("label",{for:"url"},"Website URL",-1)),(0,r.bo)((0,r.Lk)("input",{id:"url","onUpdate:modelValue":t[5]||(t[5]=e=>i.editableRestaurant.url=e),type:"url",placeholder:"https://example.com"},null,512),[[s.Jo,i.editableRestaurant.url]])]),(0,r.Lk)("div",vs,[(0,r.Lk)("button",{type:"button",class:"btn-cancel",onClick:t[6]||(t[6]=t=>e.$emit("close"))},"Cancel"),t[15]||(t[15]=(0,r.Lk)("button",{type:"submit",class:"btn-save"},"Save Changes",-1))])],32)):(0,r.Q3)("",!0)])])}const ps={name:"EditRestaurantModal",props:{restaurant:{type:Object,required:!0}},emits:["close","save"],setup(e,{emit:t}){const a=(0,le.KR)(null);(0,r.wB)(()=>e.restaurant,e=>{e&&(a.value=JSON.parse(JSON.stringify(e)))},{immediate:!0,deep:!0});const s=()=>{t("save",a.value)};return{editableRestaurant:a,onSave:s}}},ws=(0,Be.A)(ps,[["render",gs],["__scopeId","data-v-2288406c"]]),hs=ws,ms={class:"modal-content"},ks={class:"modal-header"},bs=["disabled"],ys={class:"modal-body"},fs={class:"form-group"},Ls={class:"form-group"},Cs={class:"form-group"},Rs={key:0,class:"photo-preview-container"},Es=["src"],Ms={key:0,class:"upload-progress"},Is=["value"],xs={key:1,class:"error-message"},Ss={class:"form-actions"},As=["disabled"];function Xs(e,t,a,o,n,l){const d=(0,r.g2)("StarRating");return(0,r.uX)(),(0,r.CE)("div",{class:"modal-overlay",onClick:t[5]||(t[5]=(0,s.D$)(t=>e.$emit("close"),["self"]))},[(0,r.Lk)("div",ms,[(0,r.Lk)("div",ks,[t[6]||(t[6]=(0,r.Lk)("h2",null,"Add Your Review",-1)),(0,r.Lk)("button",{onClick:t[0]||(t[0]=t=>e.$emit("close")),class:"close-btn",disabled:o.isUploading},"Ã—",8,bs)]),(0,r.Lk)("div",ys,[(0,r.Lk)("form",{onSubmit:t[4]||(t[4]=(0,s.D$)((...e)=>o.submitReview&&o.submitReview(...e),["prevent"]))},[(0,r.Lk)("div",fs,[t[7]||(t[7]=(0,r.Lk)("label",null,"Your Rating",-1)),(0,r.bF)(d,{rating:o.review.rating,editable:!0,"onUpdate:rating":t[1]||(t[1]=e=>o.review.rating=e)},null,8,["rating"])]),(0,r.Lk)("div",Ls,[t[8]||(t[8]=(0,r.Lk)("label",{for:"review-text"},"Your Review",-1)),(0,r.bo)((0,r.Lk)("textarea",{id:"review-text","onUpdate:modelValue":t[2]||(t[2]=e=>o.review.text=e),placeholder:"What did you think?"},null,512),[[s.Jo,o.review.text]])]),(0,r.Lk)("div",Cs,[t[9]||(t[9]=(0,r.Lk)("label",{for:"review-photo"},"Add a Photo",-1)),(0,r.Lk)("input",{type:"file",id:"review-photo",onChange:t[3]||(t[3]=(...e)=>o.handleFileChange&&o.handleFileChange(...e)),accept:"image/*"},null,32),o.photoPreview?((0,r.uX)(),(0,r.CE)("div",Rs,[(0,r.Lk)("img",{src:o.photoPreview,alt:"Photo preview",class:"photo-preview"},null,8,Es)])):(0,r.Q3)("",!0)]),o.isUploading?((0,r.uX)(),(0,r.CE)("div",Ms,[(0,r.Lk)("p",null,"Uploading... "+(0,i.v_)(o.uploadProgress.toFixed(0))+"%",1),(0,r.Lk)("progress",{value:o.uploadProgress,max:"100"},null,8,Is)])):(0,r.Q3)("",!0),o.error?((0,r.uX)(),(0,r.CE)("div",xs,(0,i.v_)(o.error),1)):(0,r.Q3)("",!0),(0,r.Lk)("div",Ss,[(0,r.Lk)("button",{type:"submit",class:"btn-primary",disabled:o.isUploading||0===o.review.rating},(0,i.v_)(o.isUploading?"Submitting...":"Submit Review"),9,As)])],32)])])])}const _s={name:"AddReviewModal",components:{StarRating:je},props:{restaurantId:{type:String,required:!0},user:{type:Object,required:!0}},emits:["close","review-added"],setup(e,{emit:t}){const a=(0,le.KR)({rating:0,text:""}),s=(0,le.KR)(null),r=(0,le.KR)(null),i=(0,le.KR)(!1),o=(0,le.KR)(0),n=(0,le.KR)(""),l=e=>{const t=e.target.files[0];if(!t)return s.value=null,void(r.value=null);if(!t.type.startsWith("image/"))return void(n.value="Please select an image file.");r.value=URL.createObjectURL(t);const a=new FileReader;a.onload=e=>{const a=new Image;a.onload=()=>{const e=1024;let{width:r,height:i}=a;r>i?r>e&&(i*=e/r,r=e):i>e&&(r*=e/i,i=e);const o=document.createElement("canvas");o.width=r,o.height=i;const n=o.getContext("2d");n.drawImage(a,0,0,r,i),o.toBlob(e=>{s.value=e},t.type,.9)},a.src=e.target.result},a.readAsDataURL(t)},d=async()=>{if(0!==a.value.rating){i.value=!0,n.value="";try{let l=null;if(s.value){const t=`reviews/${e.restaurantId}/${Date.now()}_${e.user.uid}`,a=(0,ve.KR)(ke,t),r=(0,ve.bp)(a,s.value);await new Promise((e,t)=>{r.on("state_changed",e=>{o.value=e.bytesTransferred/e.totalBytes*100},e=>{console.error("Upload failed:",e),n.value="Image upload failed. Please try again.",i.value=!1,t(e)},async()=>{l=await(0,ve.qk)(r.snapshot.ref),e()})})}const d=(0,ue.O5)(),c={userId:e.user.uid,userName:e.user.displayName||"Anonymous",userPhoto:e.user.photoURL,restaurantId:e.restaurantId,rating:a.value.rating,text:a.value.text,photoURL:l,tags:[],createdAt:d,lastActivityAt:d};await(0,ue.gS)((0,ue.rJ)(me,"reviews"),c);const u=(0,ue.H9)(me,"users",e.user.uid);try{await(0,ue.mZ)(u,{reviewCount:(0,ue.GV)(1)})}catch(r){console.warn("Failed to update reviewCount (non-critical):",r)}Ke("Review added successfully!","success",2e3),t("review-added",e.restaurantId)}catch(l){n.value||(console.error("Error submitting review:",l),n.value="Failed to submit review. Please try again.",Ke("Failed to submit review. Please try again.","error")),i.value=!1}}else n.value="Please provide a star rating."};return{review:a,photoPreview:r,isUploading:i,uploadProgress:o,error:n,handleFileChange:l,submitReview:d}}},Fs=(0,Be.A)(_s,[["render",Xs],["__scopeId","data-v-b8084282"]]),Ps=Fs,Us={class:"modal-content"},zs={class:"modal-header"},Vs={class:"modal-body"},Ts={key:0,class:"no-reviews-message"},Ks={key:1,class:"reviews-list"},Hs={key:0},Ns={class:"edit-review-form"},Bs={class:"edit-actions"},Qs={key:1},Gs={class:"review-header"},Ds=["src"],Js={class:"user-info"},qs={class:"user-name"},Ws={class:"review-date"},$s={key:0,class:"review-actions"},Os=["onClick"],js=["onClick"],Ys={class:"review-body"},Zs={key:0,class:"review-text"},er={key:1,class:"review-photo-container"},tr=["src"],ar={key:2,class:"tags-container"};function sr(e,t,a,o,n,l){const d=(0,r.g2)("StarRating");return(0,r.uX)(),(0,r.CE)("div",{class:"modal-overlay",onClick:t[5]||(t[5]=(0,s.D$)(t=>e.$emit("close"),["self"]))},[(0,r.Lk)("div",Us,[(0,r.Lk)("div",zs,[(0,r.Lk)("h2",null,"Reviews for "+(0,i.v_)(a.restaurant.name),1),(0,r.Lk)("button",{onClick:t[0]||(t[0]=t=>e.$emit("close")),class:"close-btn"},"Ã—")]),(0,r.Lk)("div",Vs,[a.restaurant.reviews&&0===a.restaurant.reviews.length?((0,r.uX)(),(0,r.CE)("div",Ts," No reviews yet for this restaurant. ")):((0,r.uX)(),(0,r.CE)("ul",Ks,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(a.restaurant.reviews,e=>((0,r.uX)(),(0,r.CE)("li",{key:e.id,class:"review-item"},[o.editingReview&&o.editingReview.id===e.id?((0,r.uX)(),(0,r.CE)("div",Hs,[(0,r.Lk)("div",Ns,[(0,r.bF)(d,{rating:o.editingReview.rating,editable:!0,"onUpdate:rating":t[1]||(t[1]=e=>o.editingReview.rating=e)},null,8,["rating"]),(0,r.bo)((0,r.Lk)("textarea",{"onUpdate:modelValue":t[2]||(t[2]=e=>o.editingReview.text=e),class:"edit-textarea"},null,512),[[s.Jo,o.editingReview.text]]),(0,r.Lk)("div",Bs,[(0,r.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>o.saveEdit&&o.saveEdit(...e)),class:"btn-primary"},"Save"),(0,r.Lk)("button",{onClick:t[4]||(t[4]=(...e)=>o.cancelEdit&&o.cancelEdit(...e)),class:"btn-secondary"},"Cancel")])])])):((0,r.uX)(),(0,r.CE)("div",Qs,[(0,r.Lk)("div",Gs,[(0,r.Lk)("img",{src:e.userPhoto||"https://cdn-icons-png.flaticon.com/512/149/149071.png",alt:"User",class:"user-avatar"},null,8,Ds),(0,r.Lk)("div",Js,[(0,r.Lk)("span",qs,(0,i.v_)(e.userName),1),(0,r.Lk)("span",Ws,(0,i.v_)(o.formatDate(e.createdAt)),1)]),a.user&&a.user.uid===e.userId?((0,r.uX)(),(0,r.CE)("div",$s,[(0,r.Lk)("button",{onClick:t=>o.startEditing(e),class:"action-btn",title:"Edit Review"},t[6]||(t[6]=[(0,r.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"18px",viewBox:"0 0 24 24",width:"18px",fill:"currentColor"},[(0,r.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,r.Lk)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"})],-1)]),8,Os),(0,r.Lk)("button",{onClick:t=>o.deleteReview(e.id),class:"action-btn",title:"Delete Review"},t[7]||(t[7]=[(0,r.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"18px",viewBox:"0 0 24 24",width:"18px",fill:"currentColor"},[(0,r.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,r.Lk)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"})],-1)]),8,js)])):(0,r.Q3)("",!0)]),(0,r.Lk)("div",Ys,[(0,r.bF)(d,{rating:e.rating},null,8,["rating"]),e.text?((0,r.uX)(),(0,r.CE)("p",Zs,'"'+(0,i.v_)(e.text)+'"',1)):(0,r.Q3)("",!0),e.photoURL?((0,r.uX)(),(0,r.CE)("div",er,[(0,r.Lk)("img",{src:e.photoURL,alt:"Review photo",class:"review-photo",loading:"lazy"},null,8,tr)])):(0,r.Q3)("",!0),e.tags&&e.tags.length>0?((0,r.uX)(),(0,r.CE)("div",ar,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e.tags,e=>((0,r.uX)(),(0,r.CE)("span",{key:e,class:"tag"},(0,i.v_)(e),1))),128))])):(0,r.Q3)("",!0)])]))]))),128))]))])])])}const rr={name:"RestaurantReviewsModal",components:{StarRating:je},props:{restaurant:{type:Object,required:!0},user:{type:Object,default:null}},emits:["close","reviews-updated"],setup(e,{emit:t}){const a=(0,le.KR)(null),s=e=>e&&e.toDate?e.toDate().toLocaleDateString():"",r=e=>{a.value=JSON.parse(JSON.stringify(e))},i=()=>{a.value=null},o=async()=>{if(!a.value)return;const e=(0,ue.H9)(me,"reviews",a.value.id);try{await(0,ue.mZ)(e,{rating:a.value.rating,text:a.value.text}),t("reviews-updated"),i(),Ke("Review updated successfully!","success")}catch(s){console.error("Error updating review:",s),Ke("Failed to save review. Please try again.","error")}},n=async e=>{if(confirm("Are you sure you want to delete this review?"))try{await(0,ue.kd)((0,ue.H9)(me,"reviews",e)),t("reviews-updated"),Ke("Review deleted successfully","success")}catch(a){console.error("Error deleting review:",a),Ke("Failed to delete review. Please try again.","error")}};return{formatDate:s,editingReview:a,startEditing:r,cancelEdit:i,saveEdit:o,deleteReview:n}}},ir=(0,Be.A)(rr,[["render",sr],["__scopeId","data-v-6bcdd790"]]),or=ir,nr={name:"Restaurants",components:{EditRestaurantModal:hs,StarRating:je,RestaurantReviewsModal:or,AddReviewModal:Ps},props:{user:{type:Object,default:null}},setup(e){const t=["AL","AK","AZ","AR","CA","CO","CT","DE","FL","GA","HI","ID","IL","IN","IA","KS","KY","LA","ME","MD","MA","MI","MN","MS","MO","MT","NE","NV","NH","NJ","NM","NY","NC","ND","OH","OK","OR","PA","RI","SC","SD","TN","TX","UT","VT","VA","WA","WV","WI","WY"],s=(0,le.KR)([]),i=(0,le.KR)([]),o=(0,le.KR)(!0),n=(0,le.KR)(""),l=(0,le.KR)(!1),d=(0,le.KR)(!1),c=(0,le.KR)(!1),u=(0,le.KR)(null),v=(0,le.KR)(null),g=(0,le.KR)(null),p=(0,le.KR)(null),w=(0,le.KR)(new Set),h=(0,le.KR)(!1),m=(0,le.KR)({name:"",address:"",city:"",state:"",zip:"",url:""}),k=(0,le.KR)(""),b=(0,le.KR)(!1);let y=()=>{},f=()=>{},L=()=>{};const C=(0,r.EW)(()=>{const e={};return i.value.forEach(t=>{t.restaurantId&&"number"===typeof t.rating&&(e[t.restaurantId]||(e[t.restaurantId]={total:0,count:0,reviews:[]}),e[t.restaurantId].total+=t.rating,e[t.restaurantId].count++,e[t.restaurantId].reviews.push(t))}),s.value.map(t=>{const a=e[t.id],s=a?a.reviews.sort((e,t)=>(t.createdAt?.seconds??0)-(e.createdAt?.seconds??0)):[];return{...t,averageRating:a?a.total/a.count:0,ratingCount:a?a.count:0,reviews:s}})});(0,r.sV)(()=>{o.value=!0;const e=(0,ue.rJ)(me,"restaurants");f=(0,ue.aQ)(e,e=>{s.value=e.docs.map(e=>({id:e.id,...e.data()})),i.value.length>0&&(o.value=!1)},e=>{console.error("Error fetching restaurants:",e),o.value=!1});const t=(0,ue.rJ)(me,"reviews");L=(0,ue.aQ)(t,e=>{i.value=e.docs.map(e=>({id:e.id,...e.data()})),o.value=!1},e=>{console.error("Error fetching reviews:",e),o.value=!1}),navigator.geolocation?navigator.geolocation.getCurrentPosition(e=>{p.value={lat:e.coords.latitude,lng:e.coords.longitude}},e=>{console.error("Error getting location",e)}):console.error("Geolocation is not supported by this browser.")}),(0,r.hi)(()=>{y(),f(),L()});const R=e=>{y();const t=(0,ue.P)((0,ue.rJ)(me,"bucketListItems"),(0,ue._M)("userId","==",e));y=(0,ue.aQ)(t,e=>{const t=new Set;e.forEach(e=>t.add(e.data().restaurantId)),w.value=t})};(0,r.wB)(()=>e.user,e=>{e?R(e.uid):(y(),w.value.clear())},{immediate:!0});const E=(0,r.EW)(()=>C.value.map(e=>{const t=p.value&&e.location?fa(p.value.lat,p.value.lng,e.location.lat,e.location.lng):null;return{...e,distance:t}}).sort((e,t)=>null===e.distance?1:null===t.distance?-1:e.distance-t.distance)),M=(0,r.EW)(()=>{if(!n.value.trim())return E.value;const e=n.value.toLowerCase();return E.value.filter(t=>t.name&&t.name.toLowerCase().includes(e)||t.address&&t.address.toLowerCase().includes(e)||t.city&&t.city.toLowerCase().includes(e)||t.state&&t.state.toLowerCase().includes(e)||t.zip&&t.zip.toLowerCase().includes(e))}),I=e=>{const t=encodeURIComponent(`${e.name}, ${e.address}`);return`https://www.google.com/maps/dir/?api=1&destination=${t}`},x=e=>{const t=encodeURIComponent(`${e.name}, ${e.address}`);return`https://www.google.com/search?q=${t}`},S=e=>e?e.startsWith("http://")||e.startsWith("https://")?e:`https://${e}`:"#",A=e=>{u.value=e,l.value=!0},X=()=>{l.value=!1,u.value=null},_=e=>{g.value=e,c.value=!0},F=()=>{c.value=!1,g.value=null},P=e=>{v.value=e,d.value=!0},U=()=>{d.value=!1,v.value=null},z=async e=>{U()},V=async()=>{},T=async e=>{const t={...e};if(!t||!t.id)return;const s=u.value,r={},i=s.name!==t.name;i&&(r.name=t.name,r.name_lowercase=t.name.trim().toLowerCase());const o=["address","city","state","zip"],n=o.some(e=>s[e]!==t[e]);if(n){r.address=t.address,r.city=t.city,r.state=t.state,r.zip=t.zip,r.address_lowercase=(t.address||"").trim().toLowerCase();const e=[t.address,t.city,t.state,t.zip].filter(Boolean).join(", "),{geocodeAddress:s}=await Promise.resolve().then(a.bind(a,914)),i=await s(e);i?r.location=i:(Ke("Could not find a location for the provided address. The restaurant will be saved without a location.","warning",5e3),r.location=null)}if(s.url!==t.url&&(r.url=t.url),0===Object.keys(r).length)return void X();const l=(0,ue.H9)(me,"restaurants",t.id);try{await(0,ue.mZ)(l,r),X()}catch(d){console.error("Error updating restaurant: ",d),Ke("Failed to save changes. Please try again.","error")}},K=async()=>{if(!e.user)return void(k.value="You must be logged in to add a restaurant.");if(!m.value.name.trim()||!m.value.address.trim())return void(k.value="Restaurant name and address are required.");b.value=!0,k.value="";const t=m.value.name.trim().toLowerCase(),s=m.value.address.trim().toLowerCase();try{const r=(0,ue.P)((0,ue.rJ)(me,"restaurants"),(0,ue._M)("name_lowercase","==",t),(0,ue._M)("address_lowercase","==",s)),i=await(0,ue.GG)(r);if(!i.empty)return k.value="This restaurant already exists.",void(b.value=!1);const o=[m.value.address,m.value.city,m.value.state,m.value.zip].filter(Boolean).join(", "),{geocodeAddress:n}=await Promise.resolve().then(a.bind(a,914)),l=await n(o);if(!l)return k.value="Could not find a location for the provided address. Please check the address and try again.",void(b.value=!1);const d={name:m.value.name.trim(),address:m.value.address.trim(),city:m.value.city.trim(),state:m.value.state.trim(),zip:m.value.zip.trim(),url:m.value.url.trim(),name_lowercase:t,address_lowercase:s,location:l,createdAt:(0,ue.O5)(),userId:e.user.uid,userDisplayName:e.user.displayName||"Anonymous"};await(0,ue.gS)((0,ue.rJ)(me,"restaurants"),d);h.value=!1,m.value={name:"",address:"",city:"",state:"",zip:"",url:""}}catch(r){console.error("Error adding new restaurant:",r),k.value="Failed to add restaurant. Please try again."}finally{b.value=!1}},H=e=>w.value.has(e),N=async t=>{const a=e.user;if(a)if(H(t.id)){const e=(0,ue.P)((0,ue.rJ)(me,"bucketListItems"),(0,ue._M)("userId","==",a.uid),(0,ue._M)("restaurantId","==",t.id)),s=await(0,ue.GG)(e);s.forEach(e=>(0,ue.kd)(e.ref))}else await(0,ue.gS)((0,ue.rJ)(me,"bucketListItems"),{userId:a.uid,restaurantId:t.id,createdAt:(0,ue.O5)()})};return{usStates:t,user:e.user,loading:o,searchQuery:n,filteredRestaurants:M,getDirectionsUrl:I,getDetailsUrl:x,getValidUrl:S,isEditModalVisible:l,restaurantToEdit:u,isReviewsModalVisible:c,restaurantForReviews:g,openEditModal:A,closeEditModal:X,saveRestaurantChanges:T,openReviewsModal:_,closeReviewsModal:F,handleReviewOrUpdate:V,isInBucketList:H,toggleBucketList:N,showAddForm:h,newRestaurant:m,addNewRestaurant:K,addError:k,isSaving:b,isAddReviewModalVisible:d,restaurantIdForNewReview:v,openAddReviewModal:P,closeAddReviewModal:U,handleReviewAdded:z}}},lr=(0,Be.A)(nr,[["render",rs],["__scopeId","data-v-0bc2a3c0"]]),dr=lr,cr={class:"user-search-page"},ur={class:"search-box"},vr={key:0},gr={key:1},pr={key:0,class:"no-users-message"},wr={key:0},hr={key:1},mr={class:"user-card-content"},kr={class:"user-info"},br=["src"],yr={class:"user-details"},fr={class:"user-name-line"},Lr={class:"user-name"},Cr={key:0,class:"medal"},Rr={key:0,class:"user-distance"},Er={key:0,class:"last-review"},Mr={class:"review-header"},Ir={class:"review-body"},xr={key:0,class:"review-text"},Sr={key:1,class:"last-review no-review"},Ar={class:"user-actions"},Xr=["onClick"],_r=["onClick"];function Fr(e,t,a,o,n,l){const d=(0,r.g2)("UserReviewsModal"),c=(0,r.g2)("StarRating");return(0,r.uX)(),(0,r.CE)(r.FK,null,[o.isReviewsModalVisible?((0,r.uX)(),(0,r.Wv)(d,{key:0,user:o.userForReviews,onClose:o.closeReviewsModal},null,8,["user","onClose"])):(0,r.Q3)("",!0),(0,r.Lk)("div",cr,[(0,r.Lk)("div",ur,[(0,r.bo)((0,r.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>o.searchQuery=e),placeholder:"Search for users by name...",class:"search-input"},null,512),[[s.Jo,o.searchQuery]])]),o.loading?((0,r.uX)(),(0,r.CE)("div",vr,"Loading users...")):((0,r.uX)(),(0,r.CE)("div",gr,[0===o.filteredUsers.length?((0,r.uX)(),(0,r.CE)("div",pr,[o.searchQuery?((0,r.uX)(),(0,r.CE)("div",wr,t[1]||(t[1]=[(0,r.Lk)("h3",null,"No users found",-1),(0,r.Lk)("p",null,"Try adjusting your search terms or check out the Leaderboard to find active reviewers.",-1)]))):((0,r.uX)(),(0,r.CE)("div",hr,t[2]||(t[2]=[(0,r.Lk)("h3",null,"No other users yet",-1),(0,r.Lk)("p",null,"Be the first to share reviews! Create your first review and invite others to join.",-1)])))])):(0,r.Q3)("",!0),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(o.filteredUsers,e=>((0,r.uX)(),(0,r.CE)("div",{key:e.uid,class:"user-card"},[(0,r.Lk)("div",mr,[(0,r.Lk)("div",kr,[(0,r.Lk)("img",{src:e.photoURL||"https://cdn-icons-png.flaticon.com/512/149/149071.png",class:"user-avatar",alt:"User"},null,8,br),(0,r.Lk)("div",yr,[(0,r.Lk)("div",fr,[(0,r.Lk)("span",Lr,(0,i.v_)(e.displayName),1),e.medal?((0,r.uX)(),(0,r.CE)("span",Cr,(0,i.v_)(e.medal),1)):(0,r.Q3)("",!0)]),null!==e.distance?((0,r.uX)(),(0,r.CE)("div",Rr,(0,i.v_)(e.distance.toFixed(1))+" miles away",1)):(0,r.Q3)("",!0)])]),e.lastReview?((0,r.uX)(),(0,r.CE)("div",Er,[(0,r.Lk)("div",Mr,[t[3]||(t[3]=(0,r.eW)(" Latest review: ",-1)),(0,r.Lk)("strong",null,(0,i.v_)(e.lastReview.restaurantName),1)]),(0,r.Lk)("div",Ir,[(0,r.bF)(c,{rating:e.lastReview.rating},null,8,["rating"]),e.lastReview.text?((0,r.uX)(),(0,r.CE)("p",xr,'"'+(0,i.v_)(e.lastReview.text)+'"',1)):(0,r.Q3)("",!0)])])):((0,r.uX)(),(0,r.CE)("div",Sr," No reviews yet. "))]),(0,r.Lk)("div",Ar,[(0,r.Lk)("button",{onClick:t=>o.openReviewsModal(e),class:"action-btn",title:"View Reviews"},t[4]||(t[4]=[(0,r.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor"},[(0,r.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,r.Lk)("path",{d:"M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H6l-2 2V4h16v12z"})],-1)]),8,Xr),(0,r.Lk)("button",{onClick:t=>o.toggleFollow(e),class:(0,i.C4)(["follow-btn",{"unfollow-btn":e.isFollowing}])},(0,i.v_)(e.isFollowing?"Unfollow":"Follow"),11,_r)])]))),128))]))])],64)}const Pr={class:"modal-content"},Ur={class:"modal-header"},zr={class:"modal-body"},Vr={key:0,class:"loading-indicator"},Tr={key:1,class:"no-reviews-message"},Kr={key:2,class:"reviews-list"},Hr={class:"review-header"},Nr={class:"restaurant-name"},Br={class:"review-date"},Qr={class:"review-body"},Gr={key:0,class:"review-text"},Dr=["src"],Jr={key:2,class:"tags-container"};function qr(e,t,a,o,n,l){const d=(0,r.g2)("StarRating");return(0,r.uX)(),(0,r.CE)("div",{class:"modal-overlay",onClick:t[1]||(t[1]=(0,s.D$)(t=>e.$emit("close"),["self"]))},[(0,r.Lk)("div",Pr,[(0,r.Lk)("div",Ur,[(0,r.Lk)("h2",null,"Reviews by "+(0,i.v_)(a.user.displayName),1),(0,r.Lk)("button",{onClick:t[0]||(t[0]=t=>e.$emit("close")),class:"close-btn"},"Ã—")]),(0,r.Lk)("div",zr,[o.loading?((0,r.uX)(),(0,r.CE)("div",Vr,"Loading reviews...")):0===o.reviews.length?((0,r.uX)(),(0,r.CE)("p",Tr," This user hasn't posted any reviews yet. ")):((0,r.uX)(),(0,r.CE)("ul",Kr,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(o.reviews,e=>((0,r.uX)(),(0,r.CE)("li",{key:e.id,class:"review-item"},[(0,r.Lk)("div",Hr,[(0,r.Lk)("span",Nr,(0,i.v_)(e.restaurantName),1),(0,r.Lk)("span",Br,(0,i.v_)(o.formatDate(e.createdAt)),1)]),(0,r.Lk)("div",Qr,[(0,r.bF)(d,{rating:e.rating},null,8,["rating"]),e.text?((0,r.uX)(),(0,r.CE)("p",Gr,'"'+(0,i.v_)(e.text)+'"',1)):(0,r.Q3)("",!0),e.photoURL?((0,r.uX)(),(0,r.CE)("img",{key:1,src:e.photoURL,alt:"Review photo",class:"review-photo"},null,8,Dr)):(0,r.Q3)("",!0),e.tags&&e.tags.length>0?((0,r.uX)(),(0,r.CE)("div",Jr,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e.tags,e=>((0,r.uX)(),(0,r.CE)("span",{key:e,class:"tag"},(0,i.v_)(e),1))),128))])):(0,r.Q3)("",!0)])]))),128))]))])])])}const Wr={name:"UserReviewsModal",components:{StarRating:je},props:{user:{type:Object,required:!0}},emits:["close"],setup(e){const t=(0,le.KR)([]),a=(0,le.KR)(!0),s=async()=>{if(!e.user?.uid)return t.value=[],void(a.value=!1);a.value=!0,t.value=[];try{const a=await(0,ue.GG)((0,ue.rJ)(me,"restaurants")),s=new Map;a.forEach(e=>{s.set(e.id,e.data().name)});const r=(0,ue.P)((0,ue.rJ)(me,"reviews"),(0,ue._M)("userId","==",e.user.uid),(0,ue.My)("createdAt","desc")),i=await(0,ue.GG)(r);t.value=i.docs.map(e=>{const t=e.data();return{id:e.id,...t,restaurantName:s.get(t.restaurantId)||"Unknown Restaurant"}})}catch(s){console.error("Error fetching user reviews:",s)}finally{a.value=!1}};(0,r.wB)(()=>e.user,e=>{e&&s()},{immediate:!0});const i=e=>e&&e.toDate?e.toDate().toLocaleDateString():"";return{reviews:t,loading:a,formatDate:i}}},$r=(0,Be.A)(Wr,[["render",qr],["__scopeId","data-v-4e60c4e2"]]),Or=$r,jr={name:"UserSearch",components:{StarRating:je,UserReviewsModal:Or},setup(){const e=(0,le.KR)([]),t=(0,le.KR)(!0),a=(0,le.KR)(null),s=(0,le.KR)([]),i=(0,le.KR)(""),o=(0,le.KR)(!1),n=(0,le.KR)(null),l=(0,le.KR)(new Map);let d=()=>{};const c=e=>"number"!==typeof e?null:0===e?"ðŸ¥‡":1===e?"ðŸ¥ˆ":2===e?"ðŸ¥‰":e>=3&&e<10?"ðŸ…":null,u=async()=>{t.value=!0;const r=we.currentUser;if(!r)return;const i=(0,ue.P)((0,ue.rJ)(me,"follows"),(0,ue._M)("followerId","==",r.uid));d=(0,ue.aQ)(i,t=>{const a=t.docs.map(e=>e.data().followingId);s.value=a,e.value=e.value.map(e=>({...e,isFollowing:a.includes(e.uid)}))});const o=await(0,ue.GG)((0,ue.P)((0,ue.rJ)(me,"users"),(0,ue.My)("reviewCount","desc"),(0,ue.AB)(30))),n=o.docs.map(e=>({id:e.id,...e.data()})).filter(e=>{const t=Number(e.reviewCount)||0;return t>0}).sort((e,t)=>{const a=Number(e.reviewCount)||0,s=Number(t.reviewCount)||0;return s-a}).slice(0,10),u=new Map;n.forEach((e,t)=>{u.set(e.id,t)}),l.value=u;const v=await(0,ue.GG)((0,ue.rJ)(me,"restaurants")),g=new Map;v.forEach(e=>{g.set(e.id,e.data())});const p=(0,ue.P)((0,ue.rJ)(me,"users"),(0,ue._M)("uid","!=",r.uid)),w=await(0,ue.GG)(p),h=w.docs.map(e=>({uid:e.id,...e.data()})),m=await Promise.all(h.map(async e=>{const t=(0,ue.P)((0,ue.rJ)(me,"reviews"),(0,ue._M)("userId","==",e.uid),(0,ue.My)("createdAt","desc"),(0,ue.AB)(1)),r=await(0,ue.GG)(t);let i=null,o=null;if(!r.empty){const e=r.docs[0].data(),t=g.get(e.restaurantId);i={...e,restaurantName:t?.name||"Unknown Restaurant"},a.value&&t?.location&&(o=fa(a.value.lat,a.value.lng,t.location.lat,t.location.lng))}const n=l.value.get(e.uid);return{...e,isFollowing:s.value.includes(e.uid),lastReview:i,distance:o,medal:c(n)}}));e.value=m,t.value=!1};(0,r.sV)(()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(e=>{a.value={lat:e.coords.latitude,lng:e.coords.longitude},u()},e=>{console.error("Error getting location",e),u()}):(console.error("Geolocation is not supported by this browser."),u())}),(0,r.hi)(()=>{d()});const v=(0,r.EW)(()=>{const t=[...e.value].sort((e,t)=>null===e.distance&&null!==t.distance?1:null!==e.distance&&null===t.distance?-1:null===e.distance&&null===t.distance?0:e.distance-t.distance);if(!i.value.trim())return t;const a=i.value.toLowerCase();return t.filter(e=>e.displayName.toLowerCase().includes(a))}),g=async e=>{const t=we.currentUser;if(!t)return;const a=(0,ue.rJ)(me,"follows");if(e.isFollowing){const s=(0,ue.P)(a,(0,ue._M)("followerId","==",t.uid),(0,ue._M)("followingId","==",e.uid)),r=await(0,ue.GG)(s);if(!r.empty){const e=r.docs[0].id;await(0,ue.kd)((0,ue.H9)(me,"follows",e))}}else await(0,ue.gS)(a,{followerId:t.uid,followingId:e.uid})},p=e=>{n.value=e,o.value=!0},w=()=>{o.value=!1,n.value=null};return{filteredUsers:v,loading:t,toggleFollow:g,searchQuery:i,isReviewsModalVisible:o,userForReviews:n,openReviewsModal:p,closeReviewsModal:w}}},Yr=(0,Be.A)(jr,[["render",Fr],["__scopeId","data-v-51cdc354"]]),Zr=Yr,ei={class:"review-page"},ti={class:"review-card"},ai={class:"form-group"},si=["disabled"],ri=["value"],ii={key:0,class:"add-restaurant-prompt"},oi={key:0,class:"add-restaurant-form"},ni={class:"form-group"},li={class:"form-group"},di={class:"form-group"},ci={class:"form-group"},ui=["value"],vi={class:"form-group"},gi={class:"form-group"},pi=["disabled"],wi={key:0,class:"error-message"},hi={class:"form-group"},mi={key:0,class:"photo-actions"},ki={key:1,class:"photo-preview"},bi=["src"],yi={key:1,class:"camera-modal"},fi={ref:"videoPlayer",class:"camera-video",autoplay:"",playsinline:""},Li={class:"form-group"},Ci={class:"star-rating-input"},Ri=["onMouseover","onClick","title"],Ei={height:"28px",width:"28px",viewBox:"0 0 24 24",fill:"currentColor"},Mi=["d"],Ii={class:"form-group"},xi={class:"tags-container"},Si=["onClick"],Ai={class:"form-group"},Xi={class:"new-tag-input"},_i=["disabled"],Fi={class:"form-group"},Pi={key:0,class:"char-count"},Ui={key:2,class:"review-preview"},zi={class:"preview-content"},Vi={class:"preview-restaurant"},Ti={key:0},Ki={key:1,class:"tags-container"},Hi={key:2,class:"photo-preview"},Ni=["src"],Bi={class:"form-actions"},Qi=["disabled"],Gi={key:3,class:"error-message"};function Di(e,t,a,o,n,l){const d=(0,r.g2)("StarRating");return(0,r.uX)(),(0,r.CE)("div",ei,[(0,r.Lk)("div",ti,[(0,r.Lk)("form",{onSubmit:t[21]||(t[21]=(0,s.D$)((...e)=>o.submitReview&&o.submitReview(...e),["prevent"]))},[(0,r.Lk)("div",ai,[t[24]||(t[24]=(0,r.Lk)("label",{for:"restaurant"},"Restaurant",-1)),(0,r.bo)((0,r.Lk)("select",{id:"restaurant","onUpdate:modelValue":t[0]||(t[0]=e=>o.selectedRestaurant=e),disabled:!!a.selectedRestaurantId,required:""},[t[22]||(t[22]=(0,r.Lk)("option",{disabled:"",value:""},"Please select a restaurant",-1)),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(o.restaurants,e=>((0,r.uX)(),(0,r.CE)("option",{key:e.id,value:e.id},(0,i.v_)(e.name),9,ri))),128))],8,si),[[s.u1,o.selectedRestaurant]]),a.selectedRestaurantId?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.CE)("div",ii,[t[23]||(t[23]=(0,r.eW)(" Can't find the restaurant? ",-1)),(0,r.Lk)("button",{type:"button",class:"link-button",onClick:t[1]||(t[1]=e=>o.showAddRestaurantForm=!o.showAddRestaurantForm)},(0,i.v_)(o.showAddRestaurantForm?"Cancel":"Add a new one"),1)]))]),o.showAddRestaurantForm?((0,r.uX)(),(0,r.CE)("div",oi,[t[32]||(t[32]=(0,r.Lk)("h3",{class:"add-restaurant-header"},"Add New Restaurant",-1)),(0,r.Lk)("div",ni,[t[25]||(t[25]=(0,r.Lk)("label",{for:"new-rest-name"},"Name",-1)),(0,r.bo)((0,r.Lk)("input",{id:"new-rest-name","onUpdate:modelValue":t[2]||(t[2]=e=>o.newRestaurant.name=e),type:"text",required:""},null,512),[[s.Jo,o.newRestaurant.name]])]),(0,r.Lk)("div",li,[t[26]||(t[26]=(0,r.Lk)("label",{for:"new-rest-address"},"Address",-1)),(0,r.bo)((0,r.Lk)("input",{id:"new-rest-address","onUpdate:modelValue":t[3]||(t[3]=e=>o.newRestaurant.address=e),type:"text",required:""},null,512),[[s.Jo,o.newRestaurant.address]])]),(0,r.Lk)("div",di,[t[27]||(t[27]=(0,r.Lk)("label",{for:"new-rest-city"},"City",-1)),(0,r.bo)((0,r.Lk)("input",{id:"new-rest-city","onUpdate:modelValue":t[4]||(t[4]=e=>o.newRestaurant.city=e),type:"text"},null,512),[[s.Jo,o.newRestaurant.city]])]),(0,r.Lk)("div",ci,[t[29]||(t[29]=(0,r.Lk)("label",{for:"new-rest-state"},"State",-1)),(0,r.bo)((0,r.Lk)("select",{id:"new-rest-state","onUpdate:modelValue":t[5]||(t[5]=e=>o.newRestaurant.state=e)},[t[28]||(t[28]=(0,r.Lk)("option",{value:""},"-- Select a State --",-1)),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(o.usStates,e=>((0,r.uX)(),(0,r.CE)("option",{key:e,value:e},(0,i.v_)(e),9,ui))),128))],512),[[s.u1,o.newRestaurant.state]])]),(0,r.Lk)("div",vi,[t[30]||(t[30]=(0,r.Lk)("label",{for:"new-rest-zip"},"Zip Code",-1)),(0,r.bo)((0,r.Lk)("input",{id:"new-rest-zip","onUpdate:modelValue":t[6]||(t[6]=e=>o.newRestaurant.zip=e),type:"text"},null,512),[[s.Jo,o.newRestaurant.zip]])]),(0,r.Lk)("div",gi,[t[31]||(t[31]=(0,r.Lk)("label",{for:"url"},"Website URL",-1)),(0,r.bo)((0,r.Lk)("input",{id:"url","onUpdate:modelValue":t[7]||(t[7]=e=>o.newRestaurant.url=e),type:"url",placeholder:"https://example.com"},null,512),[[s.Jo,o.newRestaurant.url]])]),(0,r.Lk)("button",{type:"button",class:"btn-save-restaurant",onClick:t[8]||(t[8]=(...e)=>o.saveNewRestaurant&&o.saveNewRestaurant(...e)),disabled:o.isSavingRestaurant},(0,i.v_)(o.isSavingRestaurant?"Saving...":"Save Restaurant"),9,pi),o.addRestaurantError?((0,r.uX)(),(0,r.CE)("p",wi,(0,i.v_)(o.addRestaurantError),1)):(0,r.Q3)("",!0)])):(0,r.Q3)("",!0),(0,r.Lk)("div",hi,[t[35]||(t[35]=(0,r.Lk)("label",null,"Photo",-1)),o.photoDataUrl?((0,r.uX)(),(0,r.CE)("div",ki,[(0,r.Lk)("img",{src:o.photoDataUrl,alt:"Review photo preview"},null,8,bi),(0,r.Lk)("button",{type:"button",onClick:t[12]||(t[12]=(...e)=>o.removePhoto&&o.removePhoto(...e)),class:"btn-remove-photo",title:"Remove Photo"},"Ã—")])):((0,r.uX)(),(0,r.CE)("div",mi,[(0,r.Lk)("button",{type:"button",onClick:t[9]||(t[9]=(...e)=>o.openCamera&&o.openCamera(...e)),class:"btn-secondary"},t[33]||(t[33]=[(0,r.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor"},[(0,r.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,r.Lk)("circle",{cx:"12",cy:"12",r:"3.2"}),(0,r.Lk)("path",{d:"M9 2L7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2H9zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z"})],-1),(0,r.eW)(" Take a Picture ",-1)])),(0,r.Lk)("button",{type:"button",onClick:t[10]||(t[10]=(...e)=>o.triggerFileUpload&&o.triggerFileUpload(...e)),class:"btn-secondary"},t[34]||(t[34]=[(0,r.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor"},[(0,r.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,r.Lk)("path",{d:"M9 16h6v-6h4l-7-7-7 7h4v6zm3-10.17L14.17 8H13v6h-2V8H9.83L12 5.83zM5 18h14v2H5v-2z"})],-1),(0,r.eW)(" Upload Photo ",-1)])),(0,r.Lk)("input",{type:"file",ref:"fileInput",onChange:t[11]||(t[11]=(...e)=>o.handleFileUpload&&o.handleFileUpload(...e)),accept:"image/*",style:{display:"none"}},null,544)]))]),o.isCameraOpen?((0,r.uX)(),(0,r.CE)("div",yi,[(0,r.Lk)("video",fi,null,512),(0,r.Lk)("button",{type:"button",onClick:t[13]||(t[13]=(...e)=>o.capturePhoto&&o.capturePhoto(...e)),class:"btn-capture"},"Capture"),(0,r.Lk)("button",{type:"button",onClick:t[14]||(t[14]=(...e)=>o.closeCamera&&o.closeCamera(...e)),class:"btn-cancel-camera"},"Cancel")])):(0,r.Q3)("",!0),(0,r.Lk)("div",Li,[t[37]||(t[37]=(0,r.Lk)("label",null,"Rating",-1)),(0,r.Lk)("div",Ci,[((0,r.uX)(),(0,r.CE)(r.FK,null,(0,r.pI)(5,e=>(0,r.Lk)("span",{key:e,class:"star",onMouseover:t=>o.hoverRating=e,onMouseleave:t[15]||(t[15]=e=>o.hoverRating=0),onClick:t=>o.rating=e,title:`${e} star${e>1?"s":""}`},[((0,r.uX)(),(0,r.CE)("svg",Ei,[t[36]||(t[36]=(0,r.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"},null,-1)),(0,r.Lk)("path",{d:o.getStarPath(e)},null,8,Mi)]))],40,Ri)),64))])]),(0,r.Lk)("div",Ii,[t[38]||(t[38]=(0,r.Lk)("label",null,"Tags",-1)),(0,r.Lk)("div",xi,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(o.tags,e=>((0,r.uX)(),(0,r.CE)("button",{key:e.id,type:"button",class:(0,i.C4)(["tag-btn",{selected:o.selectedTags.includes(e.name)}]),onClick:t=>o.toggleTag(e.name)},(0,i.v_)(e.name),11,Si))),128))])]),(0,r.Lk)("div",Ai,[t[39]||(t[39]=(0,r.Lk)("label",{for:"new-tag"},"Add a new tag",-1)),(0,r.Lk)("div",Xi,[(0,r.bo)((0,r.Lk)("input",{id:"new-tag","onUpdate:modelValue":t[16]||(t[16]=e=>o.newTag=e),onKeydown:t[17]||(t[17]=(0,s.jR)((0,s.D$)((...e)=>o.addNewTag&&o.addNewTag(...e),["prevent"]),["enter"])),placeholder:"e.g., crispy, peppery, huge"},null,544),[[s.Jo,o.newTag,void 0,{trim:!0}]]),(0,r.Lk)("button",{type:"button",onClick:t[18]||(t[18]=(...e)=>o.addNewTag&&o.addNewTag(...e)),disabled:!o.newTag.trim()},"Add Tag",8,_i)])]),(0,r.Lk)("div",Fi,[t[40]||(t[40]=(0,r.Lk)("label",{for:"comment"},"Comment",-1)),(0,r.bo)((0,r.Lk)("textarea",{id:"comment","onUpdate:modelValue":t[19]||(t[19]=e=>o.comment=e),rows:"4",placeholder:"How was the tenderloin?"},null,512),[[s.Jo,o.comment]]),o.comment.length>0?((0,r.uX)(),(0,r.CE)("span",Pi,(0,i.v_)(o.comment.length)+" characters",1)):(0,r.Q3)("",!0)]),o.showPreview&&o.selectedRestaurant&&o.rating?((0,r.uX)(),(0,r.CE)("div",Ui,[t[41]||(t[41]=(0,r.Lk)("h3",null,"Preview",-1)),(0,r.Lk)("div",zi,[(0,r.Lk)("div",Vi,(0,i.v_)(o.getRestaurantName(o.selectedRestaurant)),1),(0,r.bF)(d,{rating:o.rating},null,8,["rating"]),o.comment?((0,r.uX)(),(0,r.CE)("p",Ti,(0,i.v_)(o.comment),1)):(0,r.Q3)("",!0),o.selectedTags.length>0?((0,r.uX)(),(0,r.CE)("div",Ki,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(o.selectedTags,e=>((0,r.uX)(),(0,r.CE)("span",{key:e,class:"tag"},(0,i.v_)(e),1))),128))])):(0,r.Q3)("",!0),o.photoDataUrl?((0,r.uX)(),(0,r.CE)("div",Hi,[(0,r.Lk)("img",{src:o.photoDataUrl,alt:"Review photo preview"},null,8,Ni)])):(0,r.Q3)("",!0)])])):(0,r.Q3)("",!0),(0,r.Lk)("div",Bi,[o.selectedRestaurant&&o.rating?((0,r.uX)(),(0,r.CE)("button",{key:0,type:"button",onClick:t[20]||(t[20]=e=>o.showPreview=!o.showPreview),class:"btn-secondary"},(0,i.v_)(o.showPreview?"Hide Preview":"Preview Review"),1)):(0,r.Q3)("",!0),(0,r.Lk)("button",{type:"submit",disabled:o.submitting||!o.selectedRestaurant||!o.rating},(0,i.v_)(o.submitting?"Submitting...":"Submit Review"),9,Qi)]),o.errorMessage?((0,r.uX)(),(0,r.CE)("p",Gi,(0,i.v_)(o.errorMessage),1)):(0,r.Q3)("",!0)],32)])])}var Ji=a(914);const qi={name:"Review",props:{selectedRestaurantId:{type:String,default:null}},emits:["reviewed"],setup(e,{emit:t}){const a=["AL","AK","AZ","AR","CA","CO","CT","DE","FL","GA","HI","ID","IL","IN","IA","KS","KY","LA","ME","MD","MA","MI","MN","MS","MO","MT","NE","NV","NH","NJ","NM","NY","NC","ND","OH","OK","OR","PA","RI","SC","SD","TN","TX","UT","VT","VA","WA","WV","WI","WY"],s=(0,le.KR)([]),i=(0,le.KR)(e.selectedRestaurantId||null),o=(0,le.KR)(null),n=(0,le.KR)(0),l=(0,le.KR)(""),d=(0,le.KR)(!1),c=(0,le.KR)(""),u=(0,le.KR)([]),v=(0,le.KR)([]),g=(0,le.KR)(""),p=(0,le.KR)(!1),w=(0,le.KR)({name:"",address:"",city:"",state:"",zip:"",url:""}),h=(0,le.KR)(!1),m=(0,le.KR)(""),k=(0,le.KR)(!1),b=(0,le.KR)(null),y=(0,le.KR)(null),f=(0,le.KR)(null),L=(0,le.KR)(null),C=(0,le.KR)(null),R=(0,le.KR)(!1),E="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27z",M="M22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.64-7.03L22 9.24zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z",I=async()=>{const e=(0,ue.P)((0,ue.rJ)(me,"tags"),(0,ue.My)("name")),t=await(0,ue.GG)(e);u.value=t.docs.map(e=>({id:e.id,...e.data()}))},x=()=>new Promise(t=>{navigator.geolocation&&!e.selectedRestaurantId?navigator.geolocation.getCurrentPosition(e=>{C.value={lat:e.coords.latitude,lng:e.coords.longitude},t()},()=>t(),{timeout:5e3}):t()}),S=()=>{if(!C.value||0===s.value.length)return;let e=null,t=1/0;s.value.forEach(a=>{if(a.location){const s=fa(C.value.lat,C.value.lng,a.location.lat,a.location.lng);null!==s&&s<t&&(t=s,e=a)}}),e&&(i.value=e.id)},A=async()=>{if(e.selectedRestaurantId){const t=(0,ue.H9)(me,"restaurants",e.selectedRestaurantId),a=await(0,ue.x7)(t);a.exists()&&(s.value=[{id:a.id,...a.data()}])}else{const e=(0,ue.P)((0,ue.rJ)(me,"restaurants"),(0,ue.My)("name")),t=await(0,ue.GG)(e);s.value=t.docs.map(e=>({id:e.id,...e.data()})),await x(),S()}};(0,r.sV)(async()=>{await Promise.all([I(),A()])});const X=e=>{const t=n.value||o.value;return t>=e?E:M},_=e=>{const t=s.value.find(t=>t.id===e);return t?.name||"Selected Restaurant"},F=e=>{const t=v.value.indexOf(e);t>-1?v.value.splice(t,1):v.value.push(e)},P=async()=>{const e=g.value.toLowerCase();if(e&&!u.value.some(t=>t.name===e))try{const t=await(0,ue.gS)((0,ue.rJ)(me,"tags"),{name:e,createdAt:(0,ue.O5)()}),a={id:t.id,name:e};u.value.push(a),u.value.sort((e,t)=>e.name.localeCompare(t.name)),v.value.push(e),g.value=""}catch(t){c.value="Failed to add new tag.",console.error("Error adding new tag: ",t)}else g.value=""},U=async()=>{const e=w.value.name.trim(),t=w.value.address.trim();if(e&&t){h.value=!0,m.value="";try{const a=(0,ue.P)((0,ue.rJ)(me,"restaurants"),(0,ue._M)("name","==",e),(0,ue._M)("address","==",t)),r=await(0,ue.GG)(a);if(!r.empty)return m.value="This restaurant already exists in the database.",void(h.value=!1);const o=[w.value.address,w.value.city,w.value.state,w.value.zip].filter(Boolean).join(", "),n=await(0,Ji.geocodeAddress)(o);if(!n)return m.value="Could not find a location for the provided address. Please check the address and try again.",void(h.value=!1);const l={...w.value,name:e,address:t,location:n,createdAt:(0,ue.O5)()},d=await(0,ue.gS)((0,ue.rJ)(me,"restaurants"),l),c={id:d.id,...l};s.value.push(c),s.value.sort((e,t)=>e.name.localeCompare(t.name)),i.value=d.id,p.value=!1,w.value={name:"",address:"",city:"",state:"",zip:"",url:""}}catch(a){console.error("Error saving new restaurant:",a),m.value="Failed to save restaurant. Please try again."}finally{h.value=!1}}else m.value="Restaurant name and address are required."},z=async()=>{k.value=!0,await(0,r.dY)();try{f.value=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}}),y.value&&(y.value.srcObject=f.value)}catch(e){console.error("Error accessing camera: ",e),c.value="Could not access the camera. Please check permissions.",k.value=!1}},V=()=>{f.value&&f.value.getTracks().forEach(e=>e.stop()),k.value=!1},T=()=>{const e=document.createElement("canvas"),t=y.value,a=1280,s=1280;let r=t.videoWidth,i=t.videoHeight;r>i?r>a&&(i*=a/r,r=a):i>s&&(r*=s/i,i=s),e.width=r,e.height=i;const o=e.getContext("2d");o.drawImage(t,0,0,r,i),b.value=e.toDataURL("image/jpeg",.8),V()},K=()=>{b.value=null},H=()=>{L.value.click()},N=e=>{const t=e.target.files[0];if(t){const e=new FileReader;e.onload=e=>{b.value=e.target.result},e.readAsDataURL(t)}},B=async()=>{const e=we.currentUser;if(e&&i.value&&o.value){d.value=!0,c.value="";try{let r=null;if(b.value){const t=(0,ve.c7)(),a=`reviews/${e.uid}/${Date.now()}.jpg`,s=(0,ve.KR)(t,a),i=await(0,ve.ls)(s,b.value,"data_url");r=await(0,ve.qk)(i.ref)}const n=(0,ue.O5)();await(0,ue.gS)((0,ue.rJ)(me,"reviews"),{userId:e.uid,userName:e.displayName||"Anonymous",userPhoto:e.photoURL||null,restaurantId:i.value,photoURL:r,rating:o.value,text:l.value,tags:v.value,createdAt:n,lastActivityAt:n});try{const t=(0,ue.H9)(me,"users",e.uid);await(0,ue.mZ)(t,{reviewCount:(0,ue.GV)(1)})}catch(a){console.warn("Failed to update reviewCount (non-critical):",a)}try{const t=(0,ue.P)((0,ue.rJ)(me,"bucketListItems"),(0,ue._M)("userId","==",e.uid),(0,ue._M)("restaurantId","==",i.value)),a=await(0,ue.GG)(t);if(!a.empty){const e=a.docs[0];await(0,ue.mZ)(e.ref,{completedAt:n})}}catch(s){console.warn("Failed to update bucket list (non-critical):",s)}Ke("Review submitted successfully!","success",2e3),await new Promise(e=>setTimeout(e,500)),t("reviewed")}catch(r){console.error("Error submitting check-in: ",r),c.value="Failed to submit check-in. Please try again.",Ke("Failed to submit check-in. Please try again.","error")}finally{d.value=!1}}else c.value="Please select a restaurant and provide a rating."};return{usStates:a,restaurants:s,selectedRestaurant:i,rating:o,hoverRating:n,comment:l,submitting:d,errorMessage:c,getStarPath:X,submitReview:B,tags:u,selectedTags:v,newTag:g,toggleTag:F,addNewTag:P,showAddRestaurantForm:p,newRestaurant:w,isSavingRestaurant:h,addRestaurantError:m,saveNewRestaurant:U,isCameraOpen:k,photoDataUrl:b,videoPlayer:y,openCamera:z,closeCamera:V,capturePhoto:T,removePhoto:K,fileInput:L,triggerFileUpload:H,handleFileUpload:N,showPreview:R,getRestaurantName:_}}},Wi=(0,Be.A)(qi,[["render",Di],["__scopeId","data-v-bb753924"]]),$i=Wi,Oi={class:"recommendations-page"},ji={key:0,class:"loading-indicator"},Yi={key:1},Zi={key:0,class:"no-restaurants-message"},eo={key:1,class:"restaurant-list"},to={class:"restaurant-details"},ao={class:"restaurant-name"},so={class:"restaurant-meta"},ro=["title"],io={class:"rating-text"},oo={class:"rating-count"},no={key:1,class:"distance"},lo={class:"restaurant-address"},co={class:"restaurant-actions"},uo=["onClick","title"],vo=["href"],go=["href"],po=["onClick"];function wo(e,t,a,s,o,n){const l=(0,r.g2)("StarRating");return(0,r.uX)(),(0,r.CE)("div",Oi,[t[3]||(t[3]=(0,r.Lk)("div",{class:"page-header"},[(0,r.Lk)("h2",null,"Top 10 Recommendations"),(0,r.Lk)("p",null,"Based on reviews in the last 6 months within 100 miles of your location.")],-1)),s.loading?((0,r.uX)(),(0,r.CE)("div",ji,"Loading recommendations...")):((0,r.uX)(),(0,r.CE)("div",Yi,[0===s.restaurants.length?((0,r.uX)(),(0,r.CE)("p",Zi," No recommendations found. ")):((0,r.uX)(),(0,r.CE)("ul",eo,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(s.restaurants,a=>((0,r.uX)(),(0,r.CE)("li",{key:a.id,class:"restaurant-item"},[(0,r.Lk)("div",to,[(0,r.Lk)("span",ao,(0,i.v_)(a.name),1),(0,r.Lk)("div",so,[a.averageRating>0?((0,r.uX)(),(0,r.CE)("div",{key:0,class:"rating",title:`${a.averageRating.toFixed(2)} average rating`},[(0,r.bF)(l,{rating:a.averageRating},null,8,["rating"]),(0,r.Lk)("span",io,(0,i.v_)(a.averageRating.toFixed(1)),1),(0,r.Lk)("span",oo,"("+(0,i.v_)(a.reviewCount)+" recent reviews)",1)],8,ro)):(0,r.Q3)("",!0),null!==a.distance?((0,r.uX)(),(0,r.CE)("span",no,(0,i.v_)(a.distance.toFixed(1))+" miles away",1)):(0,r.Q3)("",!0)]),(0,r.Lk)("span",lo,(0,i.v_)(a.address)+", "+(0,i.v_)(a.city)+", "+(0,i.v_)(a.state)+" "+(0,i.v_)(a.zip),1)]),(0,r.Lk)("div",co,[(0,r.Lk)("button",{onClick:e=>s.toggleBucketList(a),class:(0,i.C4)(["action-btn",{"in-bucket-list":s.isInBucketList(a.id)}]),title:s.isInBucketList(a.id)?"Remove from Bucket List":"Add to Bucket List"},t[0]||(t[0]=[(0,r.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor"},[(0,r.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,r.Lk)("path",{d:"M18 7h-2.06c-.33-3.2-2.46-5.8-5.94-5.8S4.39 3.8 4.06 7H2v12h16V7zM6.14 7c.2-1.92 1.6-3.48 3.86-3.8A4.002 4.002 0 0 1 14 7h-2.14c-.2-1.92-1.6-3.48-3.86-3.8zM16 17H4v-8h12v8z"})],-1)]),10,uo),(0,r.Lk)("a",{href:s.getDirectionsUrl(a),target:"_blank",rel:"noopener noreferrer",class:"action-btn",title:"Get Directions"},t[1]||(t[1]=[(0,r.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor"},[(0,r.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,r.Lk)("path",{d:"M22.43 10.59l-9.01-9.01c-.75-.75-2.07-.76-2.83 0l-9.01 9.01c-.76.75-.76 2.07 0 2.83l9.01 9.01c.75.75 2.07.75 2.83 0l9.01-9.01c.75-.76.75-2.08 0-2.83zM12 16c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4z"})],-1)]),8,vo),(0,r.Lk)("a",{href:s.getDetailsUrl(a),target:"_blank",rel:"noopener noreferrer",class:"action-btn",title:"View Details on Google"},t[2]||(t[2]=[(0,r.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor"},[(0,r.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,r.Lk)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 5 1.41-1.41L15.5 14zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"})],-1)]),8,go),(0,r.Lk)("button",{class:"check-in-btn",onClick:t=>e.$emit("review-at",a.id)},"Review",8,po)])]))),128))]))]))])}const ho={name:"Recommendations",components:{StarRating:je},emits:["review-at"],setup(){const e=(0,le.KR)([]),t=(0,le.KR)(!0),a=(0,le.KR)(null),s=(0,le.KR)(new Set);let i=()=>{};const o=async()=>{if(!a.value)return console.error("User location not available."),t.value=!1,void(e.value=[]);try{const t=await(0,ue.GG)((0,ue.rJ)(me,"restaurants")),s=t.docs.map(e=>({id:e.id,...e.data()})),r=s.filter(e=>{if(!e.location||"number"!==typeof e.location.lat||"number"!==typeof e.location.lng)return!1;const t=fa(a.value.lat,a.value.lng,e.location.lat,e.location.lng);return e.distance=t,null!==t&&t<=100}),i=new Date;i.setMonth(i.getMonth()-6);const o=ue.Dc.fromDate(i),n=(0,ue.P)((0,ue.rJ)(me,"reviews"),(0,ue._M)("createdAt",">=",o)),l=await(0,ue.GG)(n),d=l.docs.map(e=>e.data()),c=r.map(e=>{const t=d.filter(t=>t.restaurantId===e.id&&"number"===typeof t.rating);let a=0,s=0;if(t.length>0){const e=t.reduce((e,t)=>e+t.rating,0);a=e/t.length,s=t.length}return{...e,averageRating:a,reviewCount:s}}).filter(e=>e.reviewCount>0);c.sort((e,t)=>t.averageRating-e.averageRating),e.value=c.slice(0,10)}catch(s){console.error("Error fetching recommendations:",s)}finally{t.value=!1}};(0,r.sV)(()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(e=>{a.value={lat:e.coords.latitude,lng:e.coords.longitude},o(),d()},e=>{console.error("Geolocation failed. Using default location.",e),a.value={lat:41.5,lng:-90.5},o(),d()}):(console.error("Geolocation is not supported by this browser."),a.value={lat:41.5,lng:-90.5},o(),d())}),(0,r.hi)(()=>{i()});const n=e=>{const t=encodeURIComponent(`${e.name}, ${e.address}`);return`https://www.google.com/maps/dir/?api=1&destination=${t}`},l=e=>{const t=encodeURIComponent(`${e.name}, ${e.address}`);return`https://www.google.com/search?q=${t}`},d=()=>{const e=we.currentUser;if(!e)return;const t=(0,ue.P)((0,ue.rJ)(me,"bucketListItems"),(0,ue._M)("userId","==",e.uid));i=(0,ue.aQ)(t,e=>{const t=new Set;e.forEach(e=>t.add(e.data().restaurantId)),s.value=t})},c=e=>s.value.has(e),u=async e=>{const t=we.currentUser;if(t)if(c(e.id)){const a=(0,ue.P)((0,ue.rJ)(me,"bucketListItems"),(0,ue._M)("userId","==",t.uid),(0,ue._M)("restaurantId","==",e.id)),s=await(0,ue.GG)(a);s.forEach(e=>(0,ue.kd)(e.ref))}else await(0,ue.gS)((0,ue.rJ)(me,"bucketListItems"),{userId:t.uid,restaurantId:e.id,createdAt:(0,ue.O5)()})};return{restaurants:e,loading:t,getDirectionsUrl:n,getDetailsUrl:l,isInBucketList:c,toggleBucketList:u}}},mo=(0,Be.A)(ho,[["render",wo],["__scopeId","data-v-7a582d05"]]),ko=mo,bo={class:"stats-page"},yo={class:"stats-container"},fo={key:0},Lo={key:1,class:"stats-grid"},Co={class:"stat-card"},Ro={class:"stat-card"},Eo={class:"stat-card"},Mo={class:"stat-card"},Io={key:2},xo={key:3,class:"log-container"};function So(e,t,a,s,o,n){return(0,r.uX)(),(0,r.CE)("div",bo,[t[5]||(t[5]=(0,r.Lk)("h2",null,"Database Stats",-1)),(0,r.Lk)("div",yo,[s.statsLoading?((0,r.uX)(),(0,r.CE)("div",fo,"Loading stats...")):s.stats?((0,r.uX)(),(0,r.CE)("ul",Lo,[(0,r.Lk)("li",Co,[t[0]||(t[0]=(0,r.Lk)("strong",null,"Restaurants",-1)),(0,r.Lk)("span",null,(0,i.v_)(s.stats.restaurants),1)]),(0,r.Lk)("li",Ro,[t[1]||(t[1]=(0,r.Lk)("strong",null,"Users",-1)),(0,r.Lk)("span",null,(0,i.v_)(s.stats.users),1)]),(0,r.Lk)("li",Eo,[t[2]||(t[2]=(0,r.Lk)("strong",null,"Reviews",-1)),(0,r.Lk)("span",null,(0,i.v_)(s.stats.reviews),1)]),(0,r.Lk)("li",Mo,[t[3]||(t[3]=(0,r.Lk)("strong",null,"Follows",-1)),(0,r.Lk)("span",null,(0,i.v_)(s.stats.follows),1)])])):((0,r.uX)(),(0,r.CE)("div",Io,"Could not load stats.")),s.log.length>0?((0,r.uX)(),(0,r.CE)("div",xo,[t[4]||(t[4]=(0,r.Lk)("h3",null,"Log:",-1)),(0,r.Lk)("pre",null,(0,i.v_)(s.log.join("\n")),1)])):(0,r.Q3)("",!0)])])}const Ao={name:"DatabaseStats",setup(){const e=(0,le.KR)(null),t=(0,le.KR)(!0),a=(0,le.KR)([]),s=async()=>{t.value=!0;try{const t=["restaurants","users","reviews","follows"],a={},s=t.map(async e=>{const t=(0,ue.rJ)(me,e),s=await(0,ue.d_)(t);a[e]=s.data().count});await Promise.all(s),e.value=a}catch(s){a.value.push("Error fetching collection stats: "+s.message),console.error("Error fetching stats:",s)}finally{t.value=!1}};return(0,r.sV)(s),{stats:e,statsLoading:t,log:a}}},Xo=(0,Be.A)(Ao,[["render",So],["__scopeId","data-v-7fa04ecf"]]),_o=Xo,Fo={class:"my-reviews-page"},Po={key:0,class:"loading-indicator"},Uo={key:1,class:"no-reviews-message"},zo={key:2,class:"feed"},Vo={class:"post-header"},To=["src"],Ko={class:"post-info"},Ho={class:"user-line"},No={class:"user-name"},Bo={key:0,class:"medal"},Qo={class:"post-date"},Go={class:"post-content"},Do={class:"post-title-line"},Jo={class:"restaurant-title-group"},qo={class:"restaurant-name"},Wo={key:0,class:"review-actions"},$o=["onClick"],Oo=["onClick"],jo={key:0,class:"distance"},Yo={key:0,class:"restaurant-location"},Zo={key:1,class:"edit-review-form"},en={class:"form-group"},tn={class:"form-group"},an={key:2,class:"review-body"},sn={key:0,class:"review-text"},rn=["src"],on={key:2,class:"tags-container"},nn={class:"post-actions"},ln=["onClick","disabled"],dn=["onClick"],cn={__name:"MyReviews",props:{user:{type:Object,default:null}},emits:["go-to-review"],setup(e){const t=e,a=(0,le.KR)(!0),o=(0,le.KR)([]),n=(0,le.KR)(new Map),l=(0,le.KR)(null),d=(0,le.KR)(""),c=(0,le.KR)(0),u=(0,le.KR)(null),v=(0,le.KR)(null),g=(0,le.KR)(new Map),p=e=>"number"!==typeof e?null:0===e?"ðŸ¥‡":1===e?"ðŸ¥ˆ":2===e?"ðŸ¥‰":e>=3&&e<10?"ðŸ…":null;let w=()=>{},h=()=>{};const m=e=>{if(!e)return o.value=[],a.value=!1,void(w&&w());a.value=!0;const t=(0,ue.P)((0,ue.rJ)(me,"reviews"),(0,ue._M)("userId","==",e.uid),(0,ue.My)("createdAt","desc"));w=(0,ue.aQ)(t,e=>{o.value=e.docs.map(e=>({id:e.id,...e.data(),likeCount:0,isLiked:!1})),a.value=!1,o.value.forEach(e=>{k(e.id)})},e=>{console.error("Error fetching reviews:",e),a.value=!1})},k=e=>{const a=t.user,s=(0,ue.H9)(me,"reviews",e),r=(0,ue.rJ)(s,"likes"),i=(0,ue.P)(r);(0,ue.aQ)(i,t=>{const s=o.value.find(t=>t.id===e);s&&(s.likeCount=t.size,s.isLiked=!!a&&t.docs.some(e=>e.data().userId===a.uid))},e=>{console.error("Error fetching likes:",e)})},b=async e=>{const a=t.user;if(!a)return;const s=(0,ue.H9)(me,"reviews",e),r=(0,ue.rJ)(s,"likes"),i=(0,ue.P)(r,(0,ue._M)("userId","==",a.uid)),o=await(0,ue.GG)(i);o.empty?await(0,ue.gS)(r,{userId:a.uid,createdAt:(0,ue.O5)()}):await(0,ue.kd)(o.docs[0].ref)},y=async e=>{const t=window.location.origin,a=`${t}/?review=${e}`;if(navigator.share)try{return void await navigator.share({title:"Check out this review on PorkHub",text:"Check out this review on PorkHub",url:a})}catch(s){"AbortError"!==s.name&&console.error("Error sharing:",s)}try{await navigator.clipboard.writeText(a),Ke("Link copied to clipboard!","success")}catch(s){console.error("Failed to copy link:",s);const e=prompt("Copy this link:",a);e&&Ke("Link copied!","success")}};(0,r.sV)(()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(e=>{v.value={lat:e.coords.latitude,lng:e.coords.longitude}},e=>{console.error("Error getting location",e)}),(0,ue.GG)((0,ue.P)((0,ue.rJ)(me,"users"),(0,ue.My)("reviewCount","desc"),(0,ue.AB)(30))).then(e=>{const t=e.docs.map(e=>({id:e.id,...e.data()})).filter(e=>{const t=Number(e.reviewCount)||0;return t>0}).sort((e,t)=>{const a=Number(e.reviewCount)||0,s=Number(t.reviewCount)||0;return s-a}).slice(0,10),a=new Map;t.forEach((e,t)=>{a.set(e.id,t)}),g.value=a}),h=(0,ue.aQ)((0,ue.rJ)(me,"restaurants"),e=>{const t=new Map;e.forEach(e=>{t.set(e.id,e.data())}),n.value=t}),(0,r.wB)(()=>t.user,e=>{m(e)},{immediate:!0})}),(0,r.hi)(()=>{w&&w(),h&&h()});const f=(0,r.EW)(()=>{const e=t.user;return o.value.map(t=>{const a=n.value.get(t.restaurantId),s=g.value.get(e?.uid);return{...t,restaurantName:a?.name||"Unknown Restaurant",restaurantCity:a?.city,restaurantState:a?.state,userName:e?.displayName||"You",userPhoto:e?.photoURL||null,distance:v.value&&a?.location?fa(v.value.lat,v.value.lng,a.location.lat,a.location.lng):null,medal:p(s)}})}),L=e=>e&&e.toDate?e.toDate().toLocaleString():"",C=e=>{l.value=e.id,d.value=e.text||"",c.value=e.rating||0,u.value={text:e.text||"",rating:e.rating||0}},R=()=>{(!u.value||d.value===u.value.text&&c.value===u.value.rating||confirm("You have unsaved changes. Are you sure you want to cancel?"))&&(l.value=null,d.value="",c.value=0,u.value=null)},E=async()=>{if(l.value)try{const e=(0,ue.H9)(me,"reviews",l.value);await(0,ue.mZ)(e,{rating:c.value,text:d.value,lastActivityAt:(0,ue.O5)()}),R(),Ke("Review updated successfully!","success")}catch(e){console.error("Error updating review:",e),Ke("Failed to save review. Please try again.","error")}},M=async e=>{if(confirm("Are you sure you want to delete this review?"))try{await(0,ue.kd)((0,ue.H9)(me,"reviews",e)),Ke("Review deleted successfully","success")}catch(t){console.error("Error deleting review:",t),Ke("Failed to delete review. Please try again.","error")}};return(t,o)=>((0,r.uX)(),(0,r.CE)("div",Fo,[a.value?((0,r.uX)(),(0,r.CE)("div",Po,"Loading your reviews...")):0===f.value.length?((0,r.uX)(),(0,r.CE)("div",Uo,[o[3]||(o[3]=(0,r.Lk)("h3",null,"You haven't posted any reviews yet.",-1)),(0,r.Lk)("button",{onClick:o[0]||(o[0]=e=>t.$emit("go-to-review")),class:"btn-primary"},"Post your first review!")])):((0,r.uX)(),(0,r.CE)("div",zo,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(f.value,t=>((0,r.uX)(),(0,r.CE)("div",{key:t.id,class:"post-card"},[(0,r.Lk)("div",Vo,[(0,r.Lk)("img",{src:t.userPhoto||"https://cdn-icons-png.flaticon.com/512/149/149071.png",alt:"User",class:"user-avatar",referrerpolicy:"no-referrer"},null,8,To),(0,r.Lk)("div",Ko,[(0,r.Lk)("div",Ho,[(0,r.Lk)("span",No,(0,i.v_)(t.userName),1),t.medal?((0,r.uX)(),(0,r.CE)("span",Bo,(0,i.v_)(t.medal),1)):(0,r.Q3)("",!0)]),(0,r.Lk)("span",Qo,(0,i.v_)(L(t.createdAt)),1)])]),(0,r.Lk)("div",Go,[(0,r.Lk)("div",Do,[(0,r.Lk)("div",Jo,[(0,r.Lk)("h2",qo,(0,i.v_)(t.restaurantName),1),l.value!==t.id?((0,r.uX)(),(0,r.CE)("div",Wo,[(0,r.Lk)("button",{onClick:e=>C(t),class:"action-btn",title:"Edit Review"},o[4]||(o[4]=[(0,r.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20px",viewBox:"0 0 24 24",width:"20px",fill:"currentColor"},[(0,r.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,r.Lk)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"})],-1)]),8,$o),(0,r.Lk)("button",{onClick:e=>M(t.id),class:"action-btn delete",title:"Delete Review"},o[5]||(o[5]=[(0,r.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20px",viewBox:"0 0 24 24",width:"20px",fill:"currentColor"},[(0,r.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,r.Lk)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"})],-1)]),8,Oo)])):(0,r.Q3)("",!0)]),null!==t.distance?((0,r.uX)(),(0,r.CE)("div",jo,(0,i.v_)(t.distance.toFixed(1))+" miles away ",1)):(0,r.Q3)("",!0)]),t.restaurantCity||t.restaurantState?((0,r.uX)(),(0,r.CE)("div",Yo,[(0,r.eW)((0,i.v_)(t.restaurantCity),1),t.restaurantCity&&t.restaurantState?((0,r.uX)(),(0,r.CE)(r.FK,{key:0},[(0,r.eW)(", ")],64)):(0,r.Q3)("",!0),(0,r.eW)((0,i.v_)(t.restaurantState),1)])):(0,r.Q3)("",!0),l.value===t.id?((0,r.uX)(),(0,r.CE)("div",Zo,[(0,r.Lk)("div",en,[o[6]||(o[6]=(0,r.Lk)("label",null,"Rating",-1)),(0,r.bF)(je,{rating:c.value,editable:!0,"onUpdate:rating":o[1]||(o[1]=e=>c.value=e)},null,8,["rating"])]),(0,r.Lk)("div",tn,[o[7]||(o[7]=(0,r.Lk)("label",null,"Comment",-1)),(0,r.bo)((0,r.Lk)("textarea",{"onUpdate:modelValue":o[2]||(o[2]=e=>d.value=e),class:"edit-textarea",rows:"4"},null,512),[[s.Jo,d.value]])]),(0,r.Lk)("div",{class:"edit-actions"},[(0,r.Lk)("button",{onClick:E,class:"btn-primary"},"Save"),(0,r.Lk)("button",{onClick:R,class:"btn-secondary"},"Cancel")])])):((0,r.uX)(),(0,r.CE)("div",an,[(0,r.bF)(je,{rating:t.rating},null,8,["rating"]),t.text?((0,r.uX)(),(0,r.CE)("p",sn,'"'+(0,i.v_)(t.text)+'"',1)):(0,r.Q3)("",!0),t.photoURL?((0,r.uX)(),(0,r.CE)("img",{key:1,src:t.photoURL,alt:"Review photo",class:"review-photo",loading:"lazy"},null,8,rn)):(0,r.Q3)("",!0),t.tags&&t.tags.length>0?((0,r.uX)(),(0,r.CE)("div",on,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(t.tags,e=>((0,r.uX)(),(0,r.CE)("span",{key:e,class:"tag"},(0,i.v_)(e),1))),128))])):(0,r.Q3)("",!0)])),(0,r.Lk)("div",nn,[(0,r.Lk)("button",{onClick:e=>b(t.id),class:(0,i.C4)(["like-btn",{liked:t.isLiked}]),disabled:!e.user},[o[8]||(o[8]=(0,r.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20px",viewBox:"0 0 24 24",width:"20px",fill:"currentColor"},[(0,r.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,r.Lk)("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})],-1)),(0,r.Lk)("span",null,(0,i.v_)(t.likeCount||0),1)],10,ln),(0,r.Lk)("button",{onClick:e=>y(t.id),class:"share-btn",title:"Share this review"},o[9]||(o[9]=[(0,r.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20px",viewBox:"0 0 24 24",width:"20px",fill:"currentColor"},[(0,r.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,r.Lk)("path",{d:"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z"})],-1),(0,r.Lk)("span",null,"Share",-1)]),8,dn)]),(0,r.bF)(Ge,{"post-id":t.id,user:e.user,"post-type":"reviews","post-author-id":t.userId},null,8,["post-id","user","post-author-id"])])]))),128))]))]))}},un=(0,Be.A)(cn,[["__scopeId","data-v-0bcf4dba"]]),vn=un,gn={class:"leaderboard-page"},pn={class:"leaderboard-tabs"},wn={key:0,class:"tab-content"},hn={key:0,class:"loading-indicator"},mn={key:1,class:"no-users-message"},kn={key:2,class:"leaderboard-list"},bn={class:"rank-container"},yn={class:"rank"},fn={key:0,class:"medal"},Ln=["src"],Cn={class:"user-info"},Rn={class:"user-name"},En={class:"review-count"},Mn={key:1,class:"tab-content"},In={key:0,class:"loading-indicator"},xn={key:1,class:"no-users-message"},Sn={key:2,class:"leaderboard-list"},An={class:"rank-container"},Xn={class:"rank"},_n={key:0,class:"medal"},Fn=["src"],Pn={class:"user-info"},Un={class:"user-name"},zn={class:"review-count"},Vn={key:2,class:"tab-content"},Tn={class:"state-filter"},Kn=["value"],Hn={key:0,class:"loading-indicator"},Nn={key:1,class:"no-users-message"},Bn={key:0},Qn={key:1},Gn={key:2,class:"leaderboard-list"},Dn={class:"rank-container"},Jn={class:"rank"},qn={key:0,class:"medal"},Wn=["src"],$n={class:"user-info"},On={class:"user-name"},jn={class:"review-count"};function Yn(e,t,a,o,n,l){return(0,r.uX)(),(0,r.CE)("div",gn,[t[8]||(t[8]=(0,r.Lk)("div",{class:"page-header"},[(0,r.Lk)("h2",null,"Leaderboard"),(0,r.Lk)("p",null,"Rankings and stats")],-1)),(0,r.Lk)("div",pn,[(0,r.Lk)("button",{onClick:t[0]||(t[0]=e=>o.activeTab="reviews"),class:(0,i.C4)({active:"reviews"===o.activeTab})}," ðŸ“ Top Reviewers ",2),(0,r.Lk)("button",{onClick:t[1]||(t[1]=e=>o.activeTab="commenters"),class:(0,i.C4)({active:"commenters"===o.activeTab})}," ðŸ’¬ Top Commenters ",2),(0,r.Lk)("button",{onClick:t[2]||(t[2]=e=>o.activeTab="regional"),class:(0,i.C4)({active:"regional"===o.activeTab})}," ðŸ—ºï¸ By State ",2)]),"reviews"===o.activeTab?((0,r.uX)(),(0,r.CE)("div",wn,[o.loading?((0,r.uX)(),(0,r.CE)("div",hn,"Loading leaderboard...")):0===o.users.length?((0,r.uX)(),(0,r.CE)("div",mn,t[4]||(t[4]=[(0,r.Lk)("p",null,"No users to display on the leaderboard yet.",-1)]))):((0,r.uX)(),(0,r.CE)("ol",kn,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(o.users,(e,t)=>((0,r.uX)(),(0,r.CE)("li",{key:e.uid,class:(0,i.C4)(["leaderboard-item",o.getRankClass(t)])},[(0,r.Lk)("div",bn,[(0,r.Lk)("span",yn,(0,i.v_)(t+1),1),o.getMedal(t)?((0,r.uX)(),(0,r.CE)("span",fn,(0,i.v_)(o.getMedal(t)),1)):(0,r.Q3)("",!0)]),(0,r.Lk)("img",{src:e.photoURL||"https://cdn-icons-png.flaticon.com/512/149/149071.png",alt:"User",class:"user-avatar",referrerpolicy:"no-referrer"},null,8,Ln),(0,r.Lk)("div",Cn,[(0,r.Lk)("span",Rn,(0,i.v_)(e.displayName),1),(0,r.Lk)("span",En,(0,i.v_)(e.reviewCount||0)+" reviews",1)])],2))),128))]))])):"commenters"===o.activeTab?((0,r.uX)(),(0,r.CE)("div",Mn,[o.loadingCommenters?((0,r.uX)(),(0,r.CE)("div",In,"Loading commenters...")):0===o.commenters.length?((0,r.uX)(),(0,r.CE)("div",xn,t[5]||(t[5]=[(0,r.Lk)("p",null,"No users have left comments yet.",-1)]))):((0,r.uX)(),(0,r.CE)("ol",Sn,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(o.commenters,(e,t)=>((0,r.uX)(),(0,r.CE)("li",{key:e.uid,class:"leaderboard-item"},[(0,r.Lk)("div",An,[(0,r.Lk)("span",Xn,(0,i.v_)(t+1),1),t<3?((0,r.uX)(),(0,r.CE)("span",_n,(0,i.v_)(["ðŸ¥‡","ðŸ¥ˆ","ðŸ¥‰"][t]),1)):(0,r.Q3)("",!0)]),(0,r.Lk)("img",{src:e.photoURL||"https://cdn-icons-png.flaticon.com/512/149/149071.png",alt:"User",class:"user-avatar",referrerpolicy:"no-referrer"},null,8,Fn),(0,r.Lk)("div",Pn,[(0,r.Lk)("span",Un,(0,i.v_)(e.displayName),1),(0,r.Lk)("span",zn,(0,i.v_)(e.commentCount||0)+" comments",1)])]))),128))]))])):"regional"===o.activeTab?((0,r.uX)(),(0,r.CE)("div",Vn,[(0,r.Lk)("div",Tn,[t[7]||(t[7]=(0,r.Lk)("label",{for:"state-select"},"Filter by state:",-1)),(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>o.selectedState=e),id:"state-select"},[t[6]||(t[6]=(0,r.Lk)("option",{value:""},"All States",-1)),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(o.statesList,e=>((0,r.uX)(),(0,r.CE)("option",{key:e,value:e},(0,i.v_)(e),9,Kn))),128))],512),[[s.u1,o.selectedState]])]),o.loadingRegional?((0,r.uX)(),(0,r.CE)("div",Hn,"Loading regional leaderboard...")):0===o.regionalLeaderboard.length?((0,r.uX)(),(0,r.CE)("div",Nn,[o.selectedState?((0,r.uX)(),(0,r.CE)("p",Bn," No reviews in "+(0,i.v_)(o.selectedState)+" yet. ",1)):((0,r.uX)(),(0,r.CE)("p",Qn,"No regional data available."))])):((0,r.uX)(),(0,r.CE)("ol",Gn,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(o.regionalLeaderboard,(e,t)=>((0,r.uX)(),(0,r.CE)("li",{key:e.uid+o.selectedState,class:"leaderboard-item"},[(0,r.Lk)("div",Dn,[(0,r.Lk)("span",Jn,(0,i.v_)(t+1),1),t<3?((0,r.uX)(),(0,r.CE)("span",qn,(0,i.v_)(["ðŸ¥‡","ðŸ¥ˆ","ðŸ¥‰"][t]),1)):(0,r.Q3)("",!0)]),(0,r.Lk)("img",{src:e.photoURL||"https://cdn-icons-png.flaticon.com/512/149/149071.png",alt:"User",class:"user-avatar",referrerpolicy:"no-referrer"},null,8,Wn),(0,r.Lk)("div",$n,[(0,r.Lk)("span",On,(0,i.v_)(e.displayName),1),(0,r.Lk)("span",jn,(0,i.v_)(e.reviewCount)+" reviews",1)])]))),128))]))])):(0,r.Q3)("",!0)])}const Zn=["AL","AK","AZ","AR","CA","CO","CT","DE","FL","GA","HI","ID","IL","IN","IA","KS","KY","LA","ME","MD","MA","MI","MN","MS","MO","MT","NE","NV","NH","NJ","NM","NY","NC","ND","OH","OK","OR","PA","RI","SC","SD","TN","TX","UT","VT","VA","WA","WV","WI","WY"],el={name:"Leaderboard",setup(){const e=(0,le.KR)(!0),t=(0,le.KR)(!0),a=(0,le.KR)(!0),s=(0,le.KR)([]),i=(0,le.KR)([]),o=(0,le.KR)([]),n=(0,le.KR)("reviews"),l=(0,le.KR)(""),d=(0,le.KR)(Zn);let c=()=>{};(0,r.sV)(()=>{u(),v(),g()});const u=()=>{try{const t=(0,ue.P)((0,ue.rJ)(me,"users"),(0,ue.My)("reviewCount","desc"),(0,ue.AB)(30));c=(0,ue.aQ)(t,t=>{const a=t.docs.map(e=>e.data()),r=a.filter(e=>{const t=Number(e.reviewCount)||0;return t>0}),i=r.sort((e,t)=>{const a=Number(e.reviewCount)||0,s=Number(t.reviewCount)||0;return s-a});s.value=i.slice(0,10),e.value=!1},t=>{console.error("Error fetching leaderboard:",t),e.value=!1})}catch(t){console.error("Error setting up leaderboard listener:",t),e.value=!1}},v=async()=>{try{const a=await(0,ue.GG)((0,ue.rJ)(me,"reviews")),s={};for(const t of a.docs)try{const e=await(0,ue.GG)((0,ue.rJ)(me,"reviews",t.id,"comments"));e.docs.forEach(e=>{const t=e.data();t.userId&&(s[t.userId]=(s[t.userId]||0)+1)})}catch(e){console.debug(`No comments for review ${t.id}`)}const r=await(0,ue.GG)((0,ue.rJ)(me,"users")),o={};r.docs.forEach(e=>{o[e.id]=e.data()});const n=Object.entries(s).map(([e,t])=>({...o[e],uid:e,commentCount:t})).filter(e=>e.displayName).sort((e,t)=>t.commentCount-e.commentCount).slice(0,10);i.value=n,t.value=!1}catch(e){console.error("Error loading commenters:",e),t.value=!1}},g=async()=>{try{const e=await(0,ue.GG)((0,ue.rJ)(me,"reviews")),t=await(0,ue.GG)((0,ue.rJ)(me,"restaurants")),s={};t.docs.forEach(e=>{const t=e.data();s[e.id]=t.state?.toUpperCase()}),console.log("Restaurant State Map:",s),console.log("Total restaurants:",Object.keys(s).length),console.log("Restaurants with states:",Object.values(s).filter(e=>e).length);const i={},n=await(0,ue.GG)((0,ue.rJ)(me,"users")),d={};n.docs.forEach(e=>{d[e.id]=e.data()});let c=0,u=0;e.docs.forEach(e=>{const t=e.data(),a=s[t.restaurantId];if(a&&t.userId){const e=`${t.userId}-${a}`;i[e]||(i[e]={userId:t.userId,state:a,count:0}),i[e].count++,c++}else a||(u++,console.debug(`Review ${e.id} missing state for restaurant ${t.restaurantId}`))}),console.log("Reviews processed - with states:",c,"without states:",u),console.log("Review By User State Map:",i);const v=()=>{let e=Object.values(i);l.value&&(e=e.filter(e=>e.state===l.value),console.log(`Filtered for ${l.value}:`,e));const t=e.map(e=>({...d[e.userId],uid:e.userId,reviewCount:e.count})).filter(e=>e.displayName).sort((e,t)=>t.reviewCount-e.reviewCount).slice(0,10);o.value=t};v(),a.value=!1,(0,r.wB)(()=>l.value,()=>{v()})}catch(e){console.error("Error loading regional data:",e),a.value=!1}};(0,r.hi)(()=>{c()});const p=e=>0===e?"ðŸ¥‡":1===e?"ðŸ¥ˆ":2===e?"ðŸ¥‰":e>=3&&e<10?"ðŸ…":null,w=e=>0===e?"rank-gold":1===e?"rank-silver":2===e?"rank-bronze":e>=3&&e<10?"rank-regular":"";return{loading:e,loadingCommenters:t,loadingRegional:a,users:s,commenters:i,regionalLeaderboard:o,activeTab:n,selectedState:l,statesList:d,getMedal:p,getRankClass:w}}},tl=(0,Be.A)(el,[["render",Yn],["__scopeId","data-v-95a2bba0"]]),al=tl,sl={class:"followers-page"},rl={key:0,class:"loading-indicator"},il={key:1},ol={key:0,class:"no-followers-message"},nl={class:"user-card-content"},ll={class:"user-info"},dl=["src"],cl={class:"user-name-line"},ul={class:"user-name"},vl={key:0,class:"medal"},gl={key:0,class:"last-review"},pl={class:"review-header"},wl={class:"review-body"},hl={key:0,class:"review-text"},ml={key:1,class:"last-review no-review"},kl={class:"user-actions"},bl=["onClick"];function yl(e,t,a,s,o,n){const l=(0,r.g2)("UserReviewsModal"),d=(0,r.g2)("StarRating");return(0,r.uX)(),(0,r.CE)(r.FK,null,[s.isReviewsModalVisible?((0,r.uX)(),(0,r.Wv)(l,{key:0,user:s.userForReviews,onClose:s.closeReviewsModal},null,8,["user","onClose"])):(0,r.Q3)("",!0),(0,r.Lk)("div",sl,[s.loading?((0,r.uX)(),(0,r.CE)("div",rl,"Loading followers...")):((0,r.uX)(),(0,r.CE)("div",il,[0===s.followers.length?((0,r.uX)(),(0,r.CE)("div",ol,t[0]||(t[0]=[(0,r.Lk)("h3",null,"No followers yet",-1),(0,r.Lk)("p",null,"Start sharing reviews to attract followers! The more you review, the more visible you'll be.",-1)]))):(0,r.Q3)("",!0),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(s.followers,e=>((0,r.uX)(),(0,r.CE)("div",{key:e.uid,class:"user-card"},[(0,r.Lk)("div",nl,[(0,r.Lk)("div",ll,[(0,r.Lk)("img",{src:e.photoURL||"https://cdn-icons-png.flaticon.com/512/149/149071.png",class:"user-avatar",alt:"User",referrerpolicy:"no-referrer"},null,8,dl),(0,r.Lk)("div",cl,[(0,r.Lk)("span",ul,(0,i.v_)(e.displayName),1),e.medal?((0,r.uX)(),(0,r.CE)("span",vl,(0,i.v_)(e.medal),1)):(0,r.Q3)("",!0)])]),e.lastReview?((0,r.uX)(),(0,r.CE)("div",gl,[(0,r.Lk)("div",pl,[t[1]||(t[1]=(0,r.eW)(" Latest review: ",-1)),(0,r.Lk)("strong",null,(0,i.v_)(e.lastReview.restaurantName),1)]),(0,r.Lk)("div",wl,[(0,r.bF)(d,{rating:e.lastReview.rating},null,8,["rating"]),e.lastReview.text?((0,r.uX)(),(0,r.CE)("p",hl,'"'+(0,i.v_)(e.lastReview.text)+'"',1)):(0,r.Q3)("",!0)])])):((0,r.uX)(),(0,r.CE)("div",ml," No reviews yet. "))]),(0,r.Lk)("div",kl,[(0,r.Lk)("button",{onClick:t=>s.openReviewsModal(e),class:"action-btn",title:"View Reviews"},t[2]||(t[2]=[(0,r.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor"},[(0,r.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,r.Lk)("path",{d:"M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H6l-2 2V4h16v12z"})],-1)]),8,bl)])]))),128))]))])],64)}const fl=e=>"number"!==typeof e?null:0===e?"ðŸ¥‡":1===e?"ðŸ¥ˆ":2===e?"ðŸ¥‰":e>=3&&e<10?"ðŸ…":null,Ll={name:"Followers",components:{UserReviewsModal:Or,StarRating:je},setup(){const e=(0,le.KR)([]),t=(0,le.KR)(!0),a=(0,le.KR)(!1),s=(0,le.KR)(null),i=(0,le.KR)(new Map),o=async()=>{t.value=!0;const a=we.currentUser;if(!a)return void(t.value=!1);const s=await(0,ue.GG)((0,ue.P)((0,ue.rJ)(me,"users"),(0,ue.My)("reviewCount","desc"),(0,ue.AB)(30))),r=s.docs.map(e=>({id:e.id,...e.data()})).filter(e=>{const t=Number(e.reviewCount)||0;return t>0}).sort((e,t)=>{const a=Number(e.reviewCount)||0,s=Number(t.reviewCount)||0;return s-a}).slice(0,10),o=new Map;r.forEach((e,t)=>{o.set(e.id,t)}),i.value=o;const n=(0,ue.P)((0,ue.rJ)(me,"follows"),(0,ue._M)("followingId","==",a.uid)),l=await(0,ue.GG)(n),d=l.docs.map(e=>e.data().followerId);if(0===d.length)return e.value=[],void(t.value=!1);const c=await(0,ue.GG)((0,ue.rJ)(me,"restaurants")),u=new Map;c.forEach(e=>{u.set(e.id,e.data().name)});const v=[];for(let e=0;e<d.length;e+=30){const t=d.slice(e,e+30);if(t.length>0){const e=(0,ue.P)((0,ue.rJ)(me,"users"),(0,ue._M)("uid","in",t)),a=await(0,ue.GG)(e);a.forEach(e=>{v.push({uid:e.id,...e.data()})})}}const g=await Promise.all(v.map(async e=>{const t=(0,ue.P)((0,ue.rJ)(me,"reviews"),(0,ue._M)("userId","==",e.uid),(0,ue.My)("createdAt","desc"),(0,ue.AB)(1)),a=await(0,ue.GG)(t);let s=null;if(!a.empty){const e=a.docs[0].data();s={...e,restaurantName:u.get(e.restaurantId)||"Unknown Restaurant"}}const r=i.value.get(e.uid);return{...e,lastReview:s,medal:fl(r)}}));e.value=g,t.value=!1};(0,r.sV)(o);const n=e=>{s.value=e,a.value=!0},l=()=>{a.value=!1,s.value=null};return{followers:e,loading:t,isReviewsModalVisible:a,userForReviews:s,openReviewsModal:n,closeReviewsModal:l}}},Cl=(0,Be.A)(Ll,[["render",yl],["__scopeId","data-v-a8a6c8f6"]]),Rl=Cl,El={class:"bucket-list-page"},Ml={class:"page-header"},Il={class:"view-toggle"},xl={key:0,class:"batch-actions"},Sl={key:0,class:"no-items-message"},Al={key:1,class:"loading-indicator"},Xl={key:2,class:"no-items-message"},_l={key:0},Fl={key:1},Pl={key:3,class:"restaurant-list"},Ul={key:0,class:"item-checkbox"},zl=["checked","onChange"],Vl={class:"restaurant-details"},Tl={class:"restaurant-name"},Kl={class:"restaurant-meta"},Hl=["title"],Nl={class:"rating-text"},Bl={class:"rating-count"},Ql={key:1,class:"distance"},Gl={class:"restaurant-address"},Dl={class:"restaurant-actions"},Jl=["onClick"],ql=["onClick"];function Wl(e,t,a,s,o,n){const l=(0,r.g2)("StarRating");return(0,r.uX)(),(0,r.CE)("div",El,[(0,r.Lk)("div",Ml,[(0,r.Lk)("div",Il,[(0,r.Lk)("button",{onClick:t[0]||(t[0]=e=>s.showCompleted=!1),class:(0,i.C4)({active:!s.showCompleted})},"To Try",2),(0,r.Lk)("button",{onClick:t[1]||(t[1]=e=>s.showCompleted=!0),class:(0,i.C4)({active:s.showCompleted})},"Completed",2)]),s.filteredItems.length>0&&s.selectedItems.size>0?((0,r.uX)(),(0,r.CE)("div",xl,[(0,r.Lk)("span",null,(0,i.v_)(s.selectedItems.size)+" item(s) selected",1),(0,r.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>s.removeSelectedItems&&s.removeSelectedItems(...e)),class:"btn-delete-batch"},"Remove Selected"),(0,r.Lk)("button",{onClick:t[3]||(t[3]=e=>s.selectedItems.clear()),class:"btn-cancel-selection"},"Cancel")])):s.filteredItems.length>0?((0,r.uX)(),(0,r.CE)("button",{key:1,onClick:t[4]||(t[4]=(...e)=>s.selectAll&&s.selectAll(...e)),class:"btn-select-all"},"Select All")):(0,r.Q3)("",!0)]),s.currentUser?s.loading?((0,r.uX)(),(0,r.CE)("div",Al,"Loading your bucket list...")):0===s.filteredItems.length?((0,r.uX)(),(0,r.CE)("div",Xl,[s.showCompleted?((0,r.uX)(),(0,r.CE)("p",Fl,"You haven't completed any bucket list items yet.")):((0,r.uX)(),(0,r.CE)("p",_l,"Your bucket list is empty. Add some restaurants to try!"))])):((0,r.uX)(),(0,r.CE)("div",Pl,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(s.filteredItems,t=>((0,r.uX)(),(0,r.CE)("div",{key:t.id,class:(0,i.C4)(["restaurant-item",{selected:s.selectedItems.has(t.id)}])},[s.selectedItems.size>0?((0,r.uX)(),(0,r.CE)("div",Ul,[(0,r.Lk)("input",{type:"checkbox",checked:s.selectedItems.has(t.id),onChange:e=>s.toggleItemSelection(t.id)},null,40,zl)])):(0,r.Q3)("",!0),(0,r.Lk)("div",Vl,[(0,r.Lk)("span",Tl,(0,i.v_)(t.restaurant.name),1),(0,r.Lk)("div",Kl,[t.restaurant.averageRating>0?((0,r.uX)(),(0,r.CE)("div",{key:0,class:"rating",title:`${t.restaurant.averageRating.toFixed(2)} average rating`},[(0,r.bF)(l,{rating:t.restaurant.averageRating},null,8,["rating"]),(0,r.Lk)("span",Nl,(0,i.v_)(t.restaurant.averageRating.toFixed(1)),1),(0,r.Lk)("span",Bl,"("+(0,i.v_)(t.restaurant.ratingCount)+")",1)],8,Hl)):(0,r.Q3)("",!0),null!==t.restaurant.distance?((0,r.uX)(),(0,r.CE)("span",Ql,(0,i.v_)(t.restaurant.distance.toFixed(1))+" miles away ",1)):(0,r.Q3)("",!0)]),(0,r.Lk)("span",Gl,[(0,r.eW)((0,i.v_)(t.restaurant.address),1),t.restaurant.city?((0,r.uX)(),(0,r.CE)(r.FK,{key:0},[(0,r.eW)(", "+(0,i.v_)(t.restaurant.city),1)],64)):(0,r.Q3)("",!0),t.restaurant.state?((0,r.uX)(),(0,r.CE)(r.FK,{key:1},[(0,r.eW)(", "+(0,i.v_)(t.restaurant.state),1)],64)):(0,r.Q3)("",!0),t.restaurant.zip?((0,r.uX)(),(0,r.CE)(r.FK,{key:2},[(0,r.eW)((0,i.v_)(t.restaurant.zip),1)],64)):(0,r.Q3)("",!0)])]),(0,r.Lk)("div",Dl,[(0,r.Lk)("button",{onClick:e=>s.removeFromBucketList(t.id),class:"action-btn delete-btn"},"Remove",8,Jl),(0,r.Lk)("button",{class:"check-in-btn",onClick:a=>e.$emit("review-at",t.restaurantId)},"Review",8,ql)])],2))),128))])):((0,r.uX)(),(0,r.CE)("div",Sl,t[5]||(t[5]=[(0,r.Lk)("p",null,"Please log in to view your bucket list.",-1)])))])}const $l={name:"BucketList",components:{StarRating:je},emits:["review-at"],setup(){const e=(0,le.KR)([]),t=(0,le.KR)(!0),a=(0,le.KR)(!1),s=(0,le.KR)(null),i=(0,le.KR)(we.currentUser),o=(0,le.KR)(new Set);let n=()=>{};we.onAuthStateChanged(a=>{i.value=a,a?l():(t.value=!1,e.value=[],n&&n())});const l=()=>{const a=we.currentUser;if(!a)return t.value=!1,void(e.value=[]);const r=(0,ue.P)((0,ue.rJ)(me,"bucketListItems"),(0,ue._M)("userId","==",a.uid));n=(0,ue.aQ)(r,async a=>{t.value=!0;try{const r=a.docs.map(e=>({id:e.id,...e.data()}));if(0===r.length)return e.value=[],void(t.value=!1);const i=[...new Set(r.map(e=>e.restaurantId).filter(Boolean))],o=new Map;if(i.length>0){for(let e=0;e<i.length;e+=30){const t=i.slice(e,e+30),a=(0,ue.P)((0,ue.rJ)(me,"restaurants"),(0,ue._M)((0,ue.Fs)(),"in",t)),s=await(0,ue.GG)(a);s.forEach(e=>o.set(e.id,{id:e.id,...e.data()}))}const t=(0,ue.P)((0,ue.rJ)(me,"reviews"),(0,ue._M)("restaurantId","in",i)),a=await(0,ue.GG)(t),n={};a.forEach(e=>{const t=e.data();t.restaurantId&&"number"===typeof t.rating&&(n[t.restaurantId]||(n[t.restaurantId]={total:0,count:0}),n[t.restaurantId].total+=t.rating,n[t.restaurantId].count++)}),e.value=r.map(e=>{const t=o.get(e.restaurantId);if(!t)return null;const a=n[t.id];return t.averageRating=a?a.total/a.count:0,t.ratingCount=a?a.count:0,t.distance=s.value&&t.location?fa(s.value.lat,s.value.lng,t.location.lat,t.location.lng):null,{...e,restaurant:t}}).filter(Boolean)}else e.value=[]}catch(r){console.error("Error loading bucket list:",r),e.value=[]}finally{t.value=!1}},a=>{console.error("Error in bucket list snapshot:",a),e.value=[],t.value=!1})};(0,r.sV)(()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(t=>{s.value={lat:t.coords.latitude,lng:t.coords.longitude},e.value.length>0&&i.value&&l()},e=>{console.error("Error getting location for bucket list",e)}),i.value?l():t.value=!1}),(0,r.hi)(()=>{n()});const d=(0,r.EW)(()=>{const t=e.value.filter(e=>a.value?!!e.completedAt:!e.completedAt);return t.sort((e,t)=>null===e.restaurant.distance?1:null===t.restaurant.distance?-1:e.restaurant.distance-t.restaurant.distance)}),c=async e=>{if(confirm("Are you sure you want to remove this from your bucket list?"))try{await(0,ue.kd)((0,ue.H9)(me,"bucketListItems",e)),Ke("Removed from bucket list","success")}catch(t){console.error("Error removing from bucket list:",t),Ke("Failed to remove item. Please try again.","error")}},u=e=>{o.value.has(e)?o.value.delete(e):o.value.add(e)},v=()=>{d.value.forEach(e=>{o.value.add(e.id)})},g=async()=>{if(0!==o.value.size&&confirm(`Are you sure you want to remove ${o.value.size} item(s) from your bucket list?`))try{const e=Array.from(o.value).map(e=>(0,ue.kd)((0,ue.H9)(me,"bucketListItems",e)));await Promise.all(e),Ke(`Removed ${o.value.size} item(s) from bucket list`,"success"),o.value.clear()}catch(e){console.error("Error removing items:",e),Ke("Failed to remove items. Please try again.","error")}},p=e=>{const t=encodeURIComponent(`${e.name}, ${e.address}`);return`https://www.google.com/maps/dir/?api=1&destination=${t}`},w=e=>{const t=encodeURIComponent(`${e.name}, ${e.address}`);return`https://www.google.com/search?q=${t}`};return{loading:t,showCompleted:a,filteredItems:d,selectedItems:o,removeFromBucketList:c,toggleItemSelection:u,selectAll:v,removeSelectedItems:g,getDirectionsUrl:p,getDetailsUrl:w,currentUser:i}}},Ol=(0,Be.A)($l,[["render",Wl],["__scopeId","data-v-11aea084"]]),jl=Ol,Yl={class:"following-page"},Zl={key:0,class:"loading-indicator"},ed={key:1},td={key:0,class:"no-users-message"},ad={class:"user-card-content"},sd={class:"user-info"},rd=["src"],id={class:"user-details"},od={class:"user-name-line"},nd={class:"user-name"},ld={key:0,class:"medal"},dd={key:0,class:"last-review"},cd={class:"review-header"},ud={class:"review-body"},vd={key:0,class:"review-text"},gd={key:1,class:"last-review no-review"},pd={class:"user-actions"},wd=["onClick"],hd=["onClick"];function md(e,t,a,s,o,n){const l=(0,r.g2)("UserReviewsModal"),d=(0,r.g2)("StarRating");return(0,r.uX)(),(0,r.CE)(r.FK,null,[s.isReviewsModalVisible?((0,r.uX)(),(0,r.Wv)(l,{key:0,user:s.userForReviews,onClose:s.closeReviewsModal},null,8,["user","onClose"])):(0,r.Q3)("",!0),(0,r.Lk)("div",Yl,[s.loading?((0,r.uX)(),(0,r.CE)("div",Zl,"Loading users you follow...")):((0,r.uX)(),(0,r.CE)("div",ed,[0===s.following.length?((0,r.uX)(),(0,r.CE)("div",td,t[0]||(t[0]=[(0,r.Lk)("h3",null,"Not following anyone yet",-1),(0,r.Lk)("p",null,'Visit the "Follow Users" page to discover and follow other reviewers to see their posts in your feed.',-1)]))):(0,r.Q3)("",!0),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(s.following,e=>((0,r.uX)(),(0,r.CE)("div",{key:e.uid,class:"user-card"},[(0,r.Lk)("div",ad,[(0,r.Lk)("div",sd,[(0,r.Lk)("img",{src:e.photoURL||"https://cdn-icons-png.flaticon.com/512/149/149071.png",class:"user-avatar",alt:"User",referrerpolicy:"no-referrer"},null,8,rd),(0,r.Lk)("div",id,[(0,r.Lk)("div",od,[(0,r.Lk)("span",nd,(0,i.v_)(e.displayName),1),e.medal?((0,r.uX)(),(0,r.CE)("span",ld,(0,i.v_)(e.medal),1)):(0,r.Q3)("",!0)])])]),e.lastReview?((0,r.uX)(),(0,r.CE)("div",dd,[(0,r.Lk)("div",cd,[t[1]||(t[1]=(0,r.eW)(" Latest review: ",-1)),(0,r.Lk)("strong",null,(0,i.v_)(e.lastReview.restaurantName),1)]),(0,r.Lk)("div",ud,[(0,r.bF)(d,{rating:e.lastReview.rating},null,8,["rating"]),e.lastReview.text?((0,r.uX)(),(0,r.CE)("p",vd,'"'+(0,i.v_)(e.lastReview.text)+'"',1)):(0,r.Q3)("",!0)])])):((0,r.uX)(),(0,r.CE)("div",gd," No reviews yet. "))]),(0,r.Lk)("div",pd,[(0,r.Lk)("button",{onClick:t=>s.openReviewsModal(e),class:"action-btn",title:"View Reviews"},t[2]||(t[2]=[(0,r.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor"},[(0,r.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,r.Lk)("path",{d:"M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H6l-2 2V4h16v12z"})],-1)]),8,wd),(0,r.Lk)("button",{onClick:t=>s.unfollowUser(e),class:"unfollow-btn"},"Unfollow",8,hd)])]))),128))]))])],64)}const kd=e=>"number"!==typeof e?null:0===e?"ðŸ¥‡":1===e?"ðŸ¥ˆ":2===e?"ðŸ¥‰":e>=3&&e<10?"ðŸ…":null,bd={name:"Following",components:{StarRating:je,UserReviewsModal:Or},setup(){const e=(0,le.KR)([]),t=(0,le.KR)(!0),a=(0,le.KR)(!1),s=(0,le.KR)(null),i=(0,le.KR)(new Map);let o=()=>{};const n=async()=>{t.value=!0;const a=we.currentUser;if(!a)return void(t.value=!1);const s=await(0,ue.GG)((0,ue.P)((0,ue.rJ)(me,"users"),(0,ue.My)("reviewCount","desc"),(0,ue.AB)(30))),r=s.docs.map(e=>({id:e.id,...e.data()})).filter(e=>{const t=Number(e.reviewCount)||0;return t>0}).sort((e,t)=>{const a=Number(e.reviewCount)||0,s=Number(t.reviewCount)||0;return s-a}).slice(0,10),n=new Map;r.forEach((e,t)=>{n.set(e.id,t)}),i.value=n;const l=(0,ue.P)((0,ue.rJ)(me,"follows"),(0,ue._M)("followerId","==",a.uid));o=(0,ue.aQ)(l,async a=>{const s=a.docs.map(e=>e.data().followingId);if(0===s.length)return e.value=[],void(t.value=!1);const r=await(0,ue.GG)((0,ue.rJ)(me,"restaurants")),o=new Map;r.forEach(e=>{o.set(e.id,e.data().name)});const n=[];for(let e=0;e<s.length;e+=30){const t=s.slice(e,e+30);if(t.length>0){const e=(0,ue.P)((0,ue.rJ)(me,"users"),(0,ue._M)("uid","in",t)),a=await(0,ue.GG)(e);a.forEach(e=>{n.push({uid:e.id,...e.data()})})}}const l=await Promise.all(n.map(async e=>{const t=(0,ue.P)((0,ue.rJ)(me,"reviews"),(0,ue._M)("userId","==",e.uid),(0,ue.My)("createdAt","desc"),(0,ue.AB)(1)),a=await(0,ue.GG)(t);let s=null;if(!a.empty){const e=a.docs[0].data();s={...e,restaurantName:o.get(e.restaurantId)||"Unknown Restaurant"}}const r=i.value.get(e.uid);return{...e,lastReview:s,medal:kd(r)}}));e.value=l,t.value=!1})};(0,r.sV)(n),(0,r.hi)(()=>o());const l=async e=>{const t=we.currentUser;if(t&&window.confirm(`Are you sure you want to unfollow ${e.displayName}?`))try{const a=(0,ue.P)((0,ue.rJ)(me,"follows"),(0,ue._M)("followerId","==",t.uid),(0,ue._M)("followingId","==",e.uid)),s=await(0,ue.GG)(a);if(!s.empty){const t=s.docs[0].id;await(0,ue.kd)((0,ue.H9)(me,"follows",t)),Ke(`Unfollowed ${e.displayName}`,"success")}}catch(a){console.error("Error unfollowing user:",a),Ke("Failed to unfollow user. Please try again.","error")}},d=e=>{s.value=e,a.value=!0},c=()=>{a.value=!1,s.value=null};return{following:e,loading:t,unfollowUser:l,isReviewsModalVisible:a,userForReviews:s,openReviewsModal:d,closeReviewsModal:c}}},yd=(0,Be.A)(bd,[["render",md],["__scopeId","data-v-614462e6"]]),fd=yd,Ld={class:"help-page"},Cd={class:"help-container"},Rd={class:"help-sidebar"},Ed={class:"toc-nav"},Md={class:"help-content",ref:"contentRef"};function Id(e,t,a,o,n,l){return(0,r.uX)(),(0,r.CE)("div",Ld,[(0,r.Lk)("div",Cd,[(0,r.Lk)("div",Rd,[t[8]||(t[8]=(0,r.Lk)("h3",null,"Table of Contents",-1)),(0,r.Lk)("nav",Ed,[(0,r.Lk)("a",{href:"#getting-started",onClick:t[0]||(t[0]=(0,s.D$)(e=>o.scrollToSection("getting-started"),["prevent"])),class:(0,i.C4)({active:"getting-started"===o.activeSection})},"Getting Started",2),(0,r.Lk)("a",{href:"#navigation",onClick:t[1]||(t[1]=(0,s.D$)(e=>o.scrollToSection("navigation"),["prevent"])),class:(0,i.C4)({active:"navigation"===o.activeSection})},"Navigation",2),(0,r.Lk)("a",{href:"#core-features",onClick:t[2]||(t[2]=(0,s.D$)(e=>o.scrollToSection("core-features"),["prevent"])),class:(0,i.C4)({active:"core-features"===o.activeSection})},"Core Features",2),(0,r.Lk)("a",{href:"#user-accounts",onClick:t[3]||(t[3]=(0,s.D$)(e=>o.scrollToSection("user-accounts"),["prevent"])),class:(0,i.C4)({active:"user-accounts"===o.activeSection})},"User Accounts & Social",2),(0,r.Lk)("a",{href:"#gamification",onClick:t[4]||(t[4]=(0,s.D$)(e=>o.scrollToSection("gamification"),["prevent"])),class:(0,i.C4)({active:"gamification"===o.activeSection})},"Gamification & Social",2),(0,r.Lk)("a",{href:"#tips",onClick:t[5]||(t[5]=(0,s.D$)(e=>o.scrollToSection("tips"),["prevent"])),class:(0,i.C4)({active:"tips"===o.activeSection})},"Tips & Best Practices",2),(0,r.Lk)("a",{href:"#faq",onClick:t[6]||(t[6]=(0,s.D$)(e=>o.scrollToSection("faq"),["prevent"])),class:(0,i.C4)({active:"faq"===o.activeSection})},"FAQ",2),(0,r.Lk)("a",{href:"#changelog",onClick:t[7]||(t[7]=(0,s.D$)(e=>o.scrollToSection("changelog"),["prevent"])),class:(0,i.C4)({active:"changelog"===o.activeSection})},"Change Log",2)])]),(0,r.Lk)("div",Md,t[9]||(t[9]=[(0,r.Fv)('<h1 data-v-66d6bc9e>PorkHub User Guide</h1><p class="intro" data-v-66d6bc9e>Welcome to <strong data-v-66d6bc9e>PorkHub</strong> â€” your community-driven platform for discovering, rating, and reviewing US Breaded Pork Tenderloin restaurants!</p><section id="getting-started" data-v-66d6bc9e><h2 data-v-66d6bc9e>Getting Started</h2><h3 data-v-66d6bc9e>Logging In</h3><p data-v-66d6bc9e>When you first visit PorkHub, you&#39;ll see a <strong data-v-66d6bc9e>&quot;Login with Google&quot;</strong> button at the bottom of the sidebar. Click it to access your account using your Google credentials. Once logged in, your profile information (name and avatar) will appear at the top of the sidebar, and you&#39;ll unlock all member-only features.</p><h3 data-v-66d6bc9e>What You Can Do Without Logging In</h3><ul data-v-66d6bc9e><li data-v-66d6bc9e>Browse the <strong data-v-66d6bc9e>Home</strong> feed</li><li data-v-66d6bc9e>View the <strong data-v-66d6bc9e>Leaderboard</strong></li><li data-v-66d6bc9e>Explore <strong data-v-66d6bc9e>Restaurants</strong> and view their reviews</li><li data-v-66d6bc9e>View <strong data-v-66d6bc9e>Recommendations</strong></li><li data-v-66d6bc9e>Search for users</li></ul><h3 data-v-66d6bc9e>What Requires Login</h3><ul data-v-66d6bc9e><li data-v-66d6bc9e>Write and submit reviews</li><li data-v-66d6bc9e>Follow other users</li><li data-v-66d6bc9e>Like reviews and add comments</li><li data-v-66d6bc9e>Manage your bucket list</li><li data-v-66d6bc9e>View and edit your own reviews</li><li data-v-66d6bc9e>Share reviews with others</li></ul></section><section id="navigation" data-v-66d6bc9e><h2 data-v-66d6bc9e>Navigation</h2><p data-v-66d6bc9e>The <strong data-v-66d6bc9e>sidebar</strong> on the left is your main navigation hub. Click the <strong data-v-66d6bc9e>hamburger menu icon</strong> (three horizontal lines) to collapse/expand the sidebar for more screen space.</p><h3 data-v-66d6bc9e>Public Pages (Available to Everyone)</h3><div class="feature-list" data-v-66d6bc9e><div class="feature-item" data-v-66d6bc9e><h4 data-v-66d6bc9e>Home</h4><p data-v-66d6bc9e>Your personalized feed of reviews from followed users and recent activity, with options to sort by Most Recent or Nearby</p></div><div class="feature-item" data-v-66d6bc9e><h4 data-v-66d6bc9e>Leaderboard</h4><p data-v-66d6bc9e>Top-ranked reviewers in the community, ranked by activity and reputation</p></div><div class="feature-item" data-v-66d6bc9e><h4 data-v-66d6bc9e>Restaurants</h4><p data-v-66d6bc9e>Browse and search all restaurants, view details, and see reviews</p></div><div class="feature-item" data-v-66d6bc9e><h4 data-v-66d6bc9e>Recommendations</h4><p data-v-66d6bc9e>Discover new restaurants based on highly-rated reviews from the community</p></div></div><h3 data-v-66d6bc9e>Account-Only Pages (Requires Login)</h3><div class="feature-list" data-v-66d6bc9e><div class="feature-item" data-v-66d6bc9e><h4 data-v-66d6bc9e>Write a Review</h4><p data-v-66d6bc9e>Submit a new review for a restaurant you&#39;ve visited</p></div><div class="feature-item" data-v-66d6bc9e><h4 data-v-66d6bc9e>Follow Users</h4><p data-v-66d6bc9e>Search for and follow other reviewers</p></div><div class="feature-item" data-v-66d6bc9e><h4 data-v-66d6bc9e>My Bucket List</h4><p data-v-66d6bc9e>Track restaurants you want to visit</p></div><div class="feature-item" data-v-66d6bc9e><h4 data-v-66d6bc9e>My Reviews</h4><p data-v-66d6bc9e>View and manage all your submitted reviews</p></div><div class="feature-item" data-v-66d6bc9e><h4 data-v-66d6bc9e>My Followers</h4><p data-v-66d6bc9e>See who is following your reviews</p></div><div class="feature-item" data-v-66d6bc9e><h4 data-v-66d6bc9e>Following</h4><p data-v-66d6bc9e>View the users you&#39;re following</p></div></div></section><section id="core-features" data-v-66d6bc9e><h2 data-v-66d6bc9e>Core Features</h2><h3 data-v-66d6bc9e>ðŸ  Home Feed</h3><p data-v-66d6bc9e>The <strong data-v-66d6bc9e>Home</strong> page displays a personalized feed of reviews from users you follow.</p><p data-v-66d6bc9e><strong data-v-66d6bc9e>Features:</strong></p><ul data-v-66d6bc9e><li data-v-66d6bc9e>See recent reviews from users you follow</li><li data-v-66d6bc9e><strong data-v-66d6bc9e>Location Permission:</strong> On your first visit, you may be prompted to share your location. This unlocks the &quot;Nearby&quot; sorting feature</li><li data-v-66d6bc9e><strong data-v-66d6bc9e>Sort by:</strong><ul data-v-66d6bc9e><li data-v-66d6bc9e><strong data-v-66d6bc9e>Most Recent</strong> â€” Shows the newest reviews first</li><li data-v-66d6bc9e><strong data-v-66d6bc9e>Nearby</strong> â€” Shows restaurants closest to your current location (requires location permission and enabled sorting)</li></ul></li></ul><p data-v-66d6bc9e><strong data-v-66d6bc9e>Review Actions:</strong></p><ul data-v-66d6bc9e><li data-v-66d6bc9e><strong data-v-66d6bc9e>Like</strong> â€” Click the heart icon to like a review (requires login)</li><li data-v-66d6bc9e><strong data-v-66d6bc9e>Share</strong> â€” Share the review using the share button</li><li data-v-66d6bc9e><strong data-v-66d6bc9e>Comment</strong> â€” Add comments to reviews to engage with other reviewers</li><li data-v-66d6bc9e><strong data-v-66d6bc9e>Bucket List</strong> â€” Add restaurants to your bucket list with the heart icon</li><li data-v-66d6bc9e><strong data-v-66d6bc9e>View Details</strong> â€” Click the restaurant name to view full restaurant details</li></ul><h3 data-v-66d6bc9e>ðŸ“Š Leaderboard</h3><p data-v-66d6bc9e>View the community&#39;s top contributors ranked by their activity and reputation.</p><p data-v-66d6bc9e><strong data-v-66d6bc9e>What You See:</strong></p><ul data-v-66d6bc9e><li data-v-66d6bc9e>Users ranked by number of reviews and community engagement</li><li data-v-66d6bc9e>Medals or badges displayed next to top reviewers</li><li data-v-66d6bc9e>Click on a user to view their profile and all their reviews</li></ul><h3 data-v-66d6bc9e>ðŸª Restaurants</h3><p data-v-66d6bc9e>Browse, search, and manage restaurant listings.</p><p data-v-66d6bc9e><strong data-v-66d6bc9e>Searching:</strong></p><ul data-v-66d6bc9e><li data-v-66d6bc9e>Search by restaurant <strong data-v-66d6bc9e>name</strong>, <strong data-v-66d6bc9e>address</strong>, <strong data-v-66d6bc9e>city</strong>, <strong data-v-66d6bc9e>state</strong>, or <strong data-v-66d6bc9e>ZIP code</strong></li><li data-v-66d6bc9e>Results update as you type</li><li data-v-66d6bc9e>See average ratings and review counts for each restaurant</li><li data-v-66d6bc9e>Distance to each restaurant displayed (when location is enabled)</li></ul><p data-v-66d6bc9e><strong data-v-66d6bc9e>What You Can Do:</strong></p><ul data-v-66d6bc9e><li data-v-66d6bc9e><strong data-v-66d6bc9e>View Reviews</strong> â€” Click the comments icon to see all reviews for a restaurant</li><li data-v-66d6bc9e><strong data-v-66d6bc9e>Add Review</strong> â€” Click &quot;View Reviews&quot; then &quot;Write a Review&quot; button</li><li data-v-66d6bc9e><strong data-v-66d6bc9e>Bucket List</strong> â€” Click the bucket/heart icon to save restaurants you want to visit (requires login)</li><li data-v-66d6bc9e><strong data-v-66d6bc9e>Edit Details</strong> (Admin only) â€” Update restaurant information</li><li data-v-66d6bc9e><strong data-v-66d6bc9e>Add New Restaurant</strong> (Logged-in users) â€” Click &quot;Add New Restaurant&quot; to submit a new location</li></ul><h3 data-v-66d6bc9e>ðŸ“ Write a Review</h3><p data-v-66d6bc9e>Submit detailed reviews for restaurants you&#39;ve visited.</p><p data-v-66d6bc9e><strong data-v-66d6bc9e>To Write a Review:</strong></p><ol data-v-66d6bc9e><li data-v-66d6bc9e>Click <strong data-v-66d6bc9e>&quot;Write a Review&quot;</strong> in the sidebar</li><li data-v-66d6bc9e>Choose a restaurant from the dropdown or add a new one</li><li data-v-66d6bc9e>Fill in your review details: <ul data-v-66d6bc9e><li data-v-66d6bc9e><strong data-v-66d6bc9e>Star Rating</strong> â€” Rate from 1-5 stars</li><li data-v-66d6bc9e><strong data-v-66d6bc9e>Review Title</strong> â€” Short summary of your experience</li><li data-v-66d6bc9e><strong data-v-66d6bc9e>Review Text</strong> â€” Detailed comments about the food, service, atmosphere, etc.</li><li data-v-66d6bc9e><strong data-v-66d6bc9e>Tags</strong> â€” Add tags to categorize your experience</li><li data-v-66d6bc9e><strong data-v-66d6bc9e>Visit Date</strong> â€” When you visited</li><li data-v-66d6bc9e><strong data-v-66d6bc9e>Photo</strong> â€” Optionally take a photo with your camera or upload one from your device</li></ul></li><li data-v-66d6bc9e>Click <strong data-v-66d6bc9e>&quot;Submit Review&quot;</strong></li></ol><p data-v-66d6bc9e><strong data-v-66d6bc9e>Tips:</strong></p><ul data-v-66d6bc9e><li data-v-66d6bc9e>Be specific and constructive in your feedback</li><li data-v-66d6bc9e>Include details about flavors, portions, preparation, and service</li><li data-v-66d6bc9e>Mention the occasion (family dinner, quick lunch, date night, etc.)</li><li data-v-66d6bc9e>Use tags to help others quickly understand the experience</li><li data-v-66d6bc9e>Review soon after your visit while details are fresh</li></ul><h3 data-v-66d6bc9e>â­ Recommendations</h3><p data-v-66d6bc9e>Discover new restaurants based on community reviews.</p><p data-v-66d6bc9e><strong data-v-66d6bc9e>How It Works:</strong></p><ul data-v-66d6bc9e><li data-v-66d6bc9e>Analyzes highly-rated reviews from users you follow</li><li data-v-66d6bc9e>Shows personalized restaurant suggestions</li><li data-v-66d6bc9e>Recommendations are tailored based on the reviews and ratings in the community</li></ul><h3 data-v-66d6bc9e>ðŸ” Follow Users</h3><p data-v-66d6bc9e>Find and follow other PorkHub members to personalize your feed.</p><p data-v-66d6bc9e><strong data-v-66d6bc9e>To Follow a User:</strong></p><ol data-v-66d6bc9e><li data-v-66d6bc9e>Click <strong data-v-66d6bc9e>&quot;Follow Users&quot;</strong> in the sidebar</li><li data-v-66d6bc9e>Search for a username to find members</li><li data-v-66d6bc9e>View their profile showing recent reviews and activity</li><li data-v-66d6bc9e>Click <strong data-v-66d6bc9e>&quot;Follow&quot;</strong> to add them to your following list</li></ol><p data-v-66d6bc9e><strong data-v-66d6bc9e>Benefits:</strong></p><ul data-v-66d6bc9e><li data-v-66d6bc9e>Your Home feed will include their reviews</li><li data-v-66d6bc9e>See their ratings and activity</li><li data-v-66d6bc9e>Build a community of reviewers with similar tastes</li></ul><h3 data-v-66d6bc9e>ðŸª£ My Bucket List</h3><p data-v-66d6bc9e>Create and manage a list of restaurants you want to visit.</p><p data-v-66d6bc9e><strong data-v-66d6bc9e>Managing Your List:</strong></p><ul data-v-66d6bc9e><li data-v-66d6bc9e>Click the <strong data-v-66d6bc9e>heart icon</strong> on any restaurant card or in the feed to add/remove from bucket list</li><li data-v-66d6bc9e>View all saved restaurants in <strong data-v-66d6bc9e>&quot;My Bucket List&quot;</strong></li><li data-v-66d6bc9e>See distance to each restaurant (when location is enabled)</li><li data-v-66d6bc9e>View previous reviews and ratings before visiting</li><li data-v-66d6bc9e>Remove restaurants once you&#39;ve visited and reviewed them</li></ul><h3 data-v-66d6bc9e>ðŸ“‹ My Reviews</h3><p data-v-66d6bc9e>View and manage all your submitted reviews.</p><p data-v-66d6bc9e><strong data-v-66d6bc9e>Features:</strong></p><ul data-v-66d6bc9e><li data-v-66d6bc9e>See all reviews you&#39;ve written with their ratings and engagement</li><li data-v-66d6bc9e><strong data-v-66d6bc9e>Edit</strong> â€” Update your review text, rating, tags, or photo</li><li data-v-66d6bc9e><strong data-v-66d6bc9e>Delete</strong> â€” Remove a review (this action cannot be undone)</li><li data-v-66d6bc9e><strong data-v-66d6bc9e>Share</strong> â€” Share individual reviews with others</li><li data-v-66d6bc9e>View how many likes and comments each review has received</li><li data-v-66d6bc9e>See all reviews sorted by date</li></ul><h3 data-v-66d6bc9e>ðŸ‘¥ My Followers / ðŸ‘¤ Following</h3><p data-v-66d6bc9e>Manage your social connections.</p><p data-v-66d6bc9e><strong data-v-66d6bc9e>My Followers:</strong></p><ul data-v-66d6bc9e><li data-v-66d6bc9e>See all users who are following your reviews</li><li data-v-66d6bc9e>View each follower&#39;s profile and recent activity</li><li data-v-66d6bc9e>Click to view all their reviews</li></ul><p data-v-66d6bc9e><strong data-v-66d6bc9e>Following:</strong></p><ul data-v-66d6bc9e><li data-v-66d6bc9e>View all users you&#39;re following</li><li data-v-66d6bc9e>See previews of their latest reviews and ratings</li><li data-v-66d6bc9e>Unfollow users by clicking the unfollow button</li><li data-v-66d6bc9e>Click on a user to view their full profile and all their reviews</li></ul></section><section id="user-accounts" data-v-66d6bc9e><h2 data-v-66d6bc9e>User Accounts &amp; Social</h2><h3 data-v-66d6bc9e>Your Profile</h3><p data-v-66d6bc9e>Your profile appears in the sidebar and displays:</p><ul data-v-66d6bc9e><li data-v-66d6bc9e>Your profile photo (from your Google account)</li><li data-v-66d6bc9e>Your display name</li><li data-v-66d6bc9e>Badge/medal (if you&#39;re a top reviewer)</li></ul><p data-v-66d6bc9e>When you log out, you&#39;ll see a <strong data-v-66d6bc9e>&quot;Login with&quot;</strong> button to sign back in.</p><h3 data-v-66d6bc9e>Comments &amp; Interaction</h3><p data-v-66d6bc9e><strong data-v-66d6bc9e>Adding Comments:</strong></p><ul data-v-66d6bc9e><li data-v-66d6bc9e>Click on any review to expand it and see the comments section</li><li data-v-66d6bc9e>Type your comment and submit to engage with other reviewers</li><li data-v-66d6bc9e>Comments appear immediately for all users to see</li><li data-v-66d6bc9e>Engage in discussions about restaurants and dining experiences</li></ul><p data-v-66d6bc9e><strong data-v-66d6bc9e>Liking Reviews:</strong></p><ul data-v-66d6bc9e><li data-v-66d6bc9e>Click the heart icon on any review to like it (requires login)</li><li data-v-66d6bc9e>Like counts are displayed on each review</li><li data-v-66d6bc9e>Your likes help promote helpful reviews</li></ul><p data-v-66d6bc9e><strong data-v-66d6bc9e>Sharing Reviews:</strong></p><ul data-v-66d6bc9e><li data-v-66d6bc9e>Click the share icon on any review to share it</li><li data-v-66d6bc9e>Share via your device&#39;s native sharing options, email, social media, or copy the link to clipboard</li><li data-v-66d6bc9e>Shared reviews include all details (rating, text, photo, tags) when opened by others</li></ul><p data-v-66d6bc9e><strong data-v-66d6bc9e>View User Profiles:</strong></p><ul data-v-66d6bc9e><li data-v-66d6bc9e>Click on any username to see their complete profile</li><li data-v-66d6bc9e>View their review history</li><li data-v-66d6bc9e>Check out their recent activity</li><li data-v-66d6bc9e>Follow them if interested in their reviews</li></ul></section><section id="gamification" data-v-66d6bc9e><h2 data-v-66d6bc9e>ðŸŽ® Gamification &amp; Social Features</h2><h3 data-v-66d6bc9e>Your Stats &amp; Achievements</h3><p data-v-66d6bc9e>Click on your <strong data-v-66d6bc9e>profile image</strong> in the sidebar to view your personal stats dashboard. Here you can track:</p><ul data-v-66d6bc9e><li data-v-66d6bc9e><strong data-v-66d6bc9e>Total Reviews</strong> â€” Your contribution count</li><li data-v-66d6bc9e><strong data-v-66d6bc9e>Photo Reviews</strong> â€” Reviews you&#39;ve submitted with photos</li><li data-v-66d6bc9e><strong data-v-66d6bc9e>States Visited</strong> â€” How many different US states you&#39;ve reviewed restaurants in</li><li data-v-66d6bc9e><strong data-v-66d6bc9e>Followers</strong> â€” Number of users following your reviews</li></ul><h3 data-v-66d6bc9e>ðŸ“Š Badges</h3><p data-v-66d6bc9e>Earn badges as you reach milestones and accomplish goals! Current badges include:</p><div class="feature-list" data-v-66d6bc9e><div class="feature-item" data-v-66d6bc9e><h4 data-v-66d6bc9e>ðŸ“ 10 Reviews</h4><p data-v-66d6bc9e>Written 10 reviews</p></div><div class="feature-item" data-v-66d6bc9e><h4 data-v-66d6bc9e>ðŸ’« 25 Reviews</h4><p data-v-66d6bc9e>Written 25 reviews</p></div><div class="feature-item" data-v-66d6bc9e><h4 data-v-66d6bc9e>âœ¨ 50 Reviews</h4><p data-v-66d6bc9e>Written 50 reviews</p></div><div class="feature-item" data-v-66d6bc9e><h4 data-v-66d6bc9e>ðŸ‘‘ 100 Reviews</h4><p data-v-66d6bc9e>Written 100 reviews â€” Master Reviewer status!</p></div><div class="feature-item" data-v-66d6bc9e><h4 data-v-66d6bc9e>ðŸ“¸ Photo Master</h4><p data-v-66d6bc9e>Written 10+ reviews with photos</p></div><div class="feature-item" data-v-66d6bc9e><h4 data-v-66d6bc9e>ðŸ—ºï¸ All 50 States</h4><p data-v-66d6bc9e>Reviewed restaurants across all 50 US states</p></div></div><h3 data-v-66d6bc9e>ðŸ”¥ Trending Restaurants</h3><p data-v-66d6bc9e>Discover what&#39;s hot in the community! On the Home page, see two trending views:</p><ul data-v-66d6bc9e><li data-v-66d6bc9e><strong data-v-66d6bc9e>ðŸ”¥ Most Reviewed This Week</strong> â€” Restaurants that have generated the most new reviews in the past 7 days</li><li data-v-66d6bc9e><strong data-v-66d6bc9e>â­ Highest Rated This Week</strong> â€” Restaurants with the best average ratings from recent reviews</li></ul><h3 data-v-66d6bc9e>ðŸ‘¥ Follow Recommendations</h3><p data-v-66d6bc9e>The Home page suggests quality reviewers to follow. Recommendations are based on:</p><ul data-v-66d6bc9e><li data-v-66d6bc9e>Users who share similar reviewer interests</li><li data-v-66d6bc9e>Reviewers followed by people you follow (mutual connections)</li><li data-v-66d6bc9e>Highly-rated reviewers in the community</li></ul><p data-v-66d6bc9e>Hover over recommendations to see why they&#39;re suggested, then click Follow to add them to your feed!</p><h3 data-v-66d6bc9e>ðŸ“° Activity Feed</h3><p data-v-66d6bc9e>Your Home page feeds you the latest activity from users you follow, including:</p><ul data-v-66d6bc9e><li data-v-66d6bc9e>New reviews from people you follow</li><li data-v-66d6bc9e>Recent badges they&#39;ve earned</li><li data-v-66d6bc9e>Ratings, reviews, and photos</li><li data-v-66d6bc9e>Links to view the full review and restaurant details</li></ul><p data-v-66d6bc9e>The Activity Feed shows the 15 most recent activities, giving you a real-time window into your community.</p></section><section id="tips" data-v-66d6bc9e><h2 data-v-66d6bc9e>Tips &amp; Best Practices</h2><h3 data-v-66d6bc9e>âœ… For Great Reviews</h3><ol data-v-66d6bc9e><li data-v-66d6bc9e><strong data-v-66d6bc9e>Be Specific</strong> â€” Instead of &quot;good food,&quot; describe the breaded pork tenderloin, flavors, preparation, and portion size</li><li data-v-66d6bc9e><strong data-v-66d6bc9e>Include Context</strong> â€” Mention the occasion (family dinner, quick lunch, date night, etc.)</li><li data-v-66d6bc9e><strong data-v-66d6bc9e>Balanced Feedback</strong> â€” Note both strengths (great breading, generous portions) and areas for improvement</li><li data-v-66d6bc9e><strong data-v-66d6bc9e>Use Tags</strong> â€” Categorize your experience (e.g., &quot;crispy-exterior&quot;, &quot;family-friendly&quot;, &quot;generous-portion&quot;, &quot;authentic&quot;)</li><li data-v-66d6bc9e><strong data-v-66d6bc9e>Add a Photo</strong> â€” Include a photo of your meal to help others see what to expect</li><li data-v-66d6bc9e><strong data-v-66d6bc9e>Be Timely</strong> â€” Review soon after your visit while details are fresh in your mind</li></ol><h3 data-v-66d6bc9e>ðŸ“ Location Tips</h3><ol data-v-66d6bc9e><li data-v-66d6bc9e><strong data-v-66d6bc9e>Enable Location</strong> â€” Accept the location prompt on the Home page to unlock the &quot;Nearby&quot; sorting feature</li><li data-v-66d6bc9e><strong data-v-66d6bc9e>Privacy</strong> â€” Your location is only used to calculate distances to restaurants and is not stored permanently</li><li data-v-66d6bc9e><strong data-v-66d6bc9e>Better Results</strong> â€” Location data helps show you restaurants closest to you and sorts your feed accordingly</li></ol><h3 data-v-66d6bc9e>ðŸ‘¥ Following Strategy</h3><ol data-v-66d6bc9e><li data-v-66d6bc9e><strong data-v-66d6bc9e>Follow Quality Reviewers</strong> â€” Find users whose tastes align with yours</li><li data-v-66d6bc9e><strong data-v-66d6bc9e>Build Your Feed Gradually</strong> â€” Start with a few followers and expand over time</li><li data-v-66d6bc9e><strong data-v-66d6bc9e>Engage</strong> â€” Comment on reviews and share your thoughts to build community connections</li><li data-v-66d6bc9e><strong data-v-66d6bc9e>Explore Profiles</strong> â€” Click on reviewers from the Leaderboard to find high-quality contributors</li></ol><h3 data-v-66d6bc9e>ðŸ½ï¸ Before Visiting a Restaurant</h3><ol data-v-66d6bc9e><li data-v-66d6bc9e>Check <strong data-v-66d6bc9e>My Bucket List</strong> to see the distance and view saved restaurants</li><li data-v-66d6bc9e>Read the <strong data-v-66d6bc9e>latest reviews</strong> to see current conditions and recent experiences</li><li data-v-66d6bc9e>Check the <strong data-v-66d6bc9e>restaurant&#39;s website</strong> (if available) for hours and menu updates</li><li data-v-66d6bc9e>Read <strong data-v-66d6bc9e>recent comments</strong> on reviews for tips and warnings from other reviewers</li></ol><h3 data-v-66d6bc9e>ðŸ” Search Tips</h3><ul data-v-66d6bc9e><li data-v-66d6bc9e>Search by <strong data-v-66d6bc9e>restaurant name</strong> for direct matches</li><li data-v-66d6bc9e>Use <strong data-v-66d6bc9e>address</strong> searches for accuracy when multiple restaurants have similar names</li><li data-v-66d6bc9e>Try <strong data-v-66d6bc9e>city names</strong> for broad searches in a specific area</li><li data-v-66d6bc9e>Search by <strong data-v-66d6bc9e>ZIP code</strong> to find restaurants in a specific neighborhood</li><li data-v-66d6bc9e>Try <strong data-v-66d6bc9e>partial names</strong> if you&#39;re unsure of the exact spelling</li></ul></section><section id="faq" data-v-66d6bc9e><h2 data-v-66d6bc9e>Frequently Asked Questions</h2><div class="faq-item" data-v-66d6bc9e><h4 data-v-66d6bc9e>Q: Is there a cost to use PorkHub?</h4><p data-v-66d6bc9e>A: No! PorkHub is completely free to use and enjoy.</p></div><div class="faq-item" data-v-66d6bc9e><h4 data-v-66d6bc9e>Q: How does the Leaderboard work?</h4><p data-v-66d6bc9e>A: Users are ranked based on the number of reviews they&#39;ve written and community engagement. Top reviewers earn badges or medals.</p></div><div class="faq-item" data-v-66d6bc9e><h4 data-v-66d6bc9e>Q: Can I delete my account?</h4><p data-v-66d6bc9e>A: You can delete individual reviews at any time. For full account deletion requests, please contact support.</p></div><div class="faq-item" data-v-66d6bc9e><h4 data-v-66d6bc9e>Q: What if I see incorrect restaurant information?</h4><p data-v-66d6bc9e>A: Admins can edit restaurant details directly. If you spot an error, you can also leave a comment noting the issue.</p></div><div class="faq-item" data-v-66d6bc9e><h4 data-v-66d6bc9e>Q: How are Recommendations calculated?</h4><p data-v-66d6bc9e>A: Recommendations are based on highly-rated reviews from users in the community and users you follow.</p></div><div class="faq-item" data-v-66d6bc9e><h4 data-v-66d6bc9e>Q: Are all reviews public?</h4><p data-v-66d6bc9e>A: Yes, all reviews are public to encourage community engagement and help others discover great restaurants. You can delete reviews if desired.</p></div><div class="faq-item" data-v-66d6bc9e><h4 data-v-66d6bc9e>Q: Can I edit my review after posting?</h4><p data-v-66d6bc9e>A: Yes! Go to &quot;My Reviews&quot; and click the edit button on any review to update your text, rating, tags, or photo.</p></div><div class="faq-item" data-v-66d6bc9e><h4 data-v-66d6bc9e>Q: How do I report inappropriate content?</h4><p data-v-66d6bc9e>A: Contact support with details about the concerning review or comment.</p></div><div class="faq-item" data-v-66d6bc9e><h4 data-v-66d6bc9e>Q: Do you collect my location data?</h4><p data-v-66d6bc9e>A: Your location is only used temporarily to calculate distances and sort the feed nearby. It&#39;s not stored permanently in your profile.</p></div><div class="faq-item" data-v-66d6bc9e><h4 data-v-66d6bc9e>Q: Can I search for restaurants without logging in?</h4><p data-v-66d6bc9e>A: Yes! The Restaurants page is available to all users. You only need to log in to write reviews, follow users, or like reviews.</p></div><div class="faq-item" data-v-66d6bc9e><h4 data-v-66d6bc9e>Q: How do I earn badges?</h4><p data-v-66d6bc9e>A: Badges are earned automatically as you reach milestones! Write more reviews, include photos, and visit restaurants in different states to unlock achievements. Check your stats on your profile page to see your progress toward the next badge.</p></div><div class="faq-item" data-v-66d6bc9e><h4 data-v-66d6bc9e>Q: Can I see badges earned by other users?</h4><p data-v-66d6bc9e>A: Yes! When viewing other users&#39; profiles or in the Follow Recommendations section, you can see the badges they&#39;ve earned. This helps you identify quality reviewers in the community.</p></div><div class="faq-item" data-v-66d6bc9e><h4 data-v-66d6bc9e>Q: How are trending restaurants calculated?</h4><p data-v-66d6bc9e>A: We calculate trending restaurants based on activity this week. &quot;Most Reviewed&quot; shows restaurants with the most new reviews, while &quot;Highest Rated&quot; shows restaurants with the best average ratings from recent reviews.</p></div></section><section id="changelog" data-v-66d6bc9e><h2 data-v-66d6bc9e>Change Log</h2><p data-v-66d6bc9e>Track what&#39;s new and improved in PorkHub with each release.</p><div class="changelog-item" data-v-66d6bc9e><h3 data-v-66d6bc9e>Version 26.1.20 â€” Gamification &amp; Social Features</h3><p class="release-date" data-v-66d6bc9e>Released January 20, 2026</p><h4 data-v-66d6bc9e>New Features</h4><ul data-v-66d6bc9e><li data-v-66d6bc9e><strong data-v-66d6bc9e>User Profile Page</strong> â€” Click your profile picture in the sidebar to view your personal stats dashboard</li><li data-v-66d6bc9e><strong data-v-66d6bc9e>Achievement Badges</strong> â€” Earn 6 different badges as you reach milestones: <ul data-v-66d6bc9e><li data-v-66d6bc9e>ðŸ“ 10 Reviews, ðŸ’« 25 Reviews, âœ¨ 50 Reviews, ðŸ‘‘ 100 Reviews</li><li data-v-66d6bc9e>ðŸ“¸ Photo Master (10+ photo reviews)</li><li data-v-66d6bc9e>ðŸ—ºï¸ All 50 States (reviewed in all 50 US states)</li></ul></li><li data-v-66d6bc9e><strong data-v-66d6bc9e>Trending Restaurants</strong> â€” Discover what&#39;s hot in the community with two trending views: <ul data-v-66d6bc9e><li data-v-66d6bc9e>ðŸ”¥ Most Reviewed This Week</li><li data-v-66d6bc9e>â­ Highest Rated This Week</li></ul></li><li data-v-66d6bc9e><strong data-v-66d6bc9e>Follow Recommendations</strong> â€” Get smart suggestions on which quality reviewers to follow based on mutual connections</li><li data-v-66d6bc9e><strong data-v-66d6bc9e>Activity Feed</strong> â€” See the latest reviews and achievements from users you follow in real-time</li></ul><h4 data-v-66d6bc9e>Improvements</h4><ul data-v-66d6bc9e><li data-v-66d6bc9e>Enhanced user stats tracking (Total Reviews, Photo Reviews, States Visited, Followers)</li><li data-v-66d6bc9e>Achievement progress bars showing how close you are to the next badge</li><li data-v-66d6bc9e>Better badge visibility throughout the app</li><li data-v-66d6bc9e>Gamification features on Home page organized in an attractive 3-column layout</li></ul></div><div class="changelog-item" data-v-66d6bc9e><h3 data-v-66d6bc9e>Version 26.1.5 â€” Enhanced User Guide</h3><p class="release-date" data-v-66d6bc9e>Released January 5, 2026</p><h4 data-v-66d6bc9e>New Features</h4><ul data-v-66d6bc9e><li data-v-66d6bc9e><strong data-v-66d6bc9e>In-App User Guide</strong> â€” Access the complete user guide directly in the application via the Help link in the sidebar</li><li data-v-66d6bc9e><strong data-v-66d6bc9e>Interactive Table of Contents</strong> â€” Click any section to jump directly to that part of the guide</li><li data-v-66d6bc9e><strong data-v-66d6bc9e>Mobile-Optimized Guide</strong> â€” User guide formatted for easy reading on all devices</li></ul><h4 data-v-66d6bc9e>Improvements</h4><ul data-v-66d6bc9e><li data-v-66d6bc9e>Updated user guide content to match current application features</li><li data-v-66d6bc9e>Added comprehensive tips and best practices section</li><li data-v-66d6bc9e>Expanded FAQ with common questions about the app</li></ul></div><div class="changelog-item" data-v-66d6bc9e><h3 data-v-66d6bc9e>Version 24.7.1 â€” Initial Release</h3><p class="release-date" data-v-66d6bc9e>Released July 1, 2024</p><h4 data-v-66d6bc9e>Features</h4><ul data-v-66d6bc9e><li data-v-66d6bc9e>Browse and review restaurants serving breaded pork tenderloin</li><li data-v-66d6bc9e>Write reviews with ratings (1-5 stars) and optional photos</li><li data-v-66d6bc9e>Follow other reviewers and see their activity</li><li data-v-66d6bc9e>View Leaderboard of top reviewers</li><li data-v-66d6bc9e>Create and manage a bucket list of restaurants to visit</li><li data-v-66d6bc9e>Search and filter restaurants by location and other criteria</li><li data-v-66d6bc9e>Like reviews and leave comments</li><li data-v-66d6bc9e>Share reviews with others</li><li data-v-66d6bc9e>Location-based features for nearby restaurants</li><li data-v-66d6bc9e>Google authentication for secure login</li></ul></div></section><div class="help-footer" data-v-66d6bc9e><p data-v-66d6bc9e>Need more help? Please reach out to the PorkHub support team.</p><p data-v-66d6bc9e>Happy reviewing and pork tenderloin hunting! ðŸ·ðŸ¥“</p></div>',11)]),512)])])}const xd={name:"Help",setup(){const e=(0,le.KR)("getting-started"),t=(0,le.KR)(null),a=a=>{e.value=a;const s=document.querySelector(`#${a}`);if(s&&t.value){const e=s.offsetTop;t.value.scrollTop=e-100}};return(0,r.sV)(()=>{t.value&&t.value.addEventListener("scroll",()=>{const a=["getting-started","navigation","core-features","user-accounts","tips","faq"];for(const s of a){const a=document.querySelector(`#${s}`);if(a){const r=a.getBoundingClientRect(),i=t.value.getBoundingClientRect();if(r.top<i.bottom&&r.bottom>i.top){e.value=s;break}}}})}),{activeSection:e,scrollToSection:a,contentRef:t}}},Sd=(0,Be.A)(xd,[["render",Id],["__scopeId","data-v-66d6bc9e"]]),Ad=Sd,Xd={class:"profile-page"},_d={key:0,class:"profile-container"},Fd={class:"profile-header"},Pd=["src"],Ud={class:"profile-info"},zd={class:"profile-email"},Vd={key:1,class:"empty-state"};function Td(e,t,a,s,o,n){const l=(0,r.g2)("UserStatsPanel");return(0,r.uX)(),(0,r.CE)("div",Xd,[a.user?((0,r.uX)(),(0,r.CE)("div",_d,[(0,r.Lk)("div",Fd,[(0,r.Lk)("img",{src:a.user.photoURL||"https://cdn-icons-png.flaticon.com/512/149/149071.png",alt:"User",class:"profile-avatar",referrerpolicy:"no-referrer"},null,8,Pd),(0,r.Lk)("div",Ud,[(0,r.Lk)("h1",null,(0,i.v_)(a.user.displayName),1),(0,r.Lk)("p",zd,(0,i.v_)(a.user.email),1)])]),(0,r.bF)(l,{user:a.user},null,8,["user"])])):((0,r.uX)(),(0,r.CE)("div",Vd,t[0]||(t[0]=[(0,r.Lk)("p",null,"Please log in to view your profile.",-1)])))])}const Kd={class:"user-stats-panel"},Hd={class:"stats-grid"},Nd={class:"stat-card"},Bd={class:"stat-content"},Qd={class:"stat-value"},Gd={class:"stat-card"},Dd={class:"stat-content"},Jd={class:"stat-value"},qd={class:"stat-card"},Wd={class:"stat-content"},$d={class:"stat-value"},Od={class:"stat-card"},jd={class:"stat-content"},Yd={class:"stat-value"},Zd={key:0,class:"badges-section"},ec={class:"achievement-progress"},tc={class:"progress-header"},ac={class:"badge-preview"},sc={class:"badge-name"},rc={class:"progress-count"},ic={class:"progress-bar"};function oc(e,t,a,s,o,n){const l=(0,r.g2)("BadgeDisplay");return(0,r.uX)(),(0,r.CE)("div",Kd,[t[9]||(t[9]=(0,r.Lk)("h2",null,"Your Stats",-1)),(0,r.Lk)("div",Hd,[(0,r.Lk)("div",Nd,[t[1]||(t[1]=(0,r.Lk)("div",{class:"stat-icon"},"ðŸ“",-1)),(0,r.Lk)("div",Bd,[t[0]||(t[0]=(0,r.Lk)("div",{class:"stat-label"},"Total Reviews",-1)),(0,r.Lk)("div",Qd,(0,i.v_)(s.stats.reviewCount),1)])]),(0,r.Lk)("div",Gd,[t[3]||(t[3]=(0,r.Lk)("div",{class:"stat-icon"},"ðŸ“¸",-1)),(0,r.Lk)("div",Dd,[t[2]||(t[2]=(0,r.Lk)("div",{class:"stat-label"},"Photo Reviews",-1)),(0,r.Lk)("div",Jd,(0,i.v_)(s.stats.photoReviewCount),1)])]),(0,r.Lk)("div",qd,[t[5]||(t[5]=(0,r.Lk)("div",{class:"stat-icon"},"ðŸ—ºï¸",-1)),(0,r.Lk)("div",Wd,[t[4]||(t[4]=(0,r.Lk)("div",{class:"stat-label"},"States Visited",-1)),(0,r.Lk)("div",$d,(0,i.v_)(s.stats.statesVisited?.size||0)+"/50",1)])]),(0,r.Lk)("div",Od,[t[7]||(t[7]=(0,r.Lk)("div",{class:"stat-icon"},"ðŸ‘¥",-1)),(0,r.Lk)("div",jd,[t[6]||(t[6]=(0,r.Lk)("div",{class:"stat-label"},"Followers",-1)),(0,r.Lk)("div",Yd,(0,i.v_)(s.stats.followerCount||0),1)])])]),s.earnedBadges.length>0?((0,r.uX)(),(0,r.CE)("div",Zd,[(0,r.bF)(l,{badges:s.earnedBadges,title:"Your Achievements"},null,8,["badges"])])):(0,r.Q3)("",!0),(0,r.Lk)("div",ec,[t[8]||(t[8]=(0,r.Lk)("h3",null,"Next Achievement",-1)),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(s.nextBadges,e=>((0,r.uX)(),(0,r.CE)("div",{key:e.id,class:"progress-item"},[(0,r.Lk)("div",tc,[(0,r.Lk)("span",ac,(0,i.v_)(e.emoji),1),(0,r.Lk)("span",sc,(0,i.v_)(e.name),1),(0,r.Lk)("span",rc,(0,i.v_)(s.getProgress(e.id))+"%",1)]),(0,r.Lk)("div",ic,[(0,r.Lk)("div",{class:"progress-fill",style:(0,i.Tr)({width:s.getProgress(e.id)+"%"})},null,4)])]))),128))])])}const nc={key:0,class:"badges-container"},lc={class:"badges-title"},dc={class:"badges-list"},cc=["title"],uc={class:"badge-emoji"},vc={class:"badge-name"};function gc(e,t,a,s,o,n){return a.badges&&a.badges.length>0?((0,r.uX)(),(0,r.CE)("div",nc,[(0,r.Lk)("h4",lc,(0,i.v_)(a.title),1),(0,r.Lk)("div",dc,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(a.badges,e=>((0,r.uX)(),(0,r.CE)("div",{key:e,class:"badge-item",title:s.getBadgeDescription(e)},[(0,r.Lk)("span",uc,(0,i.v_)(s.getBadgeEmoji(e)),1),(0,r.Lk)("span",vc,(0,i.v_)(s.getBadgeName(e)),1)],8,cc))),128))])])):(0,r.Q3)("",!0)}const pc={name:"BadgeDisplay",props:{badges:{type:Array,default:()=>[]},title:{type:String,default:"Badges"}},setup(){const e=Rt,t=t=>{const a=e(t);return a?a.name:"Achievement"},a=t=>{const a=e(t);return a?a.emoji:"ðŸ†"},s=t=>{const a=e(t);return a?`${a.name}: ${a.description}`:"Achievement"};return{getBadgeName:t,getBadgeEmoji:a,getBadgeDescription:s}}},wc=(0,Be.A)(pc,[["render",gc],["__scopeId","data-v-b869d4a4"]]),hc=wc,mc={name:"UserStatsPanel",components:{BadgeDisplay:hc},props:{user:{type:Object,required:!0}},setup(e){const t=(0,le.KR)({reviewCount:0,photoReviewCount:0,statesVisited:new Set,followerCount:0}),a=(0,le.KR)([]),s=(0,le.KR)(!0),i=async()=>{s.value=!0;try{const s=await(0,ue.GG)((0,ue.P)((0,ue.rJ)(me,"reviews"),(0,ue._M)("userId","==",e.user.uid))),i=s.docs.map(e=>e.data());let o=0;const n=new Set,l={};for(const e of i)if(e.photoURL&&o++,e.restaurantId)try{const t=(0,ue.H9)(me,"restaurants",e.restaurantId),a=await(0,ue.x7)(t);if(a.exists()){const e=a.data();if(e.state){const t=e.state.toUpperCase();n.add(t),l[t]=(l[t]||0)+1}}}catch(r){console.error("Error fetching restaurant:",r)}const d=await(0,ue.GG)((0,ue.P)((0,ue.rJ)(me,"follows"),(0,ue._M)("followingId","==",e.user.uid))),c=await(0,ue.GG)((0,ue.rJ)(me,"reviews")),u=c.docs.map(e=>({...e.data(),id:e.id}));let v=0;const g={};u.forEach(e=>{g[e.restaurantId]||(g[e.restaurantId]=[]),g[e.restaurantId].push(e)}),i.forEach(t=>{const a=g[t.restaurantId]||[];if(a.length>0){const t=a.sort((e,t)=>{const a=e.createdAt?.toMillis?.()||(e.createdAt?new Date(e.createdAt).getTime():0),s=t.createdAt?.toMillis?.()||(t.createdAt?new Date(t.createdAt).getTime():0);return a-s});t[0].userId===e.user.uid&&v++}});const p={reviewCount:i.length,photoReviewCount:o,statesVisited:n,reviewsByState:l,firstReviews:v,followerCount:d.docs.length,uid:e.user.uid},w=new Set(a.value),h=Ct(p);h.forEach(e=>{if(!w.has(e)){const t=Lt[Object.keys(Lt).find(t=>Lt[t].id===e)];t&&Ke(`ðŸŽ‰ Congratulations! You earned the ${t.name} badge! ${t.emoji}`,"success",3e3)}}),t.value=p,a.value=h}catch(r){console.error("Error loading user stats:",r)}finally{s.value=!1}},o=(0,r.EW)(()=>Object.values(Lt).filter(e=>!a.value.includes(e.id)).slice(0,3)),n=e=>{const a=Object.values(Lt).find(t=>t.id===e);if(!a)return 0;let s=0;if(e.includes("reviewer-")){const a=parseInt(e.match(/\d+/)[0]);s=Math.min(100,t.value.reviewCount/a*100)}else"photo-master"===e?s=Math.min(100,t.value.photoReviewCount/10*100):"all-50-states"===e&&(s=Math.min(100,(t.value.statesVisited?.size||0)/50*100));return Math.round(s)};return(0,r.sV)(()=>{i()}),{stats:t,earnedBadges:a,nextBadges:o,getProgress:n,loading:s}}},kc=(0,Be.A)(mc,[["render",oc],["__scopeId","data-v-0911318e"]]),bc=kc,yc={name:"Profile",components:{UserStatsPanel:bc},props:{user:{type:Object,default:null}}},fc=(0,Be.A)(yc,[["render",Td],["__scopeId","data-v-15b03173"]]),Lc=fc,Cc={class:"modal-content"},Rc={class:"modal-header"},Ec={class:"modal-body"},Mc={key:0,class:"loading-indicator"},Ic={key:1,class:"error-message"},xc={key:2,class:"review-detail"},Sc={class:"post-header"},Ac=["src"],Xc={class:"post-info"},_c={class:"user-line"},Fc={class:"user-name"},Pc={key:0,class:"medal"},Uc={class:"post-date"},zc={class:"post-content"},Vc={class:"post-title-line"},Tc={class:"restaurant-name"},Kc={key:0,class:"distance"},Hc={key:0,class:"restaurant-location"},Nc={class:"review-body"},Bc={key:0,class:"review-text"},Qc=["src"],Gc={key:2,class:"tags-container"},Dc={class:"post-actions"},Jc=["disabled"];function qc(e,t,a,o,n,l){const d=(0,r.g2)("StarRating"),c=(0,r.g2)("Comments");return(0,r.uX)(),(0,r.CE)("div",{class:"modal-overlay",onClick:t[2]||(t[2]=(0,s.D$)(t=>e.$emit("close"),["self"]))},[(0,r.Lk)("div",Cc,[(0,r.Lk)("div",Rc,[t[3]||(t[3]=(0,r.Lk)("h2",null,"Review",-1)),(0,r.Lk)("button",{onClick:t[0]||(t[0]=t=>e.$emit("close")),class:"close-btn"},"Ã—")]),(0,r.Lk)("div",Ec,[o.loading?((0,r.uX)(),(0,r.CE)("div",Mc,"Loading review...")):o.error?((0,r.uX)(),(0,r.CE)("div",Ic,(0,i.v_)(o.error),1)):o.review?((0,r.uX)(),(0,r.CE)("div",xc,[(0,r.Lk)("div",Sc,[(0,r.Lk)("img",{src:o.review.userPhoto||"https://cdn-icons-png.flaticon.com/512/149/149071.png",alt:"User",class:"user-avatar",referrerpolicy:"no-referrer"},null,8,Ac),(0,r.Lk)("div",Xc,[(0,r.Lk)("div",_c,[(0,r.Lk)("span",Fc,(0,i.v_)(o.review.userName),1),o.review.medal?((0,r.uX)(),(0,r.CE)("span",Pc,(0,i.v_)(o.review.medal),1)):(0,r.Q3)("",!0)]),(0,r.Lk)("span",Uc,(0,i.v_)(o.formatDate(o.review.createdAt)),1)])]),(0,r.Lk)("div",zc,[(0,r.Lk)("div",Vc,[(0,r.Lk)("h2",Tc,(0,i.v_)(o.review.restaurantName),1),null!==o.review.distance?((0,r.uX)(),(0,r.CE)("div",Kc,(0,i.v_)(o.review.distance.toFixed(1))+" miles away ",1)):(0,r.Q3)("",!0)]),o.review.restaurantCity||o.review.restaurantState?((0,r.uX)(),(0,r.CE)("div",Hc,[(0,r.eW)((0,i.v_)(o.review.restaurantCity),1),o.review.restaurantCity&&o.review.restaurantState?((0,r.uX)(),(0,r.CE)(r.FK,{key:0},[(0,r.eW)(", ")],64)):(0,r.Q3)("",!0),(0,r.eW)((0,i.v_)(o.review.restaurantState),1)])):(0,r.Q3)("",!0),(0,r.Lk)("div",Nc,[(0,r.bF)(d,{rating:o.review.rating},null,8,["rating"]),o.review.text?((0,r.uX)(),(0,r.CE)("p",Bc,'"'+(0,i.v_)(o.review.text)+'"',1)):(0,r.Q3)("",!0),o.review.photoURL?((0,r.uX)(),(0,r.CE)("img",{key:1,src:o.review.photoURL,alt:"Review photo",class:"review-photo"},null,8,Qc)):(0,r.Q3)("",!0),o.review.tags&&o.review.tags.length>0?((0,r.uX)(),(0,r.CE)("div",Gc,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(o.review.tags,e=>((0,r.uX)(),(0,r.CE)("span",{key:e,class:"tag"},(0,i.v_)(e),1))),128))])):(0,r.Q3)("",!0)]),(0,r.Lk)("div",Dc,[(0,r.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>o.toggleLike&&o.toggleLike(...e)),class:(0,i.C4)(["like-btn",{liked:o.review.isLiked}]),disabled:!a.user},[t[4]||(t[4]=(0,r.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20px",viewBox:"0 0 24 24",width:"20px",fill:"currentColor"},[(0,r.Lk)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,r.Lk)("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})],-1)),(0,r.Lk)("span",null,(0,i.v_)(o.review.likeCount||0),1)],10,Jc)]),(0,r.bF)(c,{"post-id":o.review.id,user:a.user,"post-type":"reviews","post-author-id":o.review.userId},null,8,["post-id","user","post-author-id"])])])):(0,r.Q3)("",!0)])])])}const Wc=(e={})=>{const{title:t="PorkHub",description:a="Find, review, and share the best breaded pork tenderloin sandwiches.",image:s="",url:r=window.location.href,type:i="website"}=e,o=(e,t)=>{if(!t)return;let a=document.querySelector(`meta[property="${e}"]`)||document.querySelector(`meta[name="${e}"]`);a||(a=document.createElement("meta"),e.startsWith("og:")?a.setAttribute("property",e):a.setAttribute("name",e),document.head.appendChild(a)),a.setAttribute("content",t)};document.title=t,o("description",a),o("og:title",t),o("og:description",a),o("og:image",s),o("og:url",r),o("og:type",i),o("og:site_name","PorkHub"),o("twitter:card","summary_large_image"),o("twitter:title",t),o("twitter:description",a),o("twitter:image",s);let n=document.querySelector('link[rel="canonical"]');n||(n=document.createElement("link"),n.setAttribute("rel","canonical"),document.head.appendChild(n)),n.setAttribute("href",r)},$c=()=>{Wc({title:"PorkHub",description:"Find, review, and share the best breaded pork tenderloin sandwiches. Join the PorkHub community to discover hidden gems and top-rated restaurants.",image:"",url:window.location.origin})},Oc={name:"ReviewDetailModal",components:{StarRating:je,Comments:Ge},props:{reviewId:{type:String,required:!0},user:{type:Object,default:null}},emits:["close"],setup(e){const t=(0,le.KR)(null),a=(0,le.KR)(!0),s=(0,le.KR)(""),i=(0,le.KR)(new Map),o=(0,le.KR)(new Map),n=(0,le.KR)(null);let l=()=>{};const d=e=>"number"!==typeof e?null:0===e?"ðŸ¥‡":1===e?"ðŸ¥ˆ":2===e?"ðŸ¥‰":e>=3&&e<10?"ðŸ…":null,c=e=>e&&e.toDate?e.toDate().toLocaleString():"",u=async()=>{a.value=!0,s.value="";try{const r=await(0,ue.GG)((0,ue.rJ)(me,"restaurants"));r.forEach(e=>{i.value.set(e.id,e.data())});const l=await(0,ue.GG)((0,ue.P)((0,ue.rJ)(me,"users"),(0,ue.My)("reviewCount","desc"),(0,ue.AB)(30))),c=l.docs.map(e=>({id:e.id,...e.data()})).filter(e=>{const t=Number(e.reviewCount)||0;return t>0}).sort((e,t)=>{const a=Number(e.reviewCount)||0,s=Number(t.reviewCount)||0;return s-a}).slice(0,10),u=new Map;c.forEach((e,t)=>{u.set(e.id,t)}),o.value=u,navigator.geolocation&&navigator.geolocation.getCurrentPosition(e=>{n.value={lat:e.coords.latitude,lng:e.coords.longitude},v()},()=>{});const p=(0,ue.H9)(me,"reviews",e.reviewId),w=await(0,ue.x7)(p);if(!w.exists())return s.value="Review not found.",void(a.value=!1);const h={id:w.id,...w.data()},m=i.value.get(h.restaurantId),k=o.value.get(h.userId);t.value={...h,restaurantName:m?.name||"Unknown Restaurant",restaurantCity:m?.city,restaurantState:m?.state,location:m?.location||null,distance:null,medal:d(k),likeCount:0,isLiked:!1},v(),g();const b=`${window.location.origin}/?review=${t.value.id}`,y=`${t.value.userName}'s Review of ${t.value.restaurantName}`,f=t.value.text?`"${t.value.text.substring(0,150)}${t.value.text.length>150?"...":""}"`:`${t.value.userName} rated ${t.value.restaurantName} ${t.value.rating} stars`,L=t.value.photoURL||"";Wc({title:y,description:f,image:L,url:b,type:"article"})}catch(r){console.error("Error fetching review:",r),s.value="Failed to load review. Please try again."}finally{a.value=!1}},v=()=>{t.value&&n.value&&t.value.location&&(t.value.distance=fa(n.value.lat,n.value.lng,t.value.location.lat,t.value.location.lng))},g=()=>{if(!t.value)return;const a=(0,ue.H9)(me,"reviews",t.value.id),s=(0,ue.rJ)(a,"likes"),r=(0,ue.P)(s);l=(0,ue.aQ)(r,a=>{t.value&&(t.value.likeCount=a.size,t.value.isLiked=!!e.user&&a.docs.some(t=>t.data().userId===e.user.uid))},e=>{console.error("Error fetching likes:",e)})},p=async()=>{if(!e.user||!t.value)return;const a=(0,ue.H9)(me,"reviews",t.value.id),s=(0,ue.rJ)(a,"likes"),r=(0,ue.P)(s,(0,ue._M)("userId","==",e.user.uid)),i=await(0,ue.GG)(r);i.empty?await(0,ue.gS)(s,{userId:e.user.uid,createdAt:(0,ue.O5)()}):await(0,ue.kd)(i.docs[0].ref)};return(0,r.wB)(()=>e.reviewId,()=>{e.reviewId?(l&&l(),u()):$c()},{immediate:!0}),(0,r.sV)(()=>{e.reviewId&&u()}),(0,r.hi)(()=>{$c(),l&&l()}),{review:t,loading:a,error:s,formatDate:c,toggleLike:p}}},jc=(0,Be.A)(Oc,[["render",qc],["__scopeId","data-v-a904abd6"]]),Yc=jc,Zc=["onClick"],eu={class:"toast-message"},tu=["onClick"];function au(e,t,a,o,n,l){return(0,r.uX)(),(0,r.Wv)(s.F,{name:"toast",tag:"div",class:"toast-container"},{default:(0,r.k6)(()=>[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(o.toasts,e=>((0,r.uX)(),(0,r.CE)("div",{key:e.id,class:(0,i.C4)(["toast",`toast-${e.type}`]),onClick:t=>o.removeToast(e.id)},[(0,r.Lk)("span",eu,(0,i.v_)(e.message),1),(0,r.Lk)("button",{class:"toast-close",onClick:(0,s.D$)(t=>o.removeToast(e.id),["stop"])},"Ã—",8,tu)],10,Zc))),128))]),_:1})}const su={name:"Toast",setup(){const e=(0,le.KR)([]);let t=null;const a=t=>{const a=e.value.findIndex(e=>e.id===t);a>-1&&e.value.splice(a,1)};return(0,r.sV)(()=>{t=He(t=>{e.value.push(t),t.duration>0&&setTimeout(()=>{a(t.id)},t.duration)})}),(0,r.hi)(()=>{t&&t()}),{toasts:e,removeToast:a}}},ru=(0,Be.A)(su,[["render",au],["__scopeId","data-v-285b30f8"]]),iu=ru,ou={name:"App",components:{Home:Ra,Restaurants:dr,BucketList:jl,UserSearch:Zr,Review:$i,Recommendations:ko,DatabaseStats:_o,MyReviews:vn,Leaderboard:al,Followers:Rl,Profile:Lc,Following:fd,Help:Ad,ReviewDetailModal:Yc,Toast:iu,BadgeDisplay:hc},setup(){const e=(0,le.KR)(null),t=(0,le.KR)("home"),a=(0,le.KR)(null),s=(0,le.KR)(window.innerWidth<768),i=(0,le.KR)("26.01.20.165424"),o=(0,le.KR)(null),n=(0,le.KR)([]),l=(0,r.EW)(()=>e.value&&"kennected.com@gmail.com"===e.value.email),d=new Set(["review","user-search","bucket-list","my-reviews","followers","following","database-stats","profile"]),c={home:"Home",restaurants:"Restaurants","bucket-list":"BucketList","user-search":"UserSearch",review:"Review","my-reviews":"MyReviews",recommendations:"Recommendations",leaderboard:"Leaderboard","database-stats":"DatabaseStats",followers:"Followers",following:"Following",help:"Help",profile:"Profile"},u=(0,r.EW)(()=>c[t.value]||"Home"),v=()=>{s.value=!s.value};window.addEventListener("resize",()=>{s.value=window.innerWidth<768});const g=async e=>{try{const t=(0,ue.rJ)(me,"reviews"),a=(0,ue.P)(t,(0,ue._M)("userId","==",e)),s=await(0,ue.GG)(a),r=s.docs.map(e=>e.data()),i=(0,ue.P)(t),o=await(0,ue.GG)(i),l=o.docs.map(e=>e.data()),d=(0,ue.H9)(me,"users",e),c=await(0,ue.x7)(d),u=Et(c,r,l),v=Ct(u);n.value=v}catch(t){console.error("Error loading user badges:",t)}};(0,ce.hg)(we,async a=>{if(e.value=a,a)try{const e=(0,ue.H9)(me,"users",a.uid),t=await(0,ue.x7)(e);t.exists()||await(0,ue.BN)(e,{uid:a.uid,displayName:a.displayName,email:a.email,photoURL:a.photoURL,createdAt:new Date,reviewCount:0}),await g(a.uid)}catch(s){console.error("Error checking/creating user document:",s)}else n.value=[],d.has(t.value)&&(t.value="home")});const p=async()=>{try{await(0,ce.df)(we,he)}catch(e){alert("Login failed: "+e.message)}},w=async()=>{await(0,ce.CI)(we)},h=()=>{t.value="home"},m=()=>{t.value="restaurants"},k=()=>{t.value="user-search"},b=()=>{t.value="review"},y=()=>{t.value="my-reviews"},f=()=>{t.value="recommendations"},L=()=>{t.value="leaderboard"},C=()=>{t.value="database-stats"},R=()=>{t.value="followers"},E=()=>{t.value="following"},M=()=>{t.value="bucket-list"},I=()=>{t.value="help"},x=()=>{t.value="profile"},S=e=>{a.value=e,t.value="review"},A=()=>{const e=window.location.pathname.match(/\/review\/([^\/\?]+)/);if(e&&e[1]){const t=e[1];return console.log("Deep link detected in path with review ID:",t),console.log("Setting sharedReviewId..."),o.value=t,void console.log("sharedReviewId is now:",o.value)}const t=new URLSearchParams(window.location.search),a=t.get("review");if(a)return console.log("Deep link detected with query param review ID:",a),console.log("Setting sharedReviewId..."),o.value=a,void console.log("sharedReviewId is now:",o.value);const s=window.location.hash;if(s){const e=s.match(/#review\/([^/\?]+)/);if(e&&e[1]){const t=e[1];return console.log("Deep link detected with hash review ID:",t),void(o.value=t)}}},X=()=>{o.value=null,$c(),window.history.replaceState(null,"","/")};return(0,r.sV)(()=>{console.log("App mounted, checking for deep links..."),console.log("Current URL:",window.location.href),console.log("Current search params:",window.location.search),A(),window.addEventListener("hashchange",A),window.addEventListener("popstate",A)}),(0,r.hi)(()=>{window.removeEventListener("hashchange",A),window.removeEventListener("popstate",A)}),{user:e,loginWithGoogle:p,logout:w,currentPage:t,goToHome:h,goToRestaurants:m,goToUserSearch:k,goToReview:b,goToMyReviews:y,goToRecommendations:f,goToLeaderboard:L,goToDatabaseStats:C,goToFollowers:R,goToFollowing:E,goToBucketList:M,goToHelp:I,goToProfile:x,reviewAt:S,selectedRestaurantForReview:a,isSidebarCollapsed:s,toggleSidebar:v,isAdmin:l,currentComponent:u,appVersion:i,sharedReviewId:o,closeReviewModal:X,userBadges:n}}},nu=(0,Be.A)(ou,[["render",L]]),lu=nu;(0,s.Ef)(lu).mount("#app")},914:(e,t,a)=>{a.d(t,{geocodeAddress:()=>r});const s="kennected.com@gmail.com";async function r(e){if(!e||!e.trim())return console.error("Geocoding error: Address is empty."),null;const t=`https://nominatim.openstreetmap.org/search?q=${encodeURIComponent(e)}&format=json&limit=1&email=${s}`;try{const e=await fetch(t),a=await e.json();if(a&&a.length>0){const{lat:e,lon:t}=a[0];return{lat:parseFloat(e),lng:parseFloat(t)}}return null}catch(a){return console.error("Error during geocoding fetch:",a),null}}}},t={};function a(s){var r=t[s];if(void 0!==r)return r.exports;var i=t[s]={exports:{}};return e[s](i,i.exports,a),i.exports}a.m=e,(()=>{var e=[];a.O=(t,s,r,i)=>{if(!s){var o=1/0;for(c=0;c<e.length;c++){for(var[s,r,i]=e[c],n=!0,l=0;l<s.length;l++)(!1&i||o>=i)&&Object.keys(a.O).every(e=>a.O[e](s[l]))?s.splice(l--,1):(n=!1,i<o&&(o=i));if(n){e.splice(c--,1);var d=r();void 0!==d&&(t=d)}}return t}i=i||0;for(var c=e.length;c>0&&e[c-1][2]>i;c--)e[c]=e[c-1];e[c]=[s,r,i]}})(),(()=>{a.d=(e,t)=>{for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}})(),(()=>{a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})(),(()=>{var e={524:0};a.O.j=t=>0===e[t];var t=(t,s)=>{var r,i,[o,n,l]=s,d=0;if(o.some(t=>0!==e[t])){for(r in n)a.o(n,r)&&(a.m[r]=n[r]);if(l)var c=l(a)}for(t&&t(s);d<o.length;d++)i=o[d],a.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return a.O(c)},s=self["webpackChunkmy_vue_app"]=self["webpackChunkmy_vue_app"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})();var s=a.O(void 0,[504],()=>a(449));s=a.O(s)})();
//# sourceMappingURL=app.c1090594.js.map